function _typeof(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _get(e,t,i){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var e=_superPropBase(e,t);if(e)return e=Object.getOwnPropertyDescriptor(e,t),e.get?e.get.call(i):e.value})(e,t,i||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(i){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(i);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var i="function"==typeof Map?new Map:void 0;return(b=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)})(e)}function _construct(e,t,i){return(a=_isNativeReflectConstruct()?Reflect.construct:function(e,t,i){var r=[null];r.push.apply(r,t);t=new(Function.bind.apply(e,r));return i&&_setPrototypeOf(t,i.prototype),t}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}window.JQX||(window.JQX={Utilities:{Core:{isMobile:function(){var e=/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase());return e||["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}}}});var LayoutItem=function(){_inherits(i,_wrapNativeSuper(HTMLElement));var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this))._properties={min:50,label:"Item",modifiers:["resize","drag","close"],size:null},e}return _createClass(i,[{key:"_setProperty",value:function(e,t){var i=this;i._properties[e]!==t&&(i._properties[e]=t,i._updating=!0,"disabled"===e||"modifiers"===e?t?i.setAttribute(e,t):i.removeAttribute(e):null===t?i.removeAttribute(e):i.setAttribute(e,t),i.isCompleted&&((e=i.closest("jqx-layout"))&&!e._resizeDetails&&!e._updating&&e.isRendered&&e.refresh(),i._updating=!1))}},{key:"label",get:function(){return this._properties.label},set:function(e){this._setProperty("label",e)}},{key:"modifiers",get:function(){return this._properties.modifiers},set:function(e){this._setProperty("modifiers",e)}},{key:"min",get:function(){return this._properties.min},set:function(e){this._setProperty("min",e)}},{key:"size",get:function(){return this._properties.size},set:function(e){null===e||"string"==typeof e?this._setProperty("size",e):this._setProperty("size",Math.max(this.min,e))}},{key:"attributeChangedCallback",value:function(e,t,i){var r=this;t!==i&&r.isCompleted&&("size"===e?r._updating||(null===i?this[e]=null:r[e]=Math.max(r.min,parseInt(i))):r[e]=i)}},{key:"connectedCallback",value:function(){this.isCompleted||this.render()}},{key:"whenRendered",value:function(e){this.isRendered?e():(this.whenRenderedCallbacks||(this.whenRenderedCallbacks=[]),this.whenRenderedCallbacks.push(e))}},{key:"render",value:function(){var e=this;e.hasAttribute("data-id")||e.setAttribute("data-id","id"+Math.random().toString(16).slice(2)),e.hasAttribute("label")||e.setAttribute("label",e.label),e.hasAttribute("min")||e.setAttribute("min",e.min),e.hasAttribute("label")||e.setAttribute("label",e.label),e.hasAttribute("modifiers")||e.setAttribute("modifiers",e.modifiers);for(var t=0;t<e.attributes.length;t++){var i=e.attributes[t],r=i.name,i=i.value;isNaN(i)||"min"!==r&&"size"!==r?e._properties[r]=i:e._properties[r]=parseInt(i)}if(e.classList.add("jqx-layout-item"),e.isCompleted=!0,e.whenRenderedCallbacks){for(t=0;t<e.whenRenderedCallbacks.length;t++)e.whenRenderedCallbacks[t]();e.whenRenderedCallbacks=[]}}}],[{key:"observedAttributes",get:function(){return["min","size","label","modifiers"]}}]),i}(),LayoutGroup=function(){_inherits(i,LayoutItem);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this))._properties.label="Group",e._properties.orientation="vertical",e}return _createClass(i,[{key:"orientation",get:function(){return this._properties.orientation},set:function(e){this._setProperty("orientation",e)}},{key:"render",value:function(){var e=this;_get(_getPrototypeOf(i.prototype),"render",this).call(this),e.className="jqx-layout-group",e.hasAttribute("orientation")?e._properties.orientation=e.getAttribute("orientation"):e.setAttribute("orientation",e._properties.orientation)}}],[{key:"observedAttributes",get:function(){return["min","size","modifiers","orientation","position"]}}]),i}(),TabLayoutGroup=function(){_inherits(i,LayoutGroup);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this))._properties.position="top",e._properties.label="TabGroup",e}return _createClass(i,[{key:"position",get:function(){return this._properties.position},set:function(e){this._setProperty("position",e)}},{key:"render",value:function(){_get(_getPrototypeOf(i.prototype),"render",this).call(this),!this.hasAttribute("position")&&this.position&&this.setAttribute("position","top")}}],[{key:"observedAttributes",get:function(){return["min","size","modifiers","orientation","position"]}}]),i}(),TabLayoutItem=function(){_inherits(i,LayoutGroup);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this))._properties.label="TabItem",e}return i}(),SplitLayout=(!function(t){t.jqx.jqxWidget("jqxSplitLayout","",{}),t.extend(t.jqx._jqxSplitLayout.prototype,{defineInstance:function(){var e={dataSource:null,ready:null,orientation:"vertical"};return this===t.jqx._jqxSplitLayout.prototype||t.extend(!0,this,e),e},createInstance:function(){var e=this;this._properties={dataSource:null,ready:null,orientation:"vertical"},(e=this).layout=document.createElement("jqx-split-layout"),e.layout.style.width="100%",e.layout.style.height="100%",e.element.className+=e.toThemeProperty("jqx-split-layout-component jqx-rc-all jqx-widget"),e.layout.dataSource=e.dataSource,e.layout.orientation=e.orientation,e.layout.ready=e.ready,e.element.appendChild(e.layout)},propertyChangedHandler:function(e,t,i,r){(i!=r||r instanceof Object)&&e.layout&&(e.layout[t]=r)},render:function(){this.layout&&this.layout.render()},refresh:function(){this.layout&&this.layout.isRendered&&this.layout.refresh()},dataBind:function(){this.layout&&this.layout.dataBind()}})}(jqxBaseFramework),function(){_inherits(o,_wrapNativeSuper(HTMLElement));var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.call(this))._properties={dataSource:null,orientation:"vertical"},e}return _createClass(o,[{key:"orientation",get:function(){return this._properties.orientation},set:function(e){this._properties.orientation=e}},{key:"dataSource",get:function(){return this._properties.dataSource},set:function(e){this._properties.dataSource=e}},{key:"_dragStart",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"_leaveHandler",value:function(){this._resizeDetails||(this._handleButtonsVisibility(null),this._hideSplitter(),requestAnimationFrame(function(){}))}},{key:"_enterHandler",value:function(){var e=this;e._resizeDetails||(e._handleButtonsVisibility(e._selectedItem),e._updateSplitter(),requestAnimationFrame(function(){e.classList.add("outline")}))}},{key:"template",value:function(){return'<div class="jqx-container" id="container" role="presentation"><jqx-layout-group data-id="root" id="itemsContainer"></jqx-layout-group><div root-splitter id="splitter" class="jqx-layout-splitter"></div>'}},{key:"propertyChangedHandler",value:function(e,t,i){var r=this;switch(e){case"orientation":r.$.itemsContainer&&(r.$.itemsContainer.orientation=r.orientation);break;case"dataSource":r.dataBind();break;case"selectedIndex":r._handleItemClick(r.getItem(i+""),!0);break;default:_get(_getPrototypeOf(o.prototype),"propertyChangedHandler",this).call(this,e,t,i)}}},{key:"dataBind",value:function(){var m=this.$.itemsContainer.innerHTML="";(function e(t,i){for(var r=0;r<t.length;r++){var o=t[r],n=o.size,a=o.min,s=o.modifiers,l=o.type,u=o.position,d=o.orientation||"vertical",c=o.id,p=o.label,f="";void 0!==c&&(f+='id="'.concat(c,'" ')),void 0!==n&&(f+='size="'.concat(n,'" ')),void 0!==p&&(f+='label="'.concat(p,'" ')),void 0!==a&&(f+='min="'.concat(a,'" ')),void 0!==s&&(f+='modifiers="'.concat(s,'" ')),void 0!==u&&(f+='position="'.concat(u,'" ')),o.items?(f+="orientation=".concat(d," "),"tabs"===l?(m+="<jqx-tab-layout-group ".concat(f,">"),e(o.items,!0),m+="</jqx-tab-layout-group>"):(m+="<jqx-layout-group ".concat(f,">"),e(o.items),m+="</jqx-layout-group>")):(c=o.content||"",i?m+="<jqx-tab-layout-item ".concat(f,">")+c+"</jqx-tab-layout-item>":"tabs"===l?m=(m+="<jqx-tab-layout-group>")+("<jqx-tab-layout-item ".concat(f,">")+c)+"</jqx-tab-layout-item></jqx-tab-layout-group>":m+="<jqx-layout-item ".concat(f,">")+c+"</jqx-layout-item>")}})(this.dataSource),this.$.itemsContainer.innerHTML=m,this.refresh()}},{key:"render",value:function(){function e(){t.dataSource?t.dataBind():t.dataSource=t._getDataSource(t._getLayout()),t.$.itemsContainer.orientation=t.orientation,t.refresh(),t._updateSplitter(),t.isRendered=!0,t.classList.add("outline"),t.ready&&t.ready()}var t=this;t.setAttribute("role","group"),t.selectedIndex&&t._handleItemClick(t.getItem(t.selectedIndex+""),!0);"complete"===document.readyState?e():window.addEventListener("load",function(){e()})}},{key:"connectedCallback",value:function(){function e(){for(var e=document.createDocumentFragment();t.childNodes.length;)e.appendChild(t.firstChild);t.innerHTML=t.template(),t.classList.add("jqx-widget"),t.$={container:t.querySelector("#container"),itemsContainer:t.querySelector("#itemsContainer"),splitter:t.querySelector("#splitter")},delete t.$.container.id,delete t.$.itemsContainer.id,delete t.$.splitter.id,t.$.itemsContainer.appendChild(e),t.classList.add("jqx-split-layout"),document.addEventListener("pointerdown",function(e){t._documentDownHandler(e)}),document.addEventListener("pointermove",function(e){t._documentMoveHandler(e)}),document.addEventListener("pointerup",function(e){t._documentUpHandler(e)}),document.addEventListener("selectstart",function(e){t._documentSelectStartHandler(e)}),document.addEventListener("keyup",function(e){t._keyUpHandler(e)}),t.addEventListener("mouseleave",function(e){t._leaveHandler(e)}),t.addEventListener("mouseenter",function(e){t._enterHandler(e)}),t.addEventListener("dragStart",function(e){t._dragStart(e)}),t.render()}var t=this;"complete"===document.readyState?e():window.addEventListener("load",function(){e()})}},{key:"getItem",value:function(e){if(null!=e){e=(e+"").split(".");for(var t,i=this._getDataSource(this._getLayout()),r=0;r<e.length&&(t=i[e[r]]);r++)i=t.items;return t}}},{key:"_documentDownHandler",value:function(e){e=e.target;this.contains(e)&&e.closest&&(this._target=e,this._updateSplitter())}},{key:"_documentMoveHandler",value:function(d){var c=this,e=d.target,t=c._contextMenu;if(t&&!JQX.Utilities.Core.isMobile){if(t.querySelector(".jqx-layout-context-menu-item[hover]"))for(var i=t.children,r=0;r<i.length;r++)i[r].removeAttribute("hover");t.contains(e)&&e.closest&&e.closest(".jqx-layout-context-menu-item")&&e.setAttribute("hover","")}if(c._dragDetails){var o=Math.abs(c._dragDetails.pageX-d.pageX);if((m=Math.abs(c._dragDetails.pageY-d.pageY))<=5&&o<=5)return;c._dragDetails.feedback.parentElement||(document.body.appendChild(c._dragDetails.feedback),document.body.appendChild(c._dragDetails.overlay),setTimeout(function(){c._dragDetails.feedback.classList.add("dragging")},100)),c._dragDetails.dragging=!0,c._dragDetails.feedback.style.left=d.pageX-c._dragDetails.feedback.offsetWidth/2-5+"px",c._dragDetails.feedback.style.top=d.pageY-c._dragDetails.feedback.offsetHeight/2-5+"px";for(var n=document.elementsFromPoint(d.pageX,d.pageY),a=null,s=!1,r=0;r<n.length;r++){var l=n[r];if(!c._dragDetails.feedback.contains(l)){if(l.classList.contains("jqx-layout-tab-strip")){if(c._dragDetails.element.contains(l))continue;a=l.parentElement,s=!0;break}if((l.parentElement!==c._dragDetails.parent&&l!==c._dragDetails.parent||1!==c._dragDetails.layoutGroup.items.length)&&!c._dragDetails.element.contains(l)){if(l instanceof TabLayoutItem){a=l.parentElement;break}if(l instanceof TabLayoutGroup){a=l;break}}}}function u(e,t){for(var i=c.offset(e),r=null,o=50,n=t,a=t,s=(t?o=0:(a=e.offsetWidth/3,n=e.offsetHeight/3),[{left:i.left,top:i.top,right:i.left+o,bottom:i.top+o,position:"top"},{left:i.left+o,top:i.top,right:i.left+e.offsetWidth-o,bottom:i.top+n-o,position:"top"},{left:i.left+e.offsetWidth-o,top:i.top,right:i.left+e.offsetWidth,bottom:i.top+o,position:"top"},{left:i.left,top:i.top+o,right:i.left+a,bottom:i.top+e.offsetHeight-o,position:"left"},{left:i.left+e.offsetWidth-a,top:i.top+o,right:i.left+e.offsetWidth,bottom:i.top+e.offsetHeight-o,position:"right"},{left:i.left,top:i.top+e.offsetHeight-o,right:i.left+o,bottom:i.top+e.offsetHeight,position:"bottom"},{left:i.left+o,top:i.top+e.offsetHeight-n+o,right:i.left+e.offsetWidth-o,bottom:i.top+e.offsetHeight,position:"bottom"},{left:i.left+e.offsetWidth-o,top:i.top+e.offsetHeight-o,right:i.left+e.offsetWidth,bottom:i.top+e.offsetHeight,position:"bottom"}]),l=0;l<s.length;l++){var u=s[l];if(u.left<=d.pageX&&d.pageX<=u.right&&u.top<=d.pageY&&d.pageY<=u.bottom){r=u.position;break}}return r}var t=c.querySelector("jqx-layout-group"),e=u(t,10),p=null;e?p=t:a?s?a!==c._dragDetails.parent&&(e="center",p=a):(e=u(a)||"center",p=a):c._handleDropArea(null),p&&(c._dragDetails.current=p,c._dragDetails.position=e,c._handleDropArea(p,e))}if(c._resizeDetails){function f(e){e.classList.contains("jqx-visibility-hidden")||(e.style.right="",e.style.top="",e.style.left="",e.style.bottom="")}var o=Math.abs(c._resizeDetails.clientX-d.clientX),m=Math.abs(c._resizeDetails.clientY-d.clientY),t=c._resizeDetails.splitter,p=c._resizeDetails.item,e=c._resizeDetails.itemRect,h=c._resizeDetails.previousItemRect,y=c._resizeDetails.previousItem,b=c._resizeDetails.nextItemRect,_=c._resizeDetails.nextItem,g=parseInt(p.getAttribute("min"));if(f(t),f(c.$.splitter),t.classList.remove("error"),t.classList.add("active"),!c._resizeDetails.dragging){if(t.classList.contains("horizontal")&&m<=5)return;if(t.classList.contains("vertical")&&o<=5)return;c._resizeDetails.dragging=!0}var v,x,L,C,m={clientPos:"clientX",pos:"x",size:"width",near:"left",far:"right",offsetSize:"offsetWidth"};t.classList.contains("horizontal")&&(m={clientPos:"clientY",pos:"y",size:"height",near:"top",far:"bottom",offsetSize:"offsetHeight"});t.classList.contains("last")?(v=d[m.clientPos]-c._resizeDetails.splitterRect[m.pos],(L=e[m.size]-g)<v&&(v=L,t.classList.add("error")),h&&(g=parseInt(y.getAttribute("min")),v<-(x=h[m.size]-g)&&(v=-x,t.classList.add("error"))),t.style[m.near]=v+"px",C=p[m.offsetSize]-v,p.setAttribute("size",C),y&&(o=p[m.offsetSize]+y[m.offsetSize]-C,y.setAttribute("size",o))):(v=-d[m.clientPos]+c._resizeDetails.splitterRect[m.pos],(x=e[m.size]-g)<v&&(v=x,t.classList.add("error")),b&&(g=parseInt(_.getAttribute("min")),v<(L=-b[m.size]+g)&&(v=L,t.classList.add("error"))),t.style[m.far]=v+"px",C=p[m.offsetSize]-v,p.setAttribute("size",C),_&&(h=_[m.offsetSize]+p[m.offsetSize]-C,_.setAttribute("size",h))),y=t,o=c.offset(y),(e=c.offset(c)).left++,e.top++,c.$.splitter.style.width=y.offsetWidth+"px",c.$.splitter.style.height=y.offsetHeight+"px",c.$.splitter.className=y.className,c.$.splitter.style.left=o.left-e.left+"px",c.$.splitter.style.top=o.top-e.top+"px",y.setAttribute("drag",""),c.$.splitter.setAttribute("drag","")}}},{key:"_offsetTop",value:function(e){return e?e.offsetTop+this._offsetTop(e.offsetParent):0}},{key:"_offsetLeft",value:function(e){return e?e.offsetLeft+this._offsetLeft(e.offsetParent):0}},{key:"offset",value:function(e){return{left:this._offsetLeft(e),top:this._offsetTop(e)}}},{key:"_keyUpHandler",value:function(e){var t,i=this;"Escape"===e.key?(i._dragDetails&&(i._dragDetails.feedback.remove(),i._dragDetails.overlay.remove(),i._dragDetails=null,i._handleDropArea(null)),i._resizeDetails&&((t=i._resizeDetails).splitter.classList.contains("last")?t.previousItem.size=t.previousItemSize:t.nextItem.size=t.nextItem.previousItemSize,t.item.size=t.itemSize,i.refresh(),i._handleItemClick(t.item),i._resizeDetails=null)):"Delete"===e.key&&i._selectedItem&&i._removeLayoutItem(i._selectedItem)}},{key:"_endDrag",value:function(){var e,t,i,r,o,n=this;n._handleDropArea(null),n._dragDetails.dragging&&(i=n._dragDetails.current,e=n._dragDetails.element,t=n._dragDetails.position,n._handleDropArea(null),i&&(n._addTabLayoutItem(i,t,e),n._removeLayoutItem(e),i.parentElement&&1===Array.from(i.parentElement.parentElement.children).filter(function(e){return!!e.classList.contains("jqx-layout-group")}).length&&(r=(i=(t=i.parentElement).parentElement).parentElement,"root"!==i.getAttribute("data-id")&&"root"!==r.getAttribute("data-id")&&r!==n&&(0<=(o=Array.from(r.children).indexOf(t.parentElement))?r.insertBefore(t,r.children[o]):r.appendChild(t),i.remove())),n.refresh(),n._updateSplitter(),requestAnimationFrame(function(){n.classList.add("outline"),n.querySelectorAll(".jqx-element").forEach(function(e){n.dispatchEvent(new CustomEvent("resize"))})})),n.dispatchEvent(new CustomEvent("stateChange",{type:"insert",item:e})),n._dragDetails.feedback.remove(),n._dragDetails.overlay.remove()),n._dragDetails=null}},{key:"_documentUpHandler",value:function(e){var t,i=this,r=JQX.Utilities.Core.isMobile,o=r?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.target;if(2!==e.button){if(i._dragDetails&&i._endDrag(e),i._resizeDetails)return(t=i._resizeDetails).item&&(t.item.style.overflow=""),t.previousItem&&(t.previousItem.style.overflow=""),t.nextItem&&(t.nextItem.style.overflow=""),i.refresh(),i._handleItemClick(t.item),i._resizeDetails=null,window.dispatchEvent(new Event("resize")),void i.querySelectorAll(".jqx-element").forEach(function(e){e.dispatchEvent(new CustomEvent("resize"))});i.contains(o)&&(i.classList.add("outline"),i._target&&!o.item&&(o instanceof TabLayoutItem?i._handleItemClick(o):i._handleItemClick(o.closest(".jqx-layout-item"))),i._target&&(i._target===o&&(!e.button&&o.closest(".jqx-layout-buttons-container")?(t=e.target,i._handleButtonClick(t.item,t.position)):o.closest(".jqx-layout-context-menu")&&(!r&&!e.button||r)&&i._handleMenuItemClick(o.closest(".jqx-layout-context-menu-item"))),delete i._target))}}},{key:"_documentSelectStartHandler",value:function(e){this._target&&e.preventDefault()}},{key:"_getDataSource",value:function(e,t,i){var r=[];i=i||0,t=t||"";for(var o=0;o<e.length;o++){var n,a=e[o],s={label:a.label,id:a.getAttribute("data-id"),orientation:a.orientation,size:a.size,min:a.min,type:a.type,modifiers:a.modifiers,position:a.position};a.removeAttribute("index"),a instanceof LayoutGroup?(r.push(s),s.index=""!==t?t+"."+i:i.toString(),a.setAttribute("index",s.index),a.items&&(n=this._getDataSource(a.items,s.index,0),s.items=n)):a instanceof LayoutItem&&(a.items?(n=this._getDataSource(a.items,t,i),r=r.concat(n)):(s.index=""!==t?t+"."+i:i.toString(),a.setAttribute("index",s.index),r.push(s))),i++}return r}},{key:"_getLayout",value:function(){for(var i=this,t=arguments.length?arguments[0]:i.$.itemsContainer,e=(i._buttons&&i._buttons.remove(),i._dropArea&&i._dropArea.remove(),i.querySelectorAll(".jqx-layout-splitter")),r=0;r<e.length;r++){var o=e[r];o!==i.$.splitter&&o.remove()}t.items=Array.from(t.children),t.items=t.items.filter(function(e){return e!==t.tabs&&e.hasAttribute("data-id")});var n=t.items.map(function(e){if(e.classList.contains("jqx-layout-tab-strip"))return null;var t=e,e=e instanceof LayoutGroup?e:null;return e&&(t.items=i._getLayout(e)),t});if(t!==i.$.itemsContainer)return n.filter(function(e){return null!==e&&e!==t.tabs});var a=[],s=t;return s.items=n.filter(function(e){return null!==e&&e!==t.tabs}),a.push(s),a}},{key:"_updateSplitter",value:function(){for(var e=this,t=(e._buttons&&e._dragDetails&&e._buttons.remove(),e._removeSplitter(),e.querySelectorAll("[data-id]")),i=0;i<t.length;i++){var r=t[i];if("root"!==r.getAttribute("data-id")){if(r.hasAttribute("role")){var o=r.getAttribute("role");if("gridcell"===o||"row"===o||"columnheader"===o||"rowheader"===o)continue}r.setAttribute("hover",""),e._handleSplitter(r)}}}},{key:"_hideSplitter",value:function(){for(var e=this.querySelectorAll("[data-id]"),t=0;t<e.length;t++)e[t].removeAttribute("hover")}},{key:"_removeSplitter",value:function(){for(var e=this.querySelectorAll(".jqx-layout-splitter"),t=0;t<e.length;t++){var i=e[t];i!==this.$.splitter&&i.remove()}this._hideSplitter()}},{key:"_handleItemClick",value:function(e){var t=this,i=t.selectedIndex,r=null;if(!e)return t.selectedIndex=null,t.querySelectorAll("[data-id]").forEach(function(e){e.removeAttribute("selected")}),void(t._selectedItem=null);(r=e instanceof HTMLElement?e:t.querySelector("[data-id="+e.id+"]"))&&r.readonly?t.selectedIndex=null:(t.querySelectorAll("[data-id]").forEach(function(e){e.removeAttribute("selected")}),r?(t.selectedIndex=r.getAttribute("index"),r.setAttribute("selected",""),r.setAttribute("hover",""),(t._selectedItem=r).classList.contains("jqx-hidden")&&t.refresh(),t._handleButtonsVisibility(r),i!==t.selectedIndex&&t.dispatchEvent(new CustomEvent("change")),t._updateSplitter()):t.refresh())}},{key:"_handleButtonClick",value:function(e,t){e=this._addLayoutItem(e,t);this.dispatchEvent(new CustomEvent("stateChange",{type:"insert",item:e})),this._handleItemClick(e,!0)}},{key:"_removeLayoutItem",value:function(e){if("root"!==e.getAttribute("data-id")){if(e instanceof LayoutItem&&1===e.parentElement.items.length){for(var t=e.parentElement,i=t;t&&t.items&&1===t.items.length&&"root"!==t.getAttribute("data-id");)t=(i=t).parentElement;"root"!==i.getAttribute("data-id")?i.remove():this.allowLiveSplit&&i.appendChild(document.createElement("jqx-layout-item"))}else e.remove();this.refresh(),this.dispatchEvent(new CustomEvent("stateChange",{type:"delete",item:e}))}}},{key:"refresh",value:function(){var f=this;if(!f._isUpdating){f.dataSource=f._getDataSource(f._getLayout()),f.$.splitter.className="jqx-visibility-hidden jqx-layout-splitter";for(var e=f.querySelectorAll(".jqx-layout-group"),t=0;t<e.length;t++)!function(t){var e=f.getItem(t.getAttribute("index"));if(e){t.style.gridTemplateColumns="";var i=t.style.gridTemplateRows="",r=0,o=0;if(t instanceof TabLayoutGroup){t.tabs&&t.tabs.remove();var n=document.createElement("div");n.classList.add("jqx-layout-tab-strip"),f._selectedItem&&t.contains(f._selectedItem)&&f._selectedItem instanceof TabLayoutItem&&(t.selectedIndex=Math.max(0,t.items.indexOf(f._selectedItem))),t.selectedIndex>=t.children.length&&(t.selectedIndex=0);for(var a=0;a<t.children.length;a++){var s,l=t.children[a],u=f.getItem(l.getAttribute("index"));u&&((s=document.createElement("div")).classList.add("jqx-layout-tab"),s.innerHTML="<label>"+u.label+'</label><span class="jqx-close-button"></span>',n.appendChild(s),l.setAttribute("tab",""),l.classList.add("jqx-hidden"),s.content=l,s.item=u,s.group=e,l.modifiers&&-1!==l.modifiers.indexOf("close")||s.querySelector(".jqx-close-button").classList.add("jqx-hidden"),void 0!==t.selectedIndex&&a!==t.selectedIndex||(s.classList.add("selected"),l.classList.remove("jqx-hidden"),t.selectedIndex=a),s.onpointerup=function(e){e.target.classList.contains("jqx-close-button")&&s.close&&(t.selectedIndex=0,f._removeLayoutItem(f._selectedItem),f._handleItemClick(parent))},s.onpointerdown=function(e){var t=this.closest(".jqx-layout-group");f._handleItemClick(this.content),s.close=!1,e.target.classList.contains("jqx-close-button")?s.close=!0:u.modifiers&&0<=u.modifiers.indexOf("drag")&&0<=t.modifiers.indexOf("drag")&&f._beginDrag(t,this,e)})}t.tabs=n,"top"===e.position||"left"===e.position?t.insertBefore(n,t.firstChild):t.appendChild(n)}else{for(a=0;a<t.children.length;a++)if((l=t.children[a]).hasAttribute("size")){var d=l.getAttribute("size"),c=parseFloat(d),p="vertical"===t.orientation?t.offsetWidth:t.offsetHeight,d=0<=d.indexOf("%")?parseFloat(d):parseFloat(c/p*100);if(r+=d,++o===t.children.length){if(r<100){i+="1fr ",r=100;continue}100<r&&(d=100-(r-=d),r=100)}else if(100<r||0===d){o=t.children.length,r=0;break}i+=d+"% "}else i+="1fr ";if(o===t.children.length&&(r<99||100<r))for(i="",a=0;a<t.children.length;a++)(l=t.children[a]).removeAttribute("size"),i+="1fr ";"vertical"===t.orientation?t.style.gridTemplateColumns=i:t.style.gridTemplateRows=i}t.items=Array.from(t.children),t.items=t.items.filter(function(e){return e!==t.tabs})}}(e[t])}}},{key:"_beginDrag",value:function(e,t,i){var r=this,o=(r._dragDetails&&r._dragDetails.feedback.remove(),document.createElement("div")),n=document.createElement("div"),a=e.querySelector(".jqx-layout-tab-strip"),s="";if(a)for(var l=0;l<Array.from(a.children).length;l++)l===e.selectedIndex&&(s=a.children[l].innerText);o.innerHTML='<jqx-split-layout><jqx-tab-layout-group><jqx-tab-layout-item label="'.concat(s,'"></jqx-tab-layout-item></jqx-tab-layout-group></jqx-split-layout>'),r._feedback=o,r._feedback.classList.add("jqx-split-layout-feedback","jqx-split-layout","jqx-widget"),n.classList.add("jqx-split-layout-overlay"),r._dragDetails={element:t.content,item:t.item,layoutGroup:t.group,parent:e,overlay:n,feedback:o,pageX:i.pageX,pageY:i.pageY}}},{key:"moveChildren",value:function(e,t){t.innerHTML="";for(var i=e;i.firstChild;){var r=i.firstChild;t.appendChild(r)}}},{key:"createLayoutItem",value:function(e,t){var i,r=this;return"layoutItem"!==e&&e?"tabLayoutItem"!==e&&e?"tabLayoutGroup"===e?(e=t,i=document.createElement("jqx-tab-layout-group"),e="top"===e||"bottom"===e?"horizontal":"vertical",i.setAttribute("orientation",e),i.orientation=e,r.dispatchEvent(new CustomEvent("tabLayoutGroup",{type:"layoutGroup",item:i})),i):(e=t,i=document.createElement("jqx-layout-group"),e="top"===e||"bottom"===e?"horizontal":"vertical",r.dispatchEvent(new CustomEvent("createGroup",{type:"layoutGroup",item:i})),i.setAttribute("orientation",e),i.orientation=e,i):((t=document.createElement("jqx-tab-layout-item")).innerHTML="",r.dispatchEvent(new CustomEvent("createItem",{type:"tabLayoutItem",item:t})),t):((e=document.createElement("jqx-layout-item")).innerHTML="",r.dispatchEvent(new CustomEvent("createItem",{type:"layoutItem",item:e})),e)}},{key:"_addTabLayoutItem",value:function(n,e,t){function i(e){var t;n.removeAttribute("size"),n.querySelector("jqx-layout-group")?l._addLayoutItem(n.querySelector("jqx-layout-group"),e):(o=l.createLayoutItem("layoutGroup",e),t=l.createLayoutItem(),l.moveChildren(n,t),"top"===e||"left"===e?(o.appendChild(l.createLayoutItem()),o.appendChild(t)):(o.appendChild(t),o.appendChild(l.createLayoutItem())),n.appendChild(o))}function r(e,t){var i=n.parentElement,r=n,o=l.createLayoutItem("layoutGroup",t);i.insertBefore(o,r),"top"===t||"left"===t?(o.append(e),o.appendChild(r)):(o.appendChild(r),o.append(e)),"root"===r.getAttribute("data-id")&&(r.setAttribute("data-id",o.getAttribute("data-id")),o.setAttribute("data-id","root"),l.$.itemsContainer=o),c(r),c(i)}var o,a,s,l=this,u=l.createLayoutItem("tabLayoutItem"),d=n.closest("jqx-tab-layout-group"),c=(t&&(u.label=t.label,u.modifiers=t.modifiers,l.moveChildren(t,u)),function(e){for(var t=0;t<e.children.length;t++)e.children[t].removeAttribute("size");e.removeAttribute("size")});if(t)switch(e){case"center":n instanceof TabLayoutGroup||n instanceof TabLayoutItem?d.appendChild(u):((s=l.createLayoutItem("tabLayoutGroup","top")).appendChild(u),n instanceof LayoutGroup&&!(n instanceof TabLayoutItem)?(n.appendChild(s),c(n)):n instanceof LayoutItem&&(o=l.createLayoutItem("layoutGroup"),n.parentElement.insertBefore(o,n),o.appendChild(n),o.appendChild(s),c(o)));break;case"left":case"right":(s=l.createLayoutItem("tabLayoutGroup","top")).appendChild(u),"root"===n.getAttribute("data-id")&&(s.position=e),r(s,e);break;case"top":case"bottom":(s=l.createLayoutItem("tabLayoutGroup","top")).appendChild(u),"root"===n.getAttribute("data-id")&&(s.position=e),r(s,e)}else{switch(e){case"center":n instanceof TabLayoutGroup||n instanceof TabLayoutItem?d.appendChild(u):i();break;case"left":case"right":n instanceof TabLayoutGroup?(a=n.querySelector("jqx-tab-layout-item"))&&"left"===e?n.insertBefore(u,a):n.appendChild(u):n instanceof TabLayoutItem?(s=l.createLayoutItem("tabLayoutGroup","top"),d=n.parentElement,s.appendChild(u),o=l.createLayoutItem("layoutGroup"),d.parentElement.insertBefore(o,d),"right"===e?(o.appendChild(d),o.appendChild(s)):"left"===e&&(o.appendChild(s),o.appendChild(d))):t?((s=l.createLayoutItem("tabLayoutGroup","top")).appendChild(u),n instanceof LayoutGroup?n.insertBefore(n.firstChild,s):n instanceof LayoutItem&&((o=l.createLayoutItem("layoutGroup")).orientation=d.orientation,o.setAttribute("orientation",d.orientation),n.removeAttribute("size"),n.parentElement.insertBefore(o,n),o.appendChild(n),o.appendChild(s))):i(e);break;case"top":case"bottom":n instanceof TabLayoutGroup?(o=l.createLayoutItem("layoutGroup","top"),n.removeAttribute("size"),n.parentElement.insertBefore(o,n),"top"===e?(o.appendChild(l.createLayoutItem()),o.appendChild(n)):(o.appendChild(n),o.appendChild(l.createLayoutItem()))):i(e)}l.refresh()}}},{key:"_addLayoutItem",value:function(e,t,i){var r=this;if(e){function o(e){for(var t=0;t<e.children.length;t++)e.children[t].removeAttribute("size");e.removeAttribute("size")}if(e instanceof TabLayoutItem||e instanceof TabLayoutGroup||i&&i instanceof TabLayoutItem)return r._addTabLayoutItem(e,t,i);var n,a,s=r.createLayoutItem(),l=e.closest(".jqx-layout-group");if(i&&r.moveChildren(i,s),"center"===t){if(e instanceof LayoutGroup)return(a=l).appendChild(s),o(a),r.refresh(),s;if(e instanceof LayoutItem)return(a=r.createLayoutItem("layoutGroup")).orientation=l.orientation,a.setAttribute("orientation",l.orientation),e.removeAttribute("size"),e.parentElement.insertBefore(a,e),a.appendChild(e),a.appendChild(s),r.refresh(),a}return"vertical"===l.orientation&&("left"===t||"right"===t)||"horizontal"===l.orientation&&("top"===t||"bottom"===t)?(a=l,e instanceof LayoutGroup?("left"===t||"top"===t?a.insertBefore(s,a.children[0]):a.appendChild(s),o(e)):(i=a.items,n=Math.max(0,i.indexOf(e)+("top"===t||"left"===t?0:1)),a.insertBefore(s,i[n]),o(a))):e instanceof LayoutGroup?(l=e.parentElement,a=e,i=r.createLayoutItem("layoutGroup",t),l.insertBefore(i,a),"top"===t||"left"===t?(i.append(s),i.appendChild(a)):(i.appendChild(a),i.append(s)),"root"===a.getAttribute("data-id")&&(a.setAttribute("data-id",i.getAttribute("data-id")),i.setAttribute("data-id","root"),r.$.itemsContainer=i),o(l)):(a=r.createLayoutItem("layoutGroup",t),l.insertBefore(a,e),"top"===t||"left"===t?(a.appendChild(s),a.appendChild(e)):(a.appendChild(e),a.appendChild(s)),o(a)),r.refresh(),s}}},{key:"_handleButtonsVisibility",value:function(e){var t=this;if(t._buttons||(t._buttons=document.createElement("div"),t._buttons.classList.add("jqx-layout-buttons-container"),t._buttons.innerHTML='<div role="button" position="top"></div>\n                                       <div role="button" position="bottom"></div>\n                                       <div role="button" position="center"></div>\n                                       <div role="button" position="left"></div>\n                                       <div role="button" position="right"></div>'),!e&&t._buttons.parentElement)t._buttons.parentElement.removeChild(t._buttons);else if(e){for(var i=e._buttonPosition||[],r=t._buttons.children,o=0;o<r.length;o++){var n=r[o];n.position=n.getAttribute("position"),n.item=e,i.length&&i.indexOf(n.getAttribute("position"))<0?n.classList.add("jqx-hidden"):n.classList.remove("jqx-hidden"),n.onmouseenter=function(){n.setAttribute("hover","")},n.onmouseleave=function(){n.removeAttribute("hover")}}t.allowLiveSplit&&t._buttons.parentElement!==e&&e.appendChild(t._buttons)}}},{key:"_handleDropArea",value:function(e){function t(e){switch(e){case"left":r._dropArea.style.top="0px",r._dropArea.style.left="0px",r._dropArea.style.width="50%",r._dropArea.style.height="100%";break;case"right":r._dropArea.style.top="0px",r._dropArea.style.left="calc(100% - ".concat(50,"%)"),r._dropArea.style.width="50%",r._dropArea.style.height="100%";break;case"top":r._dropArea.style.top="0px",r._dropArea.style.left="0px",r._dropArea.style.width="100%",r._dropArea.style.height="50%";break;case"bottom":r._dropArea.style.top="calc(100% - ".concat(50,"%)"),r._dropArea.style.left="0px",r._dropArea.style.width="100%",r._dropArea.style.height="50%";break;case"center":r._dropArea.style.top="0px",r._dropArea.style.left="0px",r._dropArea.style.width="100%",r._dropArea.style.height="100%"}}var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"center",r=this;r._dropArea&&r._dropArea.parentElement===e?t(i):(r._dropArea&&r._dropArea.remove(),r._dragDetails&&e&&(r._dropArea=document.createElement("div"),r._dropArea.classList.add("jqx-layout-drop-area"),e.appendChild(r._dropArea),r._dropArea.style.opacity=1,t(i)))}},{key:"_handleSplitter",value:function(e){var t,i=this;e&&((e=e.hasAttribute("tab")?e.parentElement:e)._splitter&&e._splitter.remove(),e._splitter||(e._splitter=document.createElement("div")),i._dragDetails&&i._dragDetails.dragging?e._splitter.remove():-1!==e.modifiers.indexOf("resize")&&(e.appendChild(e._splitter),(t=e.parentElement)&&(e._splitter.className="jqx-layout-splitter",(e._splitter.item=e)._splitter.removeAttribute("drag"),t=t.orientation,e.nextElementSibling&&e.nextElementSibling.hasAttribute("data-id")?e._splitter.classList.add(t):e.previousElementSibling&&e.previousElementSibling.hasAttribute("data-id")&&(e._splitter.classList.add(t),e._splitter.classList.add("last")),(t=e._splitter).style.top="",t.style.left="",t.style.bottom="",t.style.right="",t.onpointerdown=function(e){var t=e.target.item;t.style.overflow="hidden",i._resizeDetails={splitter:e.target,splitterRect:e.target.getBoundingClientRect(),itemRect:t.getBoundingClientRect(),item:t,itemSize:t.size,group:t.parentElement,clientX:e.clientX,clientY:e.clientY},i._selectedItem!==t&&(i.querySelectorAll("[data-id]").forEach(function(e){e.removeAttribute("selected")}),i.selectedIndex=t.getAttribute("index"),t.setAttribute("selected",""),i._selectedItem=t,i._handleButtonsVisibility(t)),t.previousElementSibling&&t.previousElementSibling.hasAttribute("data-id")?(i._resizeDetails.previousItemRect=t.previousElementSibling.getBoundingClientRect(),i._resizeDetails.previousItem=t.previousElementSibling,i._resizeDetails.previousItemSize=t.previousElementSibling.size,i._resizeDetails.previousItem.style.overflow="hidden"):(i._resizeDetails.previousItemRect=null,i._resizeDetails.previousItem=null),t.nextElementSibling&&t.nextElementSibling.hasAttribute("data-id")?(i._resizeDetails.nextItemRect=t.nextElementSibling.getBoundingClientRect(),i._resizeDetails.nextItem=t.nextElementSibling,i._resizeDetails.nextItemSize=t.nextElementSibling.size,i._resizeDetails.nextItem.style.overflow="hidden"):(i._resizeDetails.nextItemRect=null,i._resizeDetails.nextItem=null)})))}}]),o}());customElements.define("jqx-layout-group",LayoutGroup),customElements.define("jqx-layout-item",LayoutItem),customElements.define("jqx-tab-layout-group",TabLayoutGroup),customElements.define("jqx-tab-layout-item",TabLayoutItem),customElements.define("jqx-split-layout",SplitLayout);