!function(c){c.jqx.jqxWidget("jqxFileUpload","",{}),c.extend(c.jqx._jqxFileUpload.prototype,{defineInstance:function(){var e={width:null,height:"auto",uploadUrl:"",fileInputName:"",autoUpload:!1,multipleFilesUpload:!0,accept:null,browseTemplate:"",uploadTemplate:"",cancelTemplate:"",localization:null,renderFiles:null,disabled:!1,rtl:!1,events:["select","remove","uploadStart","uploadEnd"]};return this===c.jqx._jqxFileUpload.prototype||c.extend(!0,this,e),e},createInstance:function(){var e=this;if(void 0===e.host.jqxButton)throw new Error("jqxFileUpload: Missing reference to jqxbuttons.js");e._createFromInput("jqxFileUpload"),c.jqx.browser.msie?c.jqx.browser.version<11&&(e._ieOldWebkit=!0,c.jqx.browser.version<8&&(e._ie7=!0)):c.jqx.browser.webkit&&(e._ieOldWebkit=!0),e._fluidWidth="string"==typeof e.width&&"%"===e.width.charAt(e.width.length-1),e._fluidHeight="string"==typeof e.height&&"%"===e.height.charAt(e.height.length-1),e._render(!0)},_createFromInput:function(e){var t,o,l=this;"input"==l.element.nodeName.toLowerCase()&&(l.field=l.element,l.field.className&&(l._className=l.field.className),t={title:l.field.title},l.field.id.length?t.id=l.field.id.replace(/[^\w]/g,"_")+"_"+e:t.id=c.jqx.utilities.createId()+"_"+e,(e=c("<div></div>",t))[0].style.cssText=l.field.style.cssText,l.width||(l.width=c(l.field).width()),l.height||(l.height=c(l.field).outerHeight()),c(l.field).hide().after(e),o=l.host.data(),l.host=e,l.host.data(o),l.element=e[0],l.element.id=l.field.id,l.field.id=t.id,l._className&&(l.host.addClass(l._className),c(l.field).removeClass(l._className)),l.field.tabIndex&&(o=l.field.tabIndex,l.field.tabIndex=-1,l.element.tabIndex=o))},_render:function(e){var a=this;a._setSize(),a._addClasses(),!0===e?a._appendElements():a._removeHandlers(),a._addHandlers(),a._ie7&&(a._borderAndPadding("width",a.host),"auto"!==a.height&&a._borderAndPadding("height",a.host)),c.jqx.utilities.resize(a.host,null,!0),c.jqx.utilities.resize(a.host,function(){if(a._fluidWidth){a._ie7&&(a.host.css("width",a.width),a._borderAndPadding("width",a.host));for(var e=0;e<a._fileRows.length;e++){var t=a._fileRows[e],o=t.fileRow;a._ie7&&(o.css("width","100%"),a._borderAndPadding("width",o)),a.renderFiles||a._setMaxWidth(t)}if(a.rtl&&a._ieOldWebkit)for(var l=0;l<a._forms.length;l++){var i=a._browseButton.position();a._forms[l].form.css({left:i.left,top:i.top})}}a._ie7&&a._fluidHeight&&(a.host.css("height",a.height),a._borderAndPadding("height",a.host))})},render:function(){this._render(!1)},refresh:function(e){!0!==e&&this._render(!1)},destroy:function(){var e=this;e.cancelAll(),e._removeHandlers(!0),e.host.remove()},browse:function(){var e;c.jqx.browser.msie&&c.jqx.browser.version<10||(!0===(e=this).multipleFilesUpload||!1===e.multipleFilesUpload&&0===e._fileRows.length)&&e._forms[e._forms.length-1].fileInput.click()},_uploadFile:function(e){var t=this;0===t._uploadQueue.length&&t._uploadQueue.push(e),t.renderFiles||(e.uploadFile.add(e.cancelFile).hide(),e.loadingElement.show()),e.fileInput.attr("name",t.fileInputName),t._raiseEvent("2",{file:e.fileName}),e.form[0].submit(),t._fileObjectToRemove=e},uploadFile:function(e){e=this._fileRows[e];void 0!==e&&this._uploadFile(e)},uploadAll:function(){var e=this;if(0<e._fileRows.length){for(var t=e._fileRows.length-1;0<=t;t--)e._uploadQueue.push(e._fileRows[t]);e._uploadFile(e._fileRows[0])}},cancelFile:function(e){this._removeSingleFileRow(this._fileRows[e])},cancelAll:function(){var e=this;if(0<e._fileRows.length){for(var t=0;t<e._fileRows.length;t++)e._removeFileRow(e._fileRows[t]);setTimeout(function(){e._browseButton.css("margin-bottom",0)},400),e._fileRows.length=0,e._hideButtons(!0)}},propertyChangedHandler:function(e,t,o,l){var i=e.element.id;if("localization"===t)return!l.browseButton||o&&l.browseButton===o.browseButton||(e._browseButton.text(l.browseButton),e._browseButton.jqxButton({width:"auto"})),!l.uploadButton||o&&l.uploadButton===o.uploadButton||(e._uploadButton.text(l.uploadButton),e._uploadButton.jqxButton({width:"auto"})),!l.cancelButton||o&&l.cancelButton===o.cancelButton||(e._cancelButton.text(l.cancelButton),e._cancelButton.jqxButton({width:"auto"})),void(e.renderFiles||(!l.uploadFileTooltip||o&&l.uploadFileTooltip===o.uploadFileTooltip||c("#"+i+" .jqx-file-upload-file-upload").attr("title",l.uploadFileTooltip),!l.uploadFileTooltip||o&&l.cancelFileTooltip===o.cancelFileTooltip||c("#"+i+" .jqx-file-upload-file-cancel").attr("title",l.cancelFileTooltip)));if(l!==o)switch(t){case"width":if(e.host.css("width",l),e._ie7){e._borderAndPadding("width",e.host);for(var a=0;a<e._fileRows.length;a++){var d=e._fileRows[a].fileRow;d.css("width","100%"),e._borderAndPadding("width",d)}}return void(e._fluidWidth="string"==typeof l&&"%"===l.charAt(l.length-1));case"height":return e.host.css("height",l),e._ie7&&e._borderAndPadding("height",e.host),void(e._fluidHeight="string"==typeof l&&"%"===l.charAt(l-1));case"uploadUrl":for(var n=0;n<e._forms.length;n++)e._forms[n].form.attr("action",l);return;case"accept":for(var r=0;r<e._forms.length;r++)e._forms[r].fileInput.attr("accept",l);return;case"theme":return c.jqx.utilities.setTheme(o,l,e.host),e._browseButton.jqxButton({theme:l}),e._uploadButton.jqxButton({theme:l}),void e._cancelButton.jqxButton({theme:l});case"browseTemplate":return void e._browseButton.jqxButton({template:l});case"uploadTemplate":return void e._uploadButton.jqxButton({template:l});case"cancelTemplate":return void e._cancelButton.jqxButton({template:l});case"disabled":return e._browseButton.jqxButton({disabled:l}),e._uploadButton.jqxButton({disabled:l}),e._cancelButton.jqxButton({disabled:l}),void(!0===l?e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")):e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")));case"rtl":var s=l?"addClass":"removeClass";e._browseButton[s](e.toThemeProperty("jqx-file-upload-button-browse-rtl")),e._cancelButton[s](e.toThemeProperty("jqx-file-upload-button-cancel-rtl")),e._uploadButton[s](e.toThemeProperty("jqx-file-upload-button-upload-rtl")),c.jqx.browser.msie&&8<c.jqx.browser.version&&e._uploadButton[s](e.toThemeProperty("jqx-file-upload-button-upload-rtl-ie"));for(var u=0;u<e._fileRows.length;u++){var p=e._fileRows[u];p.fileNameContainer[s](e.toThemeProperty("jqx-file-upload-file-name-rtl")),p.cancelFile[s](e.toThemeProperty("jqx-file-upload-file-cancel-rtl")),p.uploadFile[s](e.toThemeProperty("jqx-file-upload-file-upload-rtl")),p.loadingElement[s](e.toThemeProperty("jqx-file-upload-loading-element-rtl"))}return}},_raiseEvent:function(e,t){e=this.events[e],(t=void 0===t?{owner:null}:t).owner=this,e=new c.Event(e);return e.owner=this,e.args=t,e.preventDefault&&e.preventDefault(),this.host.trigger(e)},_setSize:function(){var e=this;e.host.css("width",e.width),e.host.css("height",e.height)},_borderAndPadding:function(e,t){var o="width"===e?parseInt(t.css("border-left-width"),10)+parseInt(t.css("border-right-width"),10)+parseInt(t.css("padding-left"),10)+parseInt(t.css("padding-right"),10):parseInt(t.css("border-top-width"),10)+parseInt(t.css("border-bottom-width"),10)+parseInt(t.css("padding-top"),10)+parseInt(t.css("padding-bottom"),10);t.css(e,t[e]()-o)},_addClasses:function(){var e=this;e.host.addClass(e.toThemeProperty("jqx-widget jqx-widget-content jqx-rc-all jqx-file-upload")),!0===e.disabled&&e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled"))},_appendElements:function(){var e=this,t="Browse",o=90,l="Upload All",i=90,a="Cancel All",d=90,n=e.element.id;e.localization&&(e.localization.browseButton&&(t=e.localization.browseButton,o="auto"),e.localization.uploadButton&&(l=e.localization.uploadButton,i="auto"),e.localization.cancelButton&&(a=e.localization.cancelButton,d="auto")),e._browseButton=c('<button id="'+n+'BrowseButton" class="'+e.toThemeProperty("jqx-file-upload-button-browse")+'">'+t+"</button>"),e.host.append(e._browseButton),e._browseButton.jqxButton({theme:e.theme,width:o,template:e.browseTemplate,disabled:e.disabled}),e._browseButton.after('<div style="clear: both;"></div>'),e._bottomButtonsContainer=c('<div class="'+e.toThemeProperty("jqx-file-upload-buttons-container")+'"></div>'),e.host.append(e._bottomButtonsContainer),e._uploadButton=c('<button id="'+n+'UploadButton" class="'+e.toThemeProperty("jqx-file-upload-button-upload")+'">'+l+"</button>"),e._bottomButtonsContainer.append(e._uploadButton),e._uploadButton.jqxButton({theme:e.theme,width:i,template:e.uploadTemplate,disabled:e.disabled}),e._cancelButton=c('<button id="'+n+'CancelButton" class="'+e.toThemeProperty("jqx-file-upload-button-cancel")+'">'+a+"</button>"),e._bottomButtonsContainer.append(e._cancelButton),e._cancelButton.jqxButton({theme:e.theme,width:d,template:e.cancelTemplate,disabled:e.disabled}),e._bottomButtonsContainer.after('<div style="clear: both;"></div>'),e.rtl&&(e._browseButton.addClass(e.toThemeProperty("jqx-file-upload-button-browse-rtl")),e._cancelButton.addClass(e.toThemeProperty("jqx-file-upload-button-cancel-rtl")),e._uploadButton.addClass(e.toThemeProperty("jqx-file-upload-button-upload-rtl")),c.jqx.browser.msie&&8<c.jqx.browser.version&&e._uploadButton.addClass(e.toThemeProperty("jqx-file-upload-button-upload-rtl-ie"))),e._uploadIframe=c('<iframe name="'+n+'Iframe" class="'+e.toThemeProperty("jqx-file-upload-iframe")+'" src=""></iframe>'),e.host.append(e._uploadIframe),e._iframeInitialized=!1,e._uploadQueue=[],e._forms=[],e._addFormAndFileInput(),e._fileRows=[]},_addFormAndFileInput:function(){var e,t,o,l,i=this,a=i.element.id,d=c('<form class="'+i.toThemeProperty("jqx-file-upload-form")+'" action="'+i.uploadUrl+'" target="'+a+'Iframe" method="post" enctype="multipart/form-data"></form>'),n=(i.host.append(d),c('<input type="file" class="'+i.toThemeProperty("jqx-file-upload-file-input")+'" />'));i.accept&&n.attr("accept",i.accept),d.append(n),i._ieOldWebkit&&(e=i._browseButton.position(),t=i._browseButton.outerWidth(),o=i._browseButton.outerHeight(),l=i.rtl&&i._ie7?12:0,d.css({left:e.left-l,top:e.top,width:t,height:o}),d.addClass(i.toThemeProperty("jqx-file-upload-form-ie9")),n.addClass(i.toThemeProperty("jqx-file-upload-file-input-ie9")),i.addHandler(d,"mouseenter.jqxFileUpload"+a,function(){i._browseButton.addClass(i.toThemeProperty("jqx-fill-state-hover"))}),i.addHandler(d,"mouseleave.jqxFileUpload"+a,function(){i._browseButton.removeClass(i.toThemeProperty("jqx-fill-state-hover"))}),i.addHandler(d,"mousedown.jqxFileUpload"+a,function(){i._browseButton.addClass(i.toThemeProperty("jqx-fill-state-pressed"))}),i.addHandler(c(document),"mouseup.jqxFileUpload"+a,function(){i._browseButton.hasClass("jqx-fill-state-pressed")&&i._browseButton.removeClass(i.toThemeProperty("jqx-fill-state-pressed"))})),i.addHandler(n,"change.jqxFileUpload"+a,function(){var e=-1!==(e=this.value).indexOf("fakepath")?e.slice(12):e.slice(e.lastIndexOf("\\")+1),t=c.jqx.browser.msie&&c.jqx.browser.version<10?"IE9 and earlier do not support getting the file size.":this.files[0].size,e=i._addFileRow(e,d,n,t);1===i._fileRows.length&&(i._browseButton.css("margin-bottom","10px"),i._hideButtons(!1)),i._ieOldWebkit&&(i.removeHandler(d,"mouseenter.jqxFileUpload"+a),i.removeHandler(d,"mouseleave.jqxFileUpload"+a),i.removeHandler(d,"mousedown.jqxFileUpload"+a)),i._addFormAndFileInput(),i.removeHandler(n,"change.jqxFileUpload"+a),!0===i.autoUpload&&i._uploadFile(e)}),!0===i._ieOldWebkit&&i.addHandler(n,"click.jqxFileUpload"+a,function(e){!1===i.multipleFilesUpload&&0<i._fileRows.length&&e.preventDefault()}),i._forms.push({form:d,fileInput:n})},_addFileRow:function(e,t,o,l){var i,a,d,n,r=this,s="Cancel",u="Upload File",p=c('<div class="'+r.toThemeProperty("jqx-widget-content jqx-rc-all jqx-file-upload-file-row")+'"></div>'),s=((0===r._fileRows.length?r._browseButton:r._fileRows[r._fileRows.length-1].fileRow).after(p),r.renderFiles?p.html(r.renderFiles(e)):(i=c('<div class="'+r.toThemeProperty("jqx-widget-header jqx-rc-all jqx-file-upload-file-name")+'">'+e+"</div>"),p.append(i),r.localization&&(r.localization.cancelFileTooltip&&(s=r.localization.cancelFileTooltip),r.localization.uploadFileTooltip&&(u=r.localization.uploadFileTooltip)),d=c('<div class="'+r.toThemeProperty("jqx-widget-header jqx-rc-all jqx-file-upload-file-cancel")+'" title="'+s+'"><div class="'+r.toThemeProperty("jqx-icon-close jqx-file-upload-icon")+'"></div></div>'),p.append(d),n=c('<div class="'+r.toThemeProperty("jqx-widget-header jqx-rc-all jqx-file-upload-file-upload")+'" title="'+u+'"><div class="'+r.toThemeProperty("jqx-icon-arrow-up jqx-file-upload-icon jqx-file-upload-icon-upload")+'"></div></div>'),p.append(n),a=c('<div class="'+r.toThemeProperty("jqx-file-upload-loading-element")+'"></div>'),p.append(a),r.rtl&&(i.addClass(r.toThemeProperty("jqx-file-upload-file-name-rtl")),d.addClass(r.toThemeProperty("jqx-file-upload-file-cancel-rtl")),n.addClass(r.toThemeProperty("jqx-file-upload-file-upload-rtl")),a.addClass(r.toThemeProperty("jqx-file-upload-loading-element-rtl"))),r._setMaxWidth({fileNameContainer:i,uploadFile:n,cancelFile:d})),r._ie7&&(r._borderAndPadding("width",p),r._borderAndPadding("height",p),r.renderFiles||(r._borderAndPadding("height",i),r._borderAndPadding("height",n),r._borderAndPadding("height",d))),{fileRow:p,fileNameContainer:i,fileName:e,uploadFile:n,cancelFile:d,loadingElement:a,form:t,fileInput:o,index:r._fileRows.length});return r._addFileHandlers(s),r._fileRows.push(s),r._raiseEvent("0",{file:e,size:l}),s},_setMaxWidth:function(e){var t=e.cancelFile.outerWidth(!0)+e.uploadFile.outerWidth(!0),o=this._ie7?6:0,t=this.host.width()-parseInt(this.host.css("padding-left"),10)-parseInt(this.host.css("padding-right"),10)-t-o-7;e.fileNameContainer.css("max-width",t)},_addFileHandlers:function(e){var t,o=this;o.renderFiles||(t=o.element.id,o.addHandler(e.uploadFile,"mouseenter.jqxFileUpload"+t,function(){!1===o.disabled&&e.uploadFile.addClass(o.toThemeProperty("jqx-fill-state-hover"))}),o.addHandler(e.uploadFile,"mouseleave.jqxFileUpload"+t,function(){!1===o.disabled&&e.uploadFile.removeClass(o.toThemeProperty("jqx-fill-state-hover"))}),o.addHandler(e.uploadFile,"click.jqxFileUpload"+t,function(){!1===o.disabled&&o._uploadFile(e)}),o.addHandler(e.cancelFile,"mouseenter.jqxFileUpload"+t,function(){!1===o.disabled&&e.cancelFile.addClass(o.toThemeProperty("jqx-fill-state-hover"))}),o.addHandler(e.cancelFile,"mouseleave.jqxFileUpload"+t,function(){!1===o.disabled&&e.cancelFile.removeClass(o.toThemeProperty("jqx-fill-state-hover"))}),o.addHandler(e.cancelFile,"click.jqxFileUpload"+t,function(){!1===o.disabled&&o._removeSingleFileRow(e)}))},_removeSingleFileRow:function(e){var t=this;if(t._removeFileRow(e),t._fileRows.splice(e.index,1),0===t._fileRows.length)setTimeout(function(){t._browseButton.css("margin-bottom",0)},400),t._hideButtons(!0);else for(var o=0;o<t._fileRows.length;o++)t._fileRows[o].index=o},_removeFileRow:function(e){var t=this,o=t.element.id;t.renderFiles||(t.removeHandler(e.uploadFile,"mouseenter.jqxFileUpload"+o),t.removeHandler(e.uploadFile,"mouseleave.jqxFileUpload"+o),t.removeHandler(e.uploadFile,"click.jqxFileUpload"+o),t.removeHandler(e.cancelFile,"mouseenter.jqxFileUpload"+o),t.removeHandler(e.cancelFile,"mouseleave.jqxFileUpload"+o),t.removeHandler(e.cancelFile,"click.jqxFileUpload"+o)),e.fileRow.fadeOut(function(){e.fileRow.remove(),e.form.remove()}),t._raiseEvent("1",{file:e.fileName})},_hideButtons:function(e){!0===e?this._bottomButtonsContainer.fadeOut():this._bottomButtonsContainer.fadeIn()},_addHandlers:function(){var t=this,e=t.element.id;t._ieOldWebkit||t.addHandler(t._browseButton,"click.jqxFileUpload"+e,function(){t.browse()}),t.addHandler(t._uploadButton,"click.jqxFileUpload"+e,function(){t.uploadAll()}),t.addHandler(t._cancelButton,"click.jqxFileUpload"+e,function(){t.cancelAll()}),t.addHandler(t._uploadIframe,"load.jqxFileUpload"+e,function(){var e;(c.jqx.browser.chrome||c.jqx.browser.webkit)&&(t._iframeInitialized=!0),!1===t._iframeInitialized?t._iframeInitialized=!0:(e=t._uploadIframe.contents().find("body").html(),0<t._uploadQueue.length&&t._raiseEvent("3",{file:t._uploadQueue[t._uploadQueue.length-1].fileName,response:e}),t._fileObjectToRemove&&(t._removeSingleFileRow(t._fileObjectToRemove),t._fileObjectToRemove=null),t._uploadQueue.pop(),0<t._uploadQueue.length&&t._uploadFile(t._uploadQueue[t._uploadQueue.length-1]))})},_removeHandlers:function(e){var t=this,o=t.element.id;t.removeHandler(t._browseButton,"click.jqxFileUpload"+o),t.removeHandler(t._uploadButton,"click.jqxFileUpload"+o),t.removeHandler(t._cancelButton,"click.jqxFileUpload"+o),t.removeHandler(t._uploadIframe,"load.jqxFileUpload"+o),!0===e&&(e=t._forms[t._forms.length-1],t.removeHandler(e.fileInput,"change.jqxFileUpload"+o),t._ieOldWebkit&&(t.removeHandler(e.form,"mouseenter.jqxFileUpload"+o),t.removeHandler(e.form,"mouseleave.jqxFileUpload"+o),t.removeHandler(e.form,"mousedown.jqxFileUpload"+o),t.removeHandler(c("body"),"mouseup.jqxFileUpload"+o)))}})}(jqxBaseFramework);