!function(e){class t{constructor(e){e=e||{};const t=Object.assign(this,e);t.key=(65536*(1+Math.random())|0).toString(16).substring(1),t.boundSource=[],t.dataItemById=[],void 0===t.allowAdd&&(t.allowAdd=!0),void 0===t.allowRemove&&(t.allowRemove=!0),void 0===t.allowUpdate&&(t.allowUpdate=!0),void 0===e.observable&&(t.observable=!0),e.dataSource||(t.dataSource=[]),e.dataFields||(t.dataFields=[]),e.dataSourceType||(t.dataSourceType="array"),e.id||(t.id=null),e.autoFetch||(t.autoFetch=!0),e.dataFields&&(t.dataFields=e.dataFields),Object.defineProperty(t,"groupBy",{configurable:!1,enumerable:!0,get(){return t._groupBy||[]},set(e){t._groupBy=[].concat(e),t.isInitialized&&(t.boundHierarchy=null,t.refreshHierarchy(),t.onGroup&&t.onGroup())}}),e.groupBy?e.groupBy.toArray?t.groupBy=e.groupBy.toArray():t.groupBy=e.groupBy:t.groupBy=[],e&&!1!==e.autoBind&&t.dataBind(),t.isInitialized=!0}get dataFields(){return this._dataFields}set dataFields(e){var t=this;return t._dataFields=t._getDataFieldObjects(e),t._dataFields}_getDataFieldObjects(a){let n=[];if("number"==typeof a){var i="A".charCodeAt(0);let t="",r=0;for(let e=0;e<a;e++){var o=String.fromCharCode(i+r),o=(r++,t+o);n.push({name:o,dataType:"string"}),26<=r&&(r=0,t+="A")}}else if(0<a.length)for(let e=0;e<a.length;e++){const l=a[e];if("string"==typeof l){const d=l.split(":");var t=d[0].trim(),r=1<d.length?d[1].trim():"string";n.push({name:t,dataType:r})}else n.push(l)}return n}get dataSource(){var e=this;return e._dataSource||(e._dataSource=[]),e._dataSource}set dataSource(e){var t=this;t._dataSource=e,t.isInitialized&&(t.boundSource=!1===t.observable?[]:new JQX.ObservableArray,t.dataItemById=[],t.bindingCompleted=!1,t.dataBind())}get canNotify(){var e=this;return void 0===e._canNotify&&(e._canNotify=!0),e._canNotify}set canNotify(e){this._canNotify=e}_notify(e){var t=this;t.canNotify&&t.notifyFn&&t.notifyFn(e)}notify(e){e&&(this.notifyFn=e)}toArray(){return this.boundSource.toArray()}dataBind(){const c=this,e=(c.clear(),()=>{c._onBindingComplete()});"string"==typeof c.dataSource&&0<=c.dataSource.indexOf(".json")?(c.url=c.dataSource,c.dataSourceType="json",new r(c,e=>{c.dataSource=e,c._bindToJSON()})):"string"==typeof c.dataSource&&0<=c.dataSource.indexOf(".xlsx")?(c.url=c.dataSource,c.dataSourceType="xlsx",new r(c,t=>{if(!t[0])return t=[],c._bindToArray(),void e();var r=Object.keys(t[0]);const a={},n=[];if(!1!==c.exportHeader){let e=0;for(var i in r){i=r[i];a[i]=c.dataFields[e++].name}for(let e=1;e<t.length;e++){var o,l=t[e];const u={};for(o in r){var d=r[o];u[a[d]]=l[d]}n.push(u)}c.dataSource=n}c._bindToArray(),e()})):"string"==typeof c.dataSource&&0<=c.dataSource.indexOf(".csv")?(c.dataSourceType="csv",new r(c,()=>{c._bindToArray()})):"string"==typeof c.dataSource&&0<=c.dataSource.indexOf(".tsv")?(c.dataSourceType="tsv",new r(c,()=>{})):"array"===c.dataSourceType?(c._bindToArray(),e()):"json"===c.dataSourceType&&(c._bindToJSON(),e())}_onBindingComplete(){var e=this;e._buildHierarchy(),e.onBindingComplete&&e.onBindingComplete({data:e.boundSource}),e._notify&&e._notify({action:"bindingComplete",data:e.boundSource}),e.bindingCompleted=!0}refreshHierarchy(){this._buildHierarchy()}find(){return this.boundSource.find.apply(this.boundSource,arguments)}onVirtualDataSourceRequested(t,r){const i=this;let o=r?r.first:1/0,l=r?r.last:1/0,d=r?r.row:null;if(void 0===o&&(o=1/0),void 0===l&&(l=1/0),i.virtualFirstIndex=o,i.virtualLastIndex=l,i.virtualDataSource){function a(e){void 0!==e.virtualDataSourceLength&&(i.virtualDataSourceLength=e.virtualDataSourceLength),new JQX.ExcelAdapter({dataSource:e.dataSource,dataFields:e.dataFields||i.dataFields,data:r,onBindingComplete(a){if(i.virtualDataSourceOnExpand&&d)return a.data&&0<a.data.length?i.add(a.data,d.$.id):d.leaf=!0,i.onFilter&&i.onFilter(),void t();if(o===1/0)i.add(a.data);else{let t=[],r=[];for(let e=0;e<a.data.length;e++){var n=a.data[e];o+e<=l&&(t.push(n),r.push(o+e))}i.update(r,t)}i.onFilter&&i.onFilter(),t()}})}let e=!1;var n=e=>0===Object.entries(e).length&&(e.constructor===Object||e.constructor===Array),n=n(r.sorting)&&n(r.filtering)&&n(r.grouping)&&!r.row&&"filter"!==r.action&&"sort"!==r.action&&"group"!==r.action;if(i.virtualDataSourceCache&&o!==1/0&&n){let t=0;for(let e=o;e<l;e++)i[e].$.isEmpty||t++;t===l-o&&(e=!0)}e?t():"expand"===r.action?i.virtualDataSourceOnExpand(a,{first:o,last:l,row:r.row,sorting:r.sorting,filtering:r.filtering,grouping:r.grouping,action:r.action}):i.virtualDataSource(a,{first:o,last:l,sorting:r.sorting,filtering:r.filtering,filterOperator:r.filterOperator||"and",grouping:r.grouping,action:r.action})}else t()}add(a,n){const i=this;if(a){let r=!0;function o(e){const t=i._getDataItem(e,i.boundSource.length);i[i.boundSource.length]=t,i.dataItemById[t.$.id]=t;e=i.boundSource.push(t);return void 0!==n&&(t.$.parentId=n),e||(r=!1),t}if(a.length){let t=[];for(let e=0;e<a.length;e++){var l=o(a[e]);t.push(l)}i._notify({action:"add",data:t})}else{var e=o(a);i._notify({action:"add",data:e})}return i.refreshHierarchy(),r}}refreshIndexes(){var t=this;for(let e=0;e<t.boundSource.length;e++)t[e]=t.boundSource[e],t[e].$.index=e,t.dataItemById[t[e].$.id]=t[e];let e=t.boundSource.length;for(;t[e];)delete t[e],e++}removeLast(){var e=this,t=(delete e[e.boundSource.length-1],e.boundSource.pop());return delete e.dataItemById[t.$.id],e._notify({action:"removeLast",data:t}),e.refreshHierarchy(),t}removeAt(e){var t=this,r=t.boundSource[e];if(!r)throw new Error("Invalid Item Index");t.boundSource.splice(e,1),delete t.dataItemById[r.$.id],t.refreshIndexes(),t._notify({action:"remove",index:e,data:r}),t.refreshHierarchy()}update(r,a){var n=this;if(!JQX.Utilities.Types.isArray(r)||!JQX.Utilities.Types.isArray(a)||0!==r.length||0!==a.length){if(a.length&&r.length){let t=[];for(let e=0;e<r.length;e++){const o=n._getDataItem(a[e],r[e]);var i=r[e];t.push(o),n.boundSource[i]=o,n[i]=n.boundSource[i],n.dataItemById[o.$.id]=n[i]}return n._notify({action:"update",index:r,data:t}),void n.refreshHierarchy()}const o=n._getDataItem(a,r);return n.boundSource[r]=o,n[r]=n.boundSource[r],n.dataItemById[o.$.id]=n[r],n._notify({action:"update",index:r,data:o}),n.refreshHierarchy(),o}n.refreshHierarchy()}insert(e,t){var r=this,a=(t=r._getDataItem(t,e),r.boundSource.splice(e,0,t));return r.refreshIndexes(),r._notify({action:"insert",index:e,data:t}),r.refreshHierarchy(),a}move(e,t){var r,a;e<t&&t-e==1||e===t||(a=(r=this).boundSource.splice(e,1)[0],e<t?r.boundSource.splice(--t,0,a):r.boundSource.splice(t,0,a),r.refreshIndexes(),r._notify({action:"move",index:t,data:r.boundSource[t]}),r.refreshHierarchy())}indexOf(e){return this.boundSource.indexOf(e)}get length(){var e=this;return void 0!==e.virtualDataSourceLength?e.virtualDataSourceLength:e.dataSourceLength||("number"==typeof e.dataSource?e.dataSource:(!e.bindingCompleted&&e.dataSource&&"string"!=typeof e.dataSource&&e.dataSource.length?e.dataSource:e.boundSource).length)}clear(){var t=this;if(!t.isInitialized)return t._cachedValues=[],void(t.dataItemById=[]);for(let e=0;e<t.boundSource.length;e++)delete t[e];t._cachedValues=[],t.boundSource=t.observable?new JQX.ObservableArray:[],t.dataItemById=[],t.refreshHierarchy()}_getId(t,r,a){if(null===t||void 0===t.name||!t.name||!r.getAttribute){if(t&&0<t.toString().length&&r.getAttribute){let e=r.getAttribute(t);if(null!==e&&0<e.toString().length)return e.trim().split(" ").join("").replace(/([ #;?%&,.+*~\':'!^$[\]()=>|\/@])/g,"");var n=t.split(this.mapChar);if(1<n.length){let t=r;for(let e=0;e<n.length;e++)void 0!==t&&(t=t[n[e]]);if(void 0!==t)return t}else if(void 0!==r[t])return r[t]}return a}{let e=r.getAttribute(t.name);if(null!==e&&0<e.toString().length)return e;if(t.map)try{let e=r.getAttribute(t.map);if(null!==e&&0<e.toString().length)return e}catch(e){return a}}}_buildHierarchy(){const n=this;if(n.reservedNames){const i=n.reservedNames;i.leaf||(i.leaf="leaf"),i.parent||(i.parent="parent"),i.expanded||(i.expanded="expanded"),i.checked||(i.checked="checked"),i.selected||(i.selected="selected"),i.level||(i.level="level"),i.data||(i.data="data")}else n.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};const i=n.reservedNames;if(n.childrenDataField){const r=[];for(let e=0;e<n.boundSource.length;e++){const a=Object.assign({},n.boundSource[e]);if(a){r.push(a);const o=function(e){var r=n.childrenDataField.split(n.mapChar);let a=null;if(1<r.length){let t=e;for(let e=0;e<r.length;e++)void 0!==t&&(t=t[r[e]]);a=t}else a=e.children;e.children=a,(null===e.children||void 0===e.children||e.children&&0===e.children.length)&&(e[i.leaf]=!0)},l=(o(a),a[i.level]=0,a.$||(a.$={}),a[i.parent]=null,void 0===(a[i.data]=a)[i.expanded]&&(a[i.expanded]=!1),function(r,a){if(a)for(let t=0;t<a.length;t++){let e=n._getDataItem(a[t],t);e&&(o(e),e[i.level]=r[i.level]+1,e[i.parent]=r,e[i.data]=e,r&&(r.children[t]=e),void 0===e[i.expanded]&&(e[i.expanded]=!1),l(e,e.children))}else r.children=new Array});l(a,a.children)}}if(n.boundHierarchy=r,!n._boundSourceUpdate){for(let e=0;e<n.boundHierarchy.length;e++){var t=n.boundHierarchy[e];if(t.children){const d=function(t){if(n.dataItemById[t.$.id]||(n.boundSource.canNotify=!1,n.dataItemById[t.$.id]=t,n[n.boundSource.length]=t,n.boundSource.push(t),n.boundSource.canNotify=!0),t.children)for(let e=0;e<t.children.length;e++){var r=t.children[e];r.children&&d(r)}};d(t)}}n._boundSourceUpdate=!0}}n.xmlRoot&&"xml"===n.dataSourceType&&(n.boundHierarchy=this._getHierarchy("uid","_parentuid","children",null,n.boundSource)),n.keyDataField&&n.parentDataField&&(n.boundHierarchy=this._getHierarchy(n.keyDataField,n.parentDataField,"children",null,n.boundSource)),n.groupBy&&0<n.groupBy.length&&(n.boundHierarchy=this._getGroupHierarchy(n.groupBy,"children","label",null,"data",null,"parent",n.boundSource)),n.virtualDataSourceOnExpand&&(n.boundHierarchy=this._getHierarchy("id","parentId","children",null,n.boundSource))}_getGroupHierarchy(o,l,d,u,c,s,f,h,p){function g(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}p=p||0;var v=this.reservedNames;let y=new Array;for(let e=0;e<o.length;e++)y[e]=g();l=l||"children",d=d||"group",c=c||"item",f=f||"parent",void 0===s&&(s="value");const m=new Array,b=new Array;let S=0;for(let e=0;e<h.length;e++){let t=Object.assign({},function(e){let t=e;if(u)for(var r in u){r=u[r];r.name&&r.map&&(t[r.map]=t[r.name])}return t}(h[e])),r=(t[v.leaf]=!1,new Array),a=0;for(let e=0;e<o.length;e++){var F=o[e],x=t[F];null!==x&&(r[a++]={value:x,group:F,hash:y[e]})}if(r.length!==o.length)break;let n=null,i="";for(let e=0;e<r.length;e++){var _=r[e].value,T=r[e].group,A=r[e].hash;if(i=i+"_"+A+"_"+_,void 0!==b[i]&&null!==b[i])n=b[i];else{if(null===n){(n={$:{}})[v.level]=0,n[v.leaf]=!1,n[f]=null,n[d]=_,n[c]=t,n.groupDataField=T,n[T]||(n[T]=n.data[T]),void 0!==t[v.expanded]?n[v.expanded]=t[v.expanded]:n[v.expanded]=!1,s&&(n[s]=t[s]),n[l]=new Array;let e=m.length+p;this.id&&"number"!=typeof t.$.id&&!isFinite(t.$.id)||(e="Item"+e),void 0===n.$.id&&(n.$.id=e),m[S++]=n}else{const w={$:{}};w[v.level]=n[v.level]+1,w[f]=n,w[d]=_,w[l]=new Array,w[c]=t,w.groupDataField=T,w[v.leaf]=!1,w[T]||(w[T]=w.data[T]),void 0!==t[v.expanded]?w[v.expanded]=t[v.expanded]:w[v.expanded]=!1,s&&(w[s]=t[s]),void 0===w.$.id&&(w.$.id=n.$.id+"_"+n[l].length),n[l][n[l].length]=w,n=w}b[i]=n}}t&&(t[v.leaf]=!0),null!==n?(null===this.id?void 0===t.$.id&&(t.$.id=n.$.id+"_"+n[l].length):void 0===t.$.id&&-1===t.$.id.toString().indexOf(n.$.id)&&(t.$.id=n.$.id+"_"+t.$.id),t[f]=n,t[v.level]=n[v.level]+1,n[l][n[l].length]=t):void 0===t.$.id&&(t.$.id=g())}return m}_getHierarchy(n,i,e,a,t){const o=this,l=new Array;let r=this.boundSource;if(t&&(r=t),0===this.boundSource.length)return null;const d=null!==e?e:"children";let u=new Array;var c=r,s=c.length;let f=o.reservedNames;function h(e){let t=e;if(a)for(var r in a){r=a[r];r.name&&r.map&&(t[r.map]=t[r.name])}return t}for(let a=0;a<s;a++){let e=c[a],t=e[i],r=e[n];"parentId"===i&&(t=e.$.parentId),"id"===n&&(r=e.$.id),e[d]=new Array,u[r]={parentId:t,item:e}}for(let e=0;e<s;e++){var p=c[e];let r=p[i],a=p[n];if("parentId"===i&&(r=p.$.parentId),"id"===n&&(a=p.$.id),void 0!==u[r]){let e={parentId:r,item:u[a].item},t=u[r].item;t[d]||(t[d]=new Array);var p=t[d].length,g=(e=e.item,f?void 0===e[f.parent]&&(e[f.parent]=t):void 0===e.parent&&(e.parent=t),h(e));t[d][p]=g,u[r].item=t,u[a].item=e}else{let e=u[a].item;f?void 0===e[f.parent]&&(e[f.parent]=null):void 0===e.parent&&(e.parent=null);const v=h(e);f?v[f.level]=0:v.level=0,l[l.length]=v}}if(0!==l.length){let i=function(t,r){for(let e=0;e<r.length;e++){const n=r[e];f?n[f.level]=t:n.level=t;var a=n[d];a&&0<a.length?i(t+1,a):o.virtualDataSourceOnExpand?void 0===n.leaf&&(n.leaf=!1):f?n[f.leaf]=!0:n.leaf=!0}};i(0,l)}return l}summarize(t,l){Array.isArray(t)||(t=[t]);let r=[];for(let e=0;e<t.length;e++){var a,n=t[e];for(a in n){var i=n[a];r.push({dataField:a,functions:i})}}t=r;let d={},o=new Array,u=(l=l||this.boundSource).length;if(0!==u&&void 0!==u){for(let r=0;r<u;r++){let n=l[r];for(let e=0;e<t.length;e++){const f=t[e];let a=n[f.dataField];if(f.functions){d[f.dataField]=d[f.dataField]||{},o[f.dataField]=o[f.dataField]||0,o[f.dataField]++;const h=function(t){for(var r in t){let e=d[f.dataField][r];null!==e&&void 0!==e||(d[f.dataField][r]=0,e=0),"function"==typeof t[r]&&(e=t[r](e,a,f.dataField,n)),d[f.dataField][r]=e}};let e=parseFloat(a);e=!isNaN(e),"number"==typeof(a=e?parseFloat(a):a)&&isFinite(a)?f.functions.forEach(function(e){let t=d[f.dataField][e];if(null!==t&&void 0!==t||(t="median"===e?[]:"max"===e?-9999999999999:"min"===e?9999999999999:0),"sum"===e||"avg"===e||"stdev"===e||"stdevp"===e||"var"===e||"varp"===e)t+=parseFloat(a);else if("product"===e)0===r?t=parseFloat(a):t*=parseFloat(a);else if("min"===e)t=Math.min(t,parseFloat(a));else if("max"===e)t=Math.max(t,parseFloat(a));else if("count"===e)t++;else if("median"===e)t.push(parseFloat(a));else if("object"==typeof e)return void h(e);d[f.dataField][e]=t}):f.functions.forEach(function(t){if("min"===t||"max"===t||"count"===t||"product"===t||"sum"===t||"avg"===t||"stdev"===t||"stdevp"===t||"var"===t||"varp"===t){if(null===a)return!0;let e=d[f.dataField][t];return null!==e&&void 0!==e||(e=0),d[f.dataField][t]=e,!0}"object"==typeof t&&h(t)})}}}for(let e=0;e<t.length;e++){const p=t[e];if(p.functions){if(d[p.dataField]||(d[p.dataField]={},p.functions.forEach(function(e){d[p.dataField][e]=0})),void 0!==d[p.dataField].avg){var c=d[p.dataField].avg,s=o[p.dataField];d[p.dataField].avg=0===s||void 0===s?0:c/s}else if(void 0!==d[p.dataField].count)d[p.dataField].count=u;else if(void 0!==d[p.dataField].median){let e=d[p.dataField].median;e.sort(function(e,t){return e-t}),d[p.dataField].median=.5*(e[Math.floor((e.length+1)/2)-1]+e[Math.ceil((e.length+1)/2)-1])}(d[p.dataField].stdev||d[p.dataField].stdevp||d[p.dataField].var||d[p.dataField].varp)&&p.functions.forEach(function(r){if("stdev"===r||"var"===r||"varp"===r||"stdevp"===r){var a=d[p.dataField][r],n=u,i=a/u;let t=0;for(let e=0;e<u;e++){var o=l[e][p.dataField];t+=(o-i)*(o-i)}let e="stdevp"===r||"varp"===r?n:n-1;0===e&&(e=1),"var"===r||"varp"===r?d[p.dataField][r]=t/e:"stdevp"!==r&&"stdev"!==r||(d[p.dataField][r]=Math.sqrt(t/e))}})}}return d}}deserialize(t,r,e){var a="null"===t;if(void 0!==t&&(!a||e)){if(a&&e)return null;if("boolean"===r||"bool"===r)return null!==t;if("number"===r||"float"===r)return"NaN"===t?NaN:"Infinity"===t?1/0:"-Infinity"===t?-1/0:parseFloat(t);if("int"===r||"integer"===r)return"NaN"===t?NaN:"Infinity"===t?1/0:"-Infinity"===t?-1/0:parseInt(t);if("string"===r)return t;if("any"===r)return t;if("date"===r)return new Date(t);if("function"===r){if("function"==typeof window[t])return window[t]}else if("array"===r||"object"===r)try{var n=JSON.parse(t);if(n)return n}catch(e){if(window[t]&&"object"==typeof window[t])return window[t];if("array"===r&&0<=t.indexOf("[")){if(0<=t.indexOf("{")){let a=t.replace(/{/gi,"").replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim();a=a.split("},");for(let e=0;e<a.length;e++){let t={},r=a[e].trim().split(",");for(let e=0;e<r.length;e++){var i=r[e].split(":")[0].trim(),o=r[e].split(":")[1].trim();t[i]=o}a[e]=t}return a}return t.replace("[","").replace("]","").replace(/'/gi,"").replace(/"/gi,"").trim().split(",")}}}}_getDataItem(a,e){var n=this;const i={};var t="number"==typeof n.dataSource||n.dataSourceLength;if(!a)return{$:{id:e,isEmpty:!0,index:e}};if("string"==typeof a&&(a={"":a}),t){for(let e=0;e<n.dataFields.length;e++){var r=n.dataFields?n.dataFields[e]:{};i[r.name]=""}return i.$={},i.$.id=e,i.$.index=e,i}var o=a;if(void 0!==o.expanded&&(i.expanded=o.expanded,"true"===o.expanded||!0===o.expanded||1===o.expanded?i.expanded=!0:i.expanded=!1),n.childrenDataField?void 0!==o[n.childrenDataField]&&(i.children=o[n.childrenDataField]):void 0!==o.children?i.children=o.children:void 0!==o.items&&(i.children=o.items),void 0!==o.leaf&&(i.leaf=o.leaf),void 0!==o.level&&(i.level=o.level),n.keyDataField&&void 0!==o[n.keyDataField]&&(i[n.keyDataField]=o[n.keyDataField]),n.parentDataField&&void 0!==o[n.parentDataField]&&(i[n.parentDataField]=o[n.parentDataField]),0===n.dataFields.length){var l=Object.getOwnPropertyNames(a);for(let e=0;e<l.length;e++)"$"!==l[e]&&n.dataFields.push({name:l[e],dataType:"string"})}for(let t=0;t<n.dataFields.length;t++){const c=n.dataFields?n.dataFields[t]:{};let r="";if(c.dataType=c.type,void 0!==c&&null!==c){if(a.length&&(r=a[t]),c.map){var d=c.map.split(n.mapChar);if(0<d.length){let t=o;for(let e=0;e<d.length;e++)o&&(t=t[d[e]]);r=t}else r=o[c.map]}void 0!==r&&null!==r?r=r.toString():void 0===r&&null!==r&&(r="");let e=!1;""===r&&(e=!0,void 0!==(r=a[c.name])&&null!==r?"array"!==c.dataType&&"date"!==c.dataType&&(r=r.toString()):r=""),"[object Object]"===r&&c.map&&e&&(r=""),n._cachedValues[r+"_"+c.dataType]?r=n._cachedValues[r+"_"+c.dataType]:("bool"===c.dataType||"boolean"===c.dataType?"true"===r||"1"===r?r=!0:"false"!==r&&"0"!==r||(r=!1):r=n.deserialize(""+r,c.dataType,!0),n._cachedValues[r+"_"+c.dataType]=r),"string"===c.dataType||"boolean"===c.dataType||"bool"===c.dataType||!isNaN(r)&&r!==-1/0&&r!==1/0||(r=0),i[c.name]=r}}let u=e;return n.id?"object"==typeof(u=o[n.id])&&(u=e):!n.virtualDataSource&&n.dataItemById&&n.dataItemById[u]&&(u=n.length),i.$||(i.$={}),i.$.id=u,i.$.index=e,new Object(i)}_bindToArray(){var t=this,r="number"==typeof t.dataSource||t.dataSourceLength;const a=[];t.boundSource.canNotify=!1;for(let e=0;e<t.length;e++){var n=r?{}:t.dataSource[e],n=t._getDataItem(n,e);a.push(n)}if(r&&t.dataSourceLength&&0<t.dataSource.length)for(let e=0;e<t.dataSource.length;e++){const d=t.dataSource[e].cell;var i=t.dataSource[e].value,o=d.replace(/[^0-9]/g,""),l=d.replace(/[0-9]/g,"");a[o-1][l]=i}t.boundSource=a;for(let e=0;e<t.length;e++)t[e]=t.boundSource[e],t.dataItemById[t[e].$.id]=t[e];t.boundSource.canNotify=!0}_bindToJSON(){var t=this;const r=[];var a=Object.entries(t.dataSource);t.boundSource.canNotify=!1;for(let e=0;e<a.length;e++){var n=a[e],n=t._getDataItem(n,e);r.push(n)}t.boundSource=!1===t.observable?r:new JQX.ObservableArray(r);for(let e=0;e<t.length;e++)t[e]=t.boundSource[e],t.dataItemById[t[e].$.id]=t[e];t.boundSource.canNotify=!0}sortBy(a,n,i){const o=this;if(!n)for(let e=0;e<o.dataFields.length;e++){var t=o.dataFields[e];if(t.name===a){n=t.dataType;break}}if(o.boundHierarchy)if((!a||0===a.length)&&0<o.groupBy.length)o.refreshHierarchy();else{const l=function(t){o._sort(t,a,i,n);for(let e=0;e<t.length;e++){var r=t[e];r.children&&l(r.children,a,i,n)}};l(o.boundHierarchy)}else o._sort(o.boundSource,a,i,n)}_createFilter(a,r){var n={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",equal:"EQUAL","not equal":"NOT_EQUAL","less than":"LESS_THAN","greater than":"GREATER_THAN","greater than or equal":"GREATER_THAN_OR_EQUAL","less than or equal":"LESS_THAN_OR_EQUAL","starts with":"STARTS_WITH","ends with":"ENDS_WITH",null:"null","":"EMPTY",isblank:"EMPTY",isnotblank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"};let i=[];for(let e=0;e<r.length;e++){const h=r[e];var o=-1===h.indexOf('"')?h.split(" "):h.split('"');let t=[];for(let e=0;e<o.length;e++){const p=o[e];""!==p&&t.push(p.trim())}i.push(t)}const l=new JQX.FilterGroup,d=[],u=[];for(let e=0;e<i.length;e++){var c=i[e];if(1<c.length){const g=new JQX.FilterGroup;let t="and",r=0;for(let e=0;e<c.length;e++){var s=c[e];"and"===s||"or"===s?t=s:2===++r&&(s=g.createFilter(a,s,n[c[e-1]]),r=0,t&&g.addFilter(t,s))}u.push(g)}else{var t=c[0];if("and"!==t&&"or"!==t)throw new Error('Filter Exprresion expects "AND" or "OR", but the token is: '+t);d.push(t)}}let f=0;if(1===u.length)return u[0];for(let t=0;t<u.length;t++){let e=d[f];(t+1)%2==0&&f++,e=e||"and",l.addFilter(e,u[t])}return l}filterBy(r,...e){const a=this;var t=(()=>{for(let e=0;e<a.dataFields.length;e++){var t=a.dataFields[e];if(t.name===r)return t.dataType}})();const n=a._createFilter(t,e);return a.boundSource.filter(e=>{return n.evaluate(e[r])})}_filter(r,e="and"){const o=this,l=[],a=[];if(0===r.length)o.clearFilter();else{let n,i;i="and"===e?(n=!0,function(e,t,r){return e&&t.evaluate(r[t.dataField])}):(n=!1,function(e,t,r){return e||t.evaluate(r[t.dataField])});for(let t=0;t<r.length;t++){const c=r[t];var d=c[0];let e=null;(e=c[1]instanceof JQX.FilterGroup?c[1]:o._createFilter((t=>{for(let e=0;e<o.dataFields.length;e++){var r=o.dataFields[e];if(r.name===t)return r.dataType}})(d),c.splice(1)))&&(a.push(d),e.dataField=d,l.push(e))}if(o.boundHierarchy){const s=function(t){let r=n;for(let e=0;e<l.length;e++){var a=l[e];r=i(r,a,t)}return t.$.filtered=r},f=function(t,r,e){let a=0;for(let e=0;e<t.length;e++){var n=t[e];s(n),n.$.filtered&&a++,n.children&&f(n.children,n,r)}0<a&&0<o.groupBy.length&&r?(r.$.filtered=!0,e&&!e.$.filtered&&(e.$.filtered=!0)):0<a&&a!==t.length&&r&&(r.$.filtered=null,e&&!e.$.filtered&&(e.$.filtered=null))};f(o.boundHierarchy,null,null)}else for(let e=0;e<o.boundSource.length;e++){const h=o.boundSource[e];let t=n;for(let e=0;e<l.length;e++){var u=l[e];t=i(t,u,h)}h.$.filtered=t}o.onFilter&&o.onFilter()}}clearGroup(){var e=this;e.groupBy=[],e.boundHierarchy=null,e.refreshHierarchy(),e.onGroup&&e.onGroup()}clearFilter(){var t=this;for(let e=0;e<t.boundSource.length;e++){const r=t.boundSource[e];r.$.filtered=!0}if(t.boundHierarchy){const n=function(t,r,e){for(let e=0;e<t.length;e++){const a=t[e];a.$.filtered=!0,a.$.filtered,a.children&&n(a.children,a,r)}r&&(r.$.filtered=!0,e&&!e.$.filtered&&(e.$.filtered=!0))};n(t.boundHierarchy,null,null)}t.onFilter&&t.onFilter()}clearSort(){this._sort(this.boundSource,[],[],[])}_sort(t,n,r,a,e){let i=!1;if(0!==t.length){if(t&&t.constructor&&t instanceof JQX.ObservableArray&&(i=!0),(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)&&!i&&!this.boundHierarchy)throw new Error("sort: Missing or Invalid arguments!");"string"==typeof n&&(n=[n]);const l=[],d=[];void 0===r&&(r=[]);for(let e=0;e<n.length;e++){void 0===r[e]||"asc"===r[e]||"ascending"===r[e]?l[e]=1:l[e]=-1;var o=t[0][n[e]];d[e]=function(e,t){let r;switch(t||typeof e){case"string":r=(new Intl.Collator).compare;break;case"number":r=function(e,t){return e-t};break;case"boolean":case"bool":r=function(e,t){return e===t?0:!1===e?-1:1};break;case"date":case"time":case"dateTime":e instanceof Date?r=function(e,t){return e.getTime()-t.getTime()}:(e instanceof JQX.Utilities.DateTime||e instanceof JQX.Utilities.BigNumber)&&(r=function(e,t){return e.compare(t)});break;case"object":if(e instanceof Date)r=function(e,t){return e.getTime()-t.getTime()};else if(e instanceof JQX.Utilities.DateTime||e instanceof JQX.Utilities.BigNumber)r=function(e,t){return e.compare(t)};else if(e instanceof JQX.Utilities.Complex||window.NIComplex&&e instanceof window.NIComplex){const a=new JQX.Utilities.ComplexNumericProcessor;r=function(e,t){return a.compareComplexNumbers(e,t)}}}return r}(o,a[e])}if(e)e(t,n,r,d);else{t.sort(function(t,r){for(let e=0;e<n.length;e++){var a=d[e](t[n[e]],r[n[e]]);if(0!==a)return a*l[e];if(!n[e+1])return void 0!==t._index?(t._index-r._index)*l[e]:0}if(0===n.length)return t.$.index<r.$.index?-1:t.$.index>r.$.index?1:0});for(let e=0;e<t.length;e++)this[e]=t[e]}}}static Filter(e,i,o,n,t="and"){let l,d;return d="and"===t?(l=!0,function(e,t,r,a){return n?e&&n(t,r,a):e&&a.evaluate(t[r])}):(l=!1,function(e,t,r,a){return n?e||n(t,r,a):e||a.evaluate(t[r])}),e.filter(t=>{let r=l;for(let e=0;e<o.length;e++){var a=o[e],n=i[e];r=d(r,t,n,a)}return r})}filter(e,t,r){JQX.ExcelAdapter.Filter(this.boundSource,e,t,r)}sort(e,t,r){JQX.ExcelAdapter.Sort(this.boundSource,e,t,r)}static Sort(t,n,r,e){if(t&&Array.isArray(t)&&0!==t.length&&n&&(!Array.isArray(n)||0!==n.length)){"string"==typeof n&&(n=[n]);const i=[],o=[];void 0===r&&(r=[]);for(let e=0;e<n.length;e++)void 0===r[e]||"asc"===r[e]||"ascending"===r[e]?i[e]=1:i[e]=-1,o[e]=function(e){let t;switch(typeof e){case"string":t=(new Intl.Collator).compare;break;case"number":t=function(e,t){return e-t};break;case"boolean":t=function(e,t){return e===t?0:!1===e?-1:1};break;case"object":if(e instanceof Date)t=function(e,t){return e.getTime()-t.getTime()};else if(e instanceof JQX.Utilities.DateTime||e instanceof BigNumberNG)t=function(e,t){return e.compare(t)};else if(e instanceof JQX.Utilities.Complex||window.NIComplex&&e instanceof window.NIComplex){const r=new JQX.Utilities.ComplexNumericProcessor;t=function(e,t){return r.compareComplexNumbers(e,t)}}}return t}(t[0][n[e]]);if(!e){const a=t.slice(0);return a.sort(function(t,r){for(let e=0;e<n.length;e++){var a=o[e](t[n[e]],r[n[e]]);if(0!==a)return a*i[e];if(!n[e+1])return void 0!==t._index?(t._index-r._index)*i[e]:0}}),a}e(t,n,r,o)}}}window.jqxDataSource=t;class r{constructor(e,t){this.config=e,this.callback=t,!1!==e.autoFetch&&this.call(e)}call(e){let t="GET",r=(e=e||this.config).url,a=null,n=!0;if(e.type&&(t=e.type),e.data)if("GET"===t){for(var i in r+="?",e.data)e.data.hasOwnProperty(i)&&(r+=encodeURI(i+"="+e.data[i]+"&"));"&"===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1))}else"POST"===t&&(a=JSON.stringify(e.data));e&&!1===e.async&&"xlsx"!==e.dataSourceType&&(n=!1),void 0!==window.fetch&&n?this.ajaxFetch(e,t,r,a):this.ajaxXMLHttpRequest(e,t,r,a,n)}ajaxFetch(r,e,t,a){const n=this,i={method:e};let o;switch(r.dataSourceType){case"json":o="json";break;case"xlsx":o="arrayBuffer";break;default:o="text"}r&&r.contentType&&(i.headers=new Headers({"Content-Type":r.contentType})),null!==a&&(i.body=a);let l,d,u;if((r.timeout&&(d=setTimeout(function(){u=!0},r.timeout)),r.beforeSend)&&!1===r.beforeSend(i,r))return;fetch(t,i).then(function(e){if(u)throw l=408,new Error("timeout");if(d&&clearTimeout(d),l=e.status,e.ok)return e[o]();throw new Error(e.statusText)}).then(function(e){if("arrayBuffer"===o)return JSZip.loadAsync(e).then(function(e){return e.files["xl/worksheets/sheet1.xml"].async("text").then(function(t){return e.files["xl/sharedStrings.xml"].async("text").then(function(e){e=n.parseXLSXData(t,e);n.ajaxComplete(r,e,l)})})});n.ajaxComplete(r,e,l)}).catch(function(e){"JSZip is not defined"===e.message&&(e.message="JSZip is not defined. Please include a reference to JSZip to be able to load data from XLSX files."),r&&r.loadError&&r.loadError(l,e),n.callback&&n.callback(e,l)})}ajaxXMLHttpRequest(r,e,t,a,n){const i=new XMLHttpRequest,o=this;if((i.open(e,t,n),i.ontimeout=function(){r&&r.loadError&&r.loadError(408,"timeout")},i.onload=function(){if(4===i.readyState){var t=i.status;let e=i.response;200<=t&&t<=299?("json"===r.dataSourceType&&(e=JSON.parse(e)),o.ajaxComplete(r,e,t)):r&&r.loadError&&r.loadError(t,e)}},i.onerror=function(){r&&r.loadError&&r.loadError(i.status,i.response)},r&&r.contentType&&i.setRequestHeader("Content-Type",r.contentType),n&&r.timeout&&(i.timeout=r.timeout),r.beforeSend)&&!1===r.beforeSend(i,r))return;i.send(a)}ajaxComplete(e,t,r){var a;e&&(e.beforeLoadComplete&&(a=e.beforeLoadComplete(t))&&(t=a),e.loadComplete&&e.loadComplete(t,r),this.callback&&this.callback(t,r))}parseXLSXData(e,t){const r=new DOMParser,a=r.parseFromString(t,"text/xml"),n=Array.from(a.getElementsByTagName("si")),o=[],i=r.parseFromString(e,"text/xml"),l=Array.from(i.getElementsByTagName("row")),d=[];return n.forEach(function(e){let r=e.getElementsByTagName("t");if(1===r.length)o.push(r[0].innerHTML);else{let t="";(r=Array.from(r)).forEach(function(e){t+=e.innerHTML}),o.push(t)}}),l.forEach(function(e){const i={},t=Array.from(e.getElementsByTagName("c"));t.forEach(function(e){var t=e.getAttribute("r").match(/\D+/)[0],r=e.getAttribute("t"),a=e.getElementsByTagName("v")[0].innerHTML;let n;switch(r){case"s":n=o[parseFloat(a)];break;case"b":n=1===parseFloat(a);break;default:n=parseFloat(a)}i[t]=n}),d.push(i)}),d}}e.jqx&&e.jqx.dataAdapter&&(e.jqx.dataAdapter.Importer=t)}(jqxBaseFramework);