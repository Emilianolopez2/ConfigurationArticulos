!function(w){w.jqx.jqxWidget("jqxForm","",{}),w.extend(w.jqx._jqxForm.prototype,{defineInstance:function(){w.extend(!0,this,{padding:{left:5,top:5,right:5,bottom:5},backgroundColor:"#F5F5F5",borderColor:"#E5E5E5",value:{},template:[{type:"text",label:"TextBox 1"},{type:"text",label:"TextBox 2"}]})},createInstance:function(t){var e=this,i=(e._isInitialized=!1,e.host);i.addClass(e.toThemeProperty("jqx-widget")),i.addClass(e.toThemeProperty("jqx-form")),e._renderAndInit(),this._setValue(this.value),this._prevValue=this._getValue(),e._isInitialized=!0},destroy:function(){this._destroyElements(),this.host.removeData(),this.host.remove(),delete this.host,delete this.set,delete this.get,delete this.call,delete this.element},_destroyElements:function(){for(var t=0;t<this.template.length;t++){if(w.isArray(this.template[t].columns))for(var e=0;e<this.template[t].columns.length;e++){var i=t+"_"+e;this._getComponentById(i).off(),this.host.find("#rowWrap_el_"+i).remove()}this._getComponentById(t).off(),this._getComponentLabelById(t).off(),this._getComponentLabelById(t).removeData(),this.host.find("#rowWrap_el_"+t).remove()}this.host.find("#formWrap").remove()},val:function(t){if(null==t)return this._getValue();this._setValue(t)},_onChangeHandler:function(t){if(this.isInitialized&&!this._suppressEvents){var e,i,o=this._getValue();if(!this._prevValue||JSON.stringify(o)!=JSON.stringify(this._prevValue))return(e=new w.Event("formDataChange")).args={value:o,previousValue:this._prevValue},i=(e.owner=this).host.trigger(e),e.cancel?this._setValue(this._prevValue):this._prevValue=o,i}},_onButtonClick:function(t,e){var i;if(this.isInitialized)return i=new w.Event("buttonClick"),i.args={name:e.name,text:t.val()},(i.owner=this).host.trigger(i)},submit:function(t,e,i){var o=this,n=o._getValue(!0),a="<form id='jqx_fromToSubmit'";t&&(a+=' action="'+t+'"'),e&&(a+=' target="'+e+'"'),i&&"get"===i.toString().toLowerCase()?a+=' method="GET"':a+=' method="POST"',a+=">";for(var l=0;l<n.length;l++){var s=n[l].value,r=n[l].tool,h=r.name;null==(h=null==h?r.id:h)&&(h=r.bind),("button"!=r.type&&"label"!=r.type||r.submit&&0!=r.submit)&&0!=r.submit&&void 0!==h&&(a=(a=a+'<input type="hidden"  name="'+h+'"')+' value="'+s+'">')}a+="</form>",o.host.find("#formSubmit").html(a),o.host.find("#jqx_fromToSubmit").submit()},_getValue:function(t){for(var e={},i=[],o=0;o<this.template.length;o++){var n=this.template[o],a="el_"+this.element.id+o;if(w.isArray(n.columns))for(var l=0;l<n.columns.length;l++){var s,r,h=n.columns[l];"option"==h.type&&"jqxDropDownList"!=h.component?(s=this._radioGroupGetValue(h,a+"."+l),null!=h.bind&&this._setObjectProperty(e,h.bind,s),t&&i.push({tool:h,value:s})):(void 0===(r=this._getComponentById(o+"_"+l).val())&&(r=null),null!=h.bind&&this._setObjectProperty(e,h.bind,r),t&&i.push({tool:h,value:r}))}else"option"==n.type&&"jqxDropDownList"!=n.component?(s=this._radioGroupGetValue(n,a),null!=n.bind&&this._setObjectProperty(e,n.bind,s),t&&i.push({tool:n,value:s})):(void 0===(r=this._getComponentById(o).val())&&(r=null),null!=n.bind&&this._setObjectProperty(e,n.bind,r),t&&i.push({tool:n,value:r}))}return t?i:w.extend({},this._prevValue,e)},_getObjectProperty:function(t,e){if("object"!=typeof t||void 0===t||void 0===e||""==e)return t;for(var i=e.split("."),o=t,n=0;n<i.length;n++)o=o[i[n]];return o},_setObjectProperty:function(t,e,i){if(void 0!==t)if(null==e||""==e)t=i;else{for(var o=e.split("."),n=0;n<o.length-1;)null==t[o[n]]&&(t[o[n]]={}),n++;t[o[n]]=i}},_setValue:function(t){this._suppressEvents=!0;for(var e=0;e<this.template.length;e++){var i,o=this.template[e],n="el_"+this.element.id+e,a=void 0;if(w.isArray(o.columns))for(var l=0;l<o.columns.length;l++){var s=o.columns[l],r=n+"."+l;s.bind&&(a=this._getObjectProperty(t,s.bind),"option"==s.type&&"jqxDropDownList"!=s.component?this._radioGroupSetValue(s,r,a):(s=this._getComponentById(e+"_"+l),void 0!==t&&s.val(a)))}else o.bind&&(a=this._getObjectProperty(t,o.bind),"option"==o.type&&"jqxDropDownList"!=o.component?this._radioGroupSetValue(o,n,a):(i=this._getComponentById(e),"label"==o.type?i.html(a):void 0!==t&&i.val(a)))}this._prevValue=t,this._suppressEvents=!1},_radioGroupGetValue:function(t,e){for(var i=0;i<t.options.length;i++){var o=this.host.find("#"+(e+"_option_"+i));if(0<o.length)if(1==o.jqxRadioButton("val"))return void 0!==t.options[i].value?t.options[i].value:t.options[i].label}},_radioGroupSetValue:function(t,e,i){for(var o=0;o<t.options.length;o++){if(void 0!==t.options[o].value){if(i!==t.options[o].value)continue}else if(i!==t.options[o].label)continue;var n=this.host.find("#"+(e+"_option_"+o));0<n.length&&n.jqxRadioButton("val",!0)}},_getToolStyle:function(t){var e="display: block;";return t.height&&(e+="height: "+t.height+";"),void 0!==t.valign?e+="vertical-align: "+t.valign+";":e+="vertical-align: middle;",e},_getAlignMargin:function(t,e){if(!t||!t[e])return"";var i=["left","right","top","bottom"],o={},n="";if(t[e]&&(o={},"left"==t[e]?(o.left="0px",o.right="auto"):"right"==t[e]?(o.left="auto",o.right="0px"):(o.left="auto",o.right="auto")),o)for(var a in i)o[i[a]]&&(n+="margin-"+i[a]+": "+o[i[a]]+";");return n},_getPaddingAndMarginStyle:function(t,e){var i="",o=["left","right","top","bottom"],n=e?"labelmargin":"margin",a=w.extend({left:5,top:5,right:5,bottom:5},t[e?"labelpadding":"padding"]);for(s in a)a[s]=isNaN(a[s])?parseFloat(a[s].toString()):a[s];var l=t[n];if(a)for(var s in o)a[o[s]]&&(i+="padding-"+o[s]+": "+a[o[s]]+"px;");if(l)for(var s in o)l[o[s]]&&(i+="margin-"+o[s]+": "+l[o[s]]+";");return i},_getToolLabelStyle:function(t){var e="display:block;";return void 0!==t.labelheight?e+="height: "+t.labelheight+";":e+="height: 100%;",void 0!==t.labelvalign?e+="vertical-align: "+t.labelvalign+";":void 0!==t.valign?e+="vertical-align: "+t.valign+";":e+="vertical-align: middle;",e},_renderAndInit:function(){var t=this._createTemplateHtml();this.host.append(t),this._initTools()},refresh:function(t){var e=this;e._isInitialized&&!0!==t&&(t=e.val(),e._destroyElements(),e._renderAndInit(),e._prevValue=t,e.val(t))},_createTemplateHtml:function(){this.groups;for(var t="padding-left: "+parseFloat(this.padding.left)+"px;padding-right: "+parseFloat(this.padding.right)+"px;padding-top: "+parseFloat(this.padding.top)+"px;padding-bottom: "+parseFloat(this.padding.bottom)+"px;",e="<table id='formWrap' style='background-color: "+this.backgroundColor+"; width: 100%; white-space: nowrap; border: 1px solid "+this.borderColor+";"+t+"' cellpadding='0' cellspacing='0'><div id='formSubmit' style='display:hidden;'><div>",i=this.template,o=0;o<i.length;o++){var n="el_"+this.element.id+o,a=this.template[o];e+=this._getToolTemplate(a,n)}return e+="</table>"},_beginRow:function(t,e,i){e="<tr style='width: 100%; height: "+(e=void 0===e?"auto":e)+";' id='rowWrap_"+t+"' "+(i=i?"valign='"+i+"'":"")+">";return e+="<td style='width: 100%;'><table style='width: 100%; white-space: nowrap; border: 0px;' cellspacing='0' cellpadding='0'><tr style='width: 100%'>"},_endRow:function(){return"<td style='width: auto; background: transparent;'> </tr></table></td></tr>"},_beginColumn:function(t,e){t="<td style='width:"+(t=void 0===t?"auto":t)+"; background: transparent;'>";return t+="<div style='display:block; overflow: visible; width: 100%; background: transparent;'>"},_endColumn:function(){return"</div></td>"},_splitLabelToolWidth:function(t,e){var i,e=e?"auto":t.columnwidth,o=t.labelwidth,n=w.extend({left:5,top:5,right:5,bottom:5},t.padding),a=w.extend({left:5,top:5,right:5,bottom:5},t.labelpadding);for(i in n)n[i]=isNaN(n[i])?parseFloat(n[i].toString()):n[i];for(i in a)a[i]=isNaN(a[i])?parseFloat(a[i].toString()):a[i];return""!=t.label&&null!=t.label||(a={left:o=0,right:0,top:0,bottom:0}),"top"==t.labelposition||"bottom"==t.labelposition?(void 0===o&&(o=e),(e=(e=void 0===e?o:e)&&-1!=e.toString().indexOf("%")&&o&&-1!=o.toString().indexOf("%")?o=Math.max(parseFloat(e),parseFloat(o))+"%":e)&&-1==e.toString().indexOf("%")&&o&&-1==o.toString().indexOf("%")&&(e=o=Math.max(parseFloat(e),parseFloat(o))+"px"),[o,e]):void 0===o?void 0!==e&&"auto"!==e?["auto",e]:"right"!=t.labelposition||"right"==t.align||"center"==t.align||"middle"==t.align?["auto","100%"]:["100%","auto"]:-1!==o.toString().indexOf("%")?(o=parseFloat(o),void 0!==e?-1!==e.toString().indexOf("%")?(e=parseFloat(e),[Math.min(100,o)+"%",Math.min(e,100-o)+"%"]):(e=parseFloat(e),[Math.min(100,o)+"%",e]):[Math.min(100,o)+"%",Math.max(0,100-o)+"%"]):(o=parseFloat(o)+a.left+a.right,null==e?[o+"px","calc(100% - "+o+"px)"]:[o+"px",e])},_getToolTemplate:function(t,e,i,o){var n,a={};for(n in t)a[n.toLowerCase()]=t[n];if(w.isArray(a.columns)&&isNaN(i)){for(var l=this._beginRow(e,a.rowheight||"auto"),s=0;s<a.columns.length;s++){var r=this._getToolTemplate(a.columns[s],e+"_"+s,void 0,!0),h="auto";void 0!==a.columns[s].columnWidth?h=a.columns[s].columnWidth:void 0!==a.columns[s].width&&(h=a.columns[s].width),l=(l=l+this._beginColumn(h)+("<table cellspacing='0' cellpadding='0' style='width: 100%; white-space: nowrap; border: 0px;'>"+r+"</table>"))+this._endColumn()}return l+=this._endRow()}if("option"==a.type&&"jqxDropDownList"!=a.component&&isNaN(i)){for(var d=this._beginRow(e,a.rowheight||"auto",a.valign),s=0;s<a.options.length;s++){r=this._getToolTemplate(a,e+"_option_"+s,s,!0);"horizontal"==a.optionslayout?(h=100/Math.max(1,a.options.length)+"%",a.columnwidth&&(h=a.columnwidth),d=(d=d+this._beginColumn(h)+"<table cellspacing='0' cellpadding='0' style='width: 100%; white-space: nowrap; border: 0px;'>"+r+"</table>")+this._endColumn()):d+=r}return d+=this._endRow()}var p=a.labelposition,u=a.label,d=(void 0===(u="option"!=a.type||"jqxDropDownList"==a.component||isNaN(i)?u:a.options[i].label)&&(u=""),""),g=this._getToolLabelStyle(a)+this._getPaddingAndMarginStyle(a,!0),m=this._getToolStyle(a)+this._getPaddingAndMarginStyle(a,!1),c=this._getAlignMargin(a,"align"),_="text-align: left;",f=("center"==a.labelalign||"middle"==a.labelalign?_="text-align: center":"right"==a.labelalign&&(_="text-align: right"),"text-align: left;"),o=("center"==a.align||"middle"==a.align?f="text-align: center":"right"==a.align&&(f="text-align: right"),this._splitLabelToolWidth(a,o)),v=u,b=(a.required&&(b="<span class='' style='color:red;'>*</span>",v=a.requiredposition&&"left"==a.requiredposition.toLowerCase()?b+" "+u:u+" "+b),""),g=("boolean"!=a.type&&("option"!=a.type||isNaN(i))||(b+="; cursor: pointer;"),"<div class='' style='"+g+"'><div style='"+_+b+";' id='label_"+e+"'>"+v+"</div></div>"),_="<div style='"+(void 0!==a.info&&"left"!=a.infoposition?"margin-left: -3px;":"margin-right: -3px;")+"' class='"+this.toThemeProperty("jqx-info-icon")+"' title='"+a.info+"'></div>",b="<div style='background: transparent;"+m+"'><div style='width: auto; height: auto; "+c+"' id='"+e+"'></div></div>";return"text"==a.type||"button"==a.type?b="<div style='background: transparent;"+m+f+"'><input style='width: auto; height: auto; "+c+"' id='"+e+"' type='"+a.type+"'/></div>":"password"==a.type&&(b="<div style='background: transparent;"+m+f+"'><input type='password' style='width: auto; height: auto; "+c+"' id='"+e+"'/></div>"),"option"!=a.type||"jqxDropDownList"==a.component||isNaN(i)||(h=a.width,o=[a.labelwidth||"auto",h=void 0===h?"15px":h],!a.labelposition||"top"!=a.labelposition&&"bottom"!=a.labelposition||(o=["100%","100%"]),b="<div style='background: transparent;"+m+c+f+"'><div style='width: "+h+"; height: 100%; "+c+f+";' id='"+e+"'></div></div>"),void 0!==a.info&&""!==a.info&&(b="left"==a.infoposition?"<table cellspacing='0' cellpadding='0' style='border: 0px; white-space: nowrap;"+c+"'><tr><td>"+_+"</td><td>"+b+"</td></tr></table>":"<table cellspacing='0' cellpadding='0' style='border: 0px; white-space: nowrap;"+c+"'><tr><td>"+b+"</td><td>"+_+"</td></tr></table>"),d="right"==p?(d=(d+=this._beginRow(e,a.rowheight||"auto",a.valign))+this._beginColumn(o[1])+b,""!=u&&(d=(d+=this._endColumn())+this._beginColumn(o[0])+g),(d+=this._endColumn())+this._endRow()):"top"==p?(d=(d+=this._beginRow(e,a.rowheight||"auto",a.valign))+this._beginColumn(a.columnwidth),""!=u&&(d+=g),(d=(d+=b)+this._endColumn())+this._endRow()):"bottom"==p?(d=(d+=this._beginRow(e,a.rowheight||"auto",a.valign))+this._beginColumn(a.columnwidth)+b,""!=u&&(d+=g),(d+=this._endColumn())+this._endRow()):(d+=this._beginRow(e,a.rowheight||"auto",a.valign),(d=(d=(d=""!=u?(d=d+this._beginColumn(o[0])+g)+this._endColumn():d)+this._beginColumn(o[1])+b)+this._endColumn())+this._endRow())},_initTools:function(t,e){var i=t||this.template;null==e&&(e="");for(var o=0;o<i.length;o++){var n=i[o];if(w.isArray(n.columns))this._initTools(n.columns,o+"_");else{var a=e+o;switch(n.type){case"color":this._initColorTool(a);break;case"option":"jqxDropDownList"==n.component?this._initOptionToolDropDownList(a):this._initOptionTool(a);break;case"dropdownlist":this._initOptionToolDropDownList(a);break;case"number":this._initNumberTool(a);break;case"boolean":case"checkbox":this._initBooleanTool(a);break;case"text":this._initTextTool(a);break;case"password":this._initPasswordTool(a);break;case"label":this._initLabelTool(a);break;case"date":case"time":case"datetime":this._initDateTimeTool(a);break;case"button":this._initButtonTool(a);break;case"custom":this._initCustomTool(a)}!1===n.visible&&this._showhideComponent(void 0,a,!1),n.theme&&this._setToolTheme(n,a)}}},_setToolTheme:function(t,e){var i=this._getComponentById(e),o=t.theme||this.theme;switch(t.type){case"option":"jqxDropDownList"==t.component&&i.jqxDropDownList("theme",o);break;case"number":i.jqxNumberInput("theme",o);break;case"text":i.jqxInput("theme",o);break;case"password":i.jqxPasswordInput("theme",o)}},_initOptionTool:function(t){for(var e=this,i="el_"+this.element.id+t,o=e._getTool(t),n=0;n<o.options.length;n++){var a=i+"_option_"+n,l=e.host.find("#"+a),a=(0<l.length&&l.jqxRadioButton({width:25,theme:e.theme,groupName:"group_"+t}).on("change",function(t){e._onChangeHandler(t)}),e.host.find("#label_"+a));a.data("el",l),a.on("mousedown",function(t){w(this).data("el").jqxRadioButton("toggle")})}},_initOptionToolDropDownList:function(t){var e,i=this,o="el_"+this.element.id+t,n=i._getTool(t),t=this.host.find("#"+o),a=[];if(n.options&&w.isArray(n.options))for(var l=0;l<n.options.length;l++)a.push(n.options[l]);n.init?n.init(t):(o=isNaN(parseFloat(n.width))?"auto":n.width,n.width&&-1!=n.width.toString().indexOf("%")&&void 0===n.columnwidth&&(o="100%"),e=isNaN(parseFloat(n.height))?"30px":n.height,t.jqxDropDownList({theme:i.theme,width:o||"auto",autoDropDownHeight:!0,height:e,enableBrowserBoundsDetection:!0,source:a,selectedIndex:0})),t.on("change",function(t){i._onChangeHandler(t)})},_initNumberTool:function(t){var e,i=this,o="el_"+this.element.id+t,t=i._getTool(t),o=this.host.find("#"+o);t.init?t.init(o):(e=isNaN(parseFloat(t.width))?"auto":t.width,t=isNaN(parseFloat(t.height))?"30px":t.height,o.jqxNumberInput({theme:i.theme,width:e,height:t,inputMode:"simple"})),o.on("change",function(t){i._onChangeHandler(t)})},_initBooleanTool:function(t){var i=this,o="el_"+this.element.id+t,t=i._getTool(t),e=this.host.find("#"+o);if(t.init)t.init(e);else{var n=isNaN(parseFloat(t.width))?"auto":t.width,a=isNaN(parseFloat(t.height))?"30px":t.height,l=1==t.isThreeState;if(void 0!==t.component&&"jqxCheckBox"!=t.component)return;e.jqxCheckBox({theme:i.theme,width:n,height:a,hasThreeStates:l})}e.on("change",function(t){i._onChangeHandler(t)}),i.host.find("#label_"+o).on("mousedown",function(t){var e=i.host.find("#"+o).val();i.host.find("#"+o).val(!e)})},_initTextTool:function(t){var e,i=this,o="el_"+this.element.id+t,t=i._getTool(t),o=this.host.find("#"+o);t.init?t.init(o):(e=isNaN(parseFloat(t.width))?"auto":t.width,t=isNaN(parseFloat(t.height))?"30px":t.height,o.jqxInput({theme:i.theme,width:e,height:t})),o.on("change",function(t){i._onChangeHandler(t)})},_initLabelTool:function(t){var e="el_"+this.element.id+t,t=this._getTool(t),e=this.host.find("#"+e);t.render&&w.isFunction(t.render)&&(t=t.render(),e.html(t||""))},_getTool:function(t){var t=t.split("_"),e=this.template[t[0]];return t[1]?w.isArray(e.columns)&&e.columns.length>t[1]?e.columns[t[1]]:void 0:e},_initCustomTool:function(t){var e="el_"+this.element.id+t,t=this._getTool(t),e=this.host.find("#"+e);t.init&&t.init(e)},_initButtonTool:function(t){var e,i=this,o="el_"+this.element.id+t,n=i._getTool(t),a=this.host.find("#"+o);n.init?n.init(a):(t=isNaN(parseFloat(n.width))?"auto":n.width,e=isNaN(parseFloat(n.height))?"30px":n.height,a.jqxButton({theme:i.theme,width:t,height:e}),a.val(void 0===n.text?"Button":n.text)),this.host.find("#"+o).on("click",function(t){i._onButtonClick(a,n)})},_initPasswordTool:function(t){var e,i=this,o="el_"+this.element.id+t,t=i._getTool(t),o=this.host.find("#"+o);t.init?t.init(o):(e=isNaN(parseFloat(t.width))?"auto":t.width,t=isNaN(parseFloat(t.height))?"25px":t.height,o.jqxPasswordInput({theme:i.theme,width:e,height:t})),o.on("change",function(t){i._onChangeHandler(t)})},_initDateTimeTool:function(t){var e,i,o,n=this,a="el_"+this.element.id+t,t=n._getTool(t),a=this.host.find("#"+a);t.init?t.init(a):(e=isNaN(parseFloat(t.width))?"auto":t.width,i=isNaN(parseFloat(t.height))?"30px":t.height,o=(o=t.formatString)||("time"==t.type?"hh mm ss tt":"date"==t.type?"MM/dd/yyyy":"MM/dd/yyyy hh:mm:ss tt"),a.jqxDateTimeInput({theme:n.theme,width:e,height:i,formatString:o,showTimeButton:"date"!=t.type,showCalendarButton:"time"!=t.type})),a.on("valueChanged",function(t){n._onChangeHandler(t)})},getComponentByName:function(t){if(w.isArray(this.template))for(var e=0;e<this.template.length;e++){if(this.template[e].name==t)return this._getComponentById(e);if(w.isArray(this.template[e].columns))for(var i=0;i<this.template[e].columns.length;i++)if(this.template[e].columns[i].name==t)return this._getComponentById(e+"_"+i)}},_getComponentById:function(t){return this.host.find("#el_"+this.element.id+t)},_getComponentLabelById:function(t){return this.host.find("#label_el_"+t)},hideComponent:function(t){this._showhideComponent(t,void 0,!1)},showComponent:function(t){this._showhideComponent(t,void 0,!0)},_showhideComponent:function(t,e,i){if(w.isArray(this.template)){var o="";if(void 0===e)for(var n=0;n<this.template.length;n++){if(this.template[n].name==t){o=n;break}if(this.template[n].bind==t){o=n;break}if(w.isArray(this.template[n].columns))for(var a=0;a<this.template[n].length;a++){if(this.template[n].columns[a].name==t){o=n+"_"+a;break}if(this.template[n].columns[a].bind==t){o=n+"_"+a;break}}}else o=e;""==o||(e=this.host.find("#rowWrap_el_"+this.element.id+o))&&0!=e.length&&(i?e.show():e.hide())}}})}(jqxBaseFramework);