!function(O){O.jqx.jqxWidget("jqxDockingLayout","jqxLayout",{}),O.extend(O.jqx._jqxDockingLayout.prototype,{defineInstance:function(){var e={events:["float","dock"]};return this.base&&(this.base.dockingLayout=this),this===O.jqx._jqxDockingLayout.prototype||O.extend(!0,this,e),e},createInstance:function(){var e=this;if(!e.base.host.jqxWindow)throw new Error("jqxDockingLayout: Missing reference to jqxwindow.js.");e._oldIE=O.jqx.browser.msie&&O.jqx.browser.version<9,e._addClasses(),!0!==e.base._initiallyHidden&&(e._createOverlay(),e._createEdgeOverlays())},loadLayout:function(e){if(void 0!==e&&!1===O.isEmptyObject(e)){for(var t=this.base,o=t.element.id,a=t._find(document.body,"."+o+"FloatGroup"),r=0;r<a.length;r++){var n=O(a[r]);n.off(),n.jqxWindow("destroy")}t.loadLayout(e)}},destroy:function(){for(var e=this.base,t=e.element.id,o=e._find(document.body,"."+t+"FloatGroup"),a=0;a<o.length;a++){var r=O(o[a]);r.off(),r.jqxWindow("destroy")}this._removeHandlers(),e.destroy()},addFloatGroup:function(e,t,o,a,r,n,i){var d=this.base,e={type:"floatGroup",width:e,height:t,position:o,items:[],programmaticallyAdded:!0};e.items.push({type:a,title:r,content:n,initContent:i}),d.layout.push(e),d.render()},_raiseEvent:function(e,t){e=this.events[e],(t=void 0===t?{owner:null}:t).owner=this,e=new O.Event(e);return e.owner=this,e.args=t,e.preventDefault&&e.preventDefault(),this.base.host.trigger(e)},_addClasses:function(){var e=this.base;e.host.addClass(e.toThemeProperty("jqx-docking-layout"))},_removeHandlers:function(){var e=this,t=e.base,o=t.element.id;e.removeHandler(O(document),"mousemove.jqxDockingLayout"+o),e.removeHandler(t.host,"mouseleave.jqxDockingLayout"+o),t._touchDevice&&(e.removeHandler(O(document),"touchmove.jqxDockingLayout"+o),e.removeHandler(O(document),"touchend.jqxDockingLayout"+o))},_removeByDragHandler:function(e,t,o,a,r){void 0===a&&(a=e.args.draggedIndex),void 0===r&&(r=!0);var n=this,i=n.base,d=t.items,l=d[a],s=i._find(t.widget,".jqx-ribbon-content-section")[a],s=i._detachChildNodes(s);o.hasClass("jqx-ribbon")||(o=O(i._find(o,".jqx-ribbon")[0])),n.base._suppressResizeHandler=!0,n._createFloatGroup(e,l.title,s,"documentGroup",t,l),n.base._closeDocumentPanel(a,d,t,o,r),n.base._suppressResizeHandler=!1},_floatTabbedGroup:function(e,t,o){for(var a,r,n=this,i=n.base,d=[],t=O(i._find(t,".jqx-ribbon")[0]),l=i._find(t,".jqx-ribbon-content-section"),s=0;s<e.items.length;s++){var u=e.items[s],c=i._detachChildNodes(l[s]);u.selected&&(a=u.title,r=s),d.push(c)}n._createFloatGroup(o,a,d,"tabbedGroup",e,null,r),n.base._close(e),o&&(o.target.style.cursor="")},_addTabbedGroupHandlers:function(t,o){var a,r=this,n=r.base,e=n.element.id,i=n._find(o,".jqx-layout-window-header")[0],d=!1,l=n._touchDevice?["touchstart","touchend"]:["mousedown","mouseup"];function s(e){!0===d&&!0!==n._clickedToResize&&(r._floatTabbedGroup(t,o,e),d=!1)}r.addHandler(i,l[0]+".jqxDockingLayout"+e,function(e){!1!==t.allowDrag&&(d=!0,e.target.style.cursor="move",n._touchDevice&&(e=e.originalEvent.touches[0],a=document.elementFromPoint(e.pageX,e.pageY)))}),r.addHandler(i,l[1]+".jqxDockingLayout"+e,function(e){d=!1,e.target.style.cursor=""}),n._touchDevice?r.addHandler(O(document),"touchmove.jqxDockingLayout"+e,function(e){!0===n._clickedToResize&&e.preventDefault();e=e.originalEvent.touches[0];a!==document.elementFromPoint(e.pageX,e.pageY)&&s({pageX:e.pageX,pageY:e.pageY,target:a})}):r.addHandler(i,"mouseleave.jqxDockingLayout"+e,function(e){s({pageX:e.pageX,pageY:e.pageY,target:e.target})})},_floatAutoHideGroup:function(e,t,o,a){o=this.base._detachChildNodes(o);this._createFloatGroup(a,t,o,"autoHideGroup",e,e),this.base._close(e)},_addAutoHideGroupHandlers:function(t,e,o,a){var r,n=this,i=n.base,d=i.element.id,l=!1,s=i._touchDevice?["touchstart","touchend"]:["mousedown","mouseup"];function u(e){!0===l&&(n._floatAutoHideGroup(t,o,a,e),l=!1,e.target.style.cursor="")}n.addHandler(e,s[0]+".jqxDockingLayout"+d,function(e){!1!==t.parent.allowDrag&&(l=!0,e.target.style.cursor="move",i._touchDevice&&(e=e.originalEvent.touches[0],r=document.elementFromPoint(e.pageX,e.pageY)))}),n.addHandler(e,s[1]+".jqxDockingLayout"+d,function(e){l=!1,e.target.style.cursor=""}),i._touchDevice?n.addHandler(O(document),"touchmove.jqxDockingLayout"+d,function(e){!0===i._clickedToResize&&e.preventDefault();e=e.originalEvent.touches[0];r!==document.elementFromPoint(e.pageX,e.pageY)&&u({pageX:e.pageX,pageY:e.pageY,target:r})}):n.addHandler(e,"mouseleave.jqxDockingLayout"+d,function(e){u({pageX:e.pageX,pageY:e.pageY,target:e.target})})},_createFloatGroup:function(a,r,e,n,i,d,l){var s,u,c=this,y=c.base,p=document.createElement("div");if(p.className=y.toThemeProperty("jqx-docking-layout-group-floating")+" "+y.element.id+"FloatGroup",p.innerHTML="<div></div><div></div>",document.body.appendChild(p),p=O(p),"documentGroup"===n)a&&(s=a.args.x,u=a.args.y),t=i.widget.width(),o=i.widget.height(),g=e;else if("tabbedGroup"===n){a&&(s=a.pageX,u=a.pageY);var t=i.widget.width(),o=i.widget.height(),g="",v=document.createElement("div"),h=document.createElement("div"),m=document.createElement("ul");m.className="jqx-layout-ribbon-header jqx-layout-ribbon-header-"+(c.rtl?"rtl":"ltr");for(var _=0;_<i.items.length;_++){var f=i.items[_],q=document.createElement("div"),x=document.createElement("li");x.innerHTML=f.title,m.appendChild(x);for(var j=0;j<e[_].length;j++)e[_][j].appendTo(q);h.appendChild(q)}v.appendChild(m),v.appendChild(h),g=v=O(v)}else"autoHideGroup"===n&&(a&&(s=a.pageX,u=a.pageY),t=O(y._find(i.parent.widget,".jqx-ribbon-content")[0]).width(),o=i.parent.widget.height(),g=e);s||u||(b=y.host.offset(),s=(y.host.width()-t)/2+b.left+100,u=(y.host.height()-o)/2+b.top+10),p.on("moved close",function(e){c._hideOverlays();var t=p.current;"moved"===e.type?(t.position.x=e.args.x,t.position.y=e.args.y,t._overlayGroup&&c._updateOverlayGroup(t._overlayGroup),c._clearTextSelection(),c._windowCreate=!1,c._hideOverlays()):(y._raiseEvent("4",{element:p,floatGroup:p.current}),t._overlayGroup&&(t._overlayGroup.removed=!0,c._updateOverlayGroups()),t.removed=!0,y._updateLayout(y.layout))}),p.on("resized",function(e){var t=p.current,o=O(this).offset();t.width=e.args.width,t.height=e.args.height,t.position.x=o.left,t.position.y=o.top,t._overlayGroup&&c._updateOverlayGroup(t._overlayGroup)}),p.jqxWindow({theme:y.theme,title:r,content:g,width:t,maxWidth:null,height:o,maxHeight:null,position:{x:s-100,y:u-10},closeButtonAction:"close",rtl:y.rtl,initContent:function(){var e=this._header,t=y._touchDevice?"touchstart":"mousedown",o="autoHideGroup"===n?i.parent:i;a&&(c._draggedWindow={fromGroup:o,fromPanel:d,title:r,element:p},e.trigger("mousedown",[s,u]),c._windowDragged=!0,c._windowCreate=!0,c._interval(),y.resizable&&(y._overlay[0].style.display="block"),c._showEdgeOverlays()),e.on(t,function(){c._windowDragged=!0,p.current._overlayGroup&&(p.current._overlayGroup.self=!0),c._interval(),y.resizable&&(y._overlay[0].style.display="block"),c._draggedWindow={fromGroup:o,fromPanel:d,title:r,element:p},c._showEdgeOverlays()}),e.on("mouseup",function(){c._hideOverlays(),c._windowCreate=!1}),"tabbedGroup"===n&&(v.jqxRibbon({theme:y.theme,width:"100%",height:"100%",position:"bottom",selectedIndex:l,selectionMode:"click",animationType:"none",rtl:y.rtl,reorder:!0,_suppressReorder:!1,_removeByDrag:!0}),v.on("select",function(e){e.owner.widgetName&&"jqxRibbon"!==e.owner.widgetName||(e=p.current.items[0].items[e.args.selectedIndex],p.jqxWindow("setTitle",e.title),e.selected=!0)}),v.on("unselect",function(e){e.owner.widgetName&&"jqxRibbon"!==e.owner.widgetName||(p.current.items[0].items[e.args.unselectedIndex].selected=!1)}),v.on("reorder",function(e){y._swapPanelsInLayout(p.current.items[0].items,e.args.newIndex,e.args.oldIndex)}),v.on("_removeByDrag",function(e){c._removeByDragHandler(e,p.current.items[0],v),1===p.current.items[0].items.length&&v.jqxRibbon({_removeByDrag:!1})}))}});var w,b={type:"floatGroup",parent:{type:"host"},widget:p,position:{x:s-100,y:u-10},index:y.layout.length,width:t,height:o};if(p.current=b,d)b.items=[],y._copyItem(d,b.items),k=b.items,w=b;else{b.items=[{type:"tabbedGroup",items:[],parent:b,widget:v}];for(var k=b.items[0].items,G=0;G<i.items.length;G++)y._copyItem(i.items[G],k);w=b.items[0]}for(var T=0;T<k.length;T++)k[T].parent=w;y.layout.push(b),c._raiseEvent("0",{item:b}),c._trackFloatGroups()},_interval:function(){var e,t,o=this;!0===o._oldIE&&(e=o._overlayWidth,t=o._overlayHeight,o._oldIEInterval=setInterval(function(){o._checkPosition(e,t),o._windowCreate&&o._draggedWindow.element.jqxWindow("move",o._x-50,o._y-10)},1e3))},_createOverlay:function(){var u=this,c=u.base,e=c.element.id,t=(u._overlay=document.createElement("div"),u._overlay.className=c.toThemeProperty("jqx-docking-layout-overlay"),u._overlay.innerHTML='<div class="jqx-docking-layout-overlay-section"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-top")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-top")+'"></div></div></div></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div></div><div class="jqx-docking-layout-overlay-section"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-left")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-left")+'"></div></div></div></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-center")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-inner-square-content jqx-docking-layout-overlay-highlight")+'"></div></div></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-right")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-right")+'"></div></div></div></div></div><div class="jqx-docking-layout-overlay-section"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-bottom")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-bottom")+'"></div></div></div></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div></div>',u._overlay=O(u._overlay),c._find(u._overlay,".jqx-docking-layout-overlay-square-center")[0]),r=(u._overlayCenter=O(t.firstChild),u._dropOverlay=document.createElement("div"),u._dropOverlay.className=u.toThemeProperty("jqx-docking-layout-drop-overlay"),u._dropOverlayHelper=O(u._dropOverlay),c._ie7?O("body").append(u._overlay,u._dropOverlay):(c.element.appendChild(u._overlay[0]),c.element.appendChild(u._dropOverlay)),u._overlayWidth=u._overlay[0].offsetWidth,u._overlayHeight=u._overlay[0].offsetHeight,u._overlay[0].style.display="none",u._addOverlayHandlers(),u._squares=[c._find(u._overlay,".jqx-docking-layout-overlay-square-top")[0],c._find(u._overlay,".jqx-docking-layout-overlay-square-left")[0],t,c._find(u._overlay,".jqx-docking-layout-overlay-square-right")[0],c._find(u._overlay,".jqx-docking-layout-overlay-square-bottom")[0]],!(u._sansCenter=[O(c._find(O(u._squares[0]),".jqx-docking-layout-overlay-inner-square")[0]),O(c._find(O(u._squares[1]),".jqx-docking-layout-overlay-inner-square")[0]),O(c._find(O(u._squares[3]),".jqx-docking-layout-overlay-inner-square")[0]),O(c._find(O(u._squares[4]),".jqx-docking-layout-overlay-inner-square")[0])]));function n(e,t,o,a){u._dropOverlay.style.display="block",u._dropOverlay.style.width=e+"px",u._dropOverlay.style.height=t+"px",O(u._dropOverlay).offset({left:o,top:a})}function o(e){var t,o,a;e=u._closest(e,"jqx-docking-layout-overlay-square"),r=e,O(c._find(e,".jqx-docking-layout-overlay-inner-square")[0]).hasClass("jqx-fill-state-disabled")||(t=u._dropToGroup.element.width(),o=u._dropToGroup.element.height(),a=u._dropToGroup.element.offset(),e.hasClass("jqx-docking-layout-overlay-square-top")?n(t,o/2,a.left,a.top):e.hasClass("jqx-docking-layout-overlay-square-left")?n(t/2,o,a.left,a.top):e.hasClass("jqx-docking-layout-overlay-square-center")&&!u._overlayCenter.hasClass("jqx-docking-layout-square-disabled")?n(t,o,a.left,a.top):e.hasClass("jqx-docking-layout-overlay-square-right")?n(t/2,o,a.left+t/2,a.top):e.hasClass("jqx-docking-layout-overlay-square-bottom")?n(t,o/2,a.left,a.top+o/2):c._touchDevice&&(u._dropOverlay.style.display="none",r=!1))}function a(e){var t=u._dropToGroup.settings;if(O(c._find(e,".jqx-docking-layout-overlay-inner-square")[0]).hasClass("jqx-fill-state-disabled"))u._hideOverlays();else{if(e.hasClass("jqx-docking-layout-overlay-square-top"))u._dropHandler(0,"vertical","height","top");else if(e.hasClass("jqx-docking-layout-overlay-square-left"))u._dropHandler(0,"horizontal","width","left");else if(e.hasClass("jqx-docking-layout-overlay-square-center")){var o,a,r=u._getDraggedWindowInformation(),n=r.title,i=r.content;if("documentGroup"===t.type?(o=t.widget,a="documentPanel"):"tabbedGroup"===t.type&&(o="floatGroup"===t.parent.type?t.widget:O(c._find(t.widget,".jqx-ribbon")[0]),a="layoutPanel"),"layoutGroup"===t.type)u._dropToEmptyLayoutGroup(r);else for(var d=0;d<n.length;d++){o.jqxRibbon({_suppressReorder:!0}),o.jqxRibbon("addAt",c._find(o,".jqx-ribbon-content-section").length,{title:n[d],content:i[d]},!0);var l=t.items.length,s={type:a,title:n[d],parent:t,index:l,detachedContent:r.content[d],docked:!0};t.items.push(s),c._addRightClickHandler(O(c._find(o,".jqx-ribbon-item")[l]),{current:s}),o.jqxRibbon({_suppressReorder:!1})}"floatGroup"===t.parent.type&&t.widget.jqxRibbon({_removeByDrag:!0}),u._clearTextSelection(),u._raiseEvent("1",{position:"center",item:t})}else e.hasClass("jqx-docking-layout-overlay-square-right")?u._dropHandler(1,"horizontal","width","right"):e.hasClass("jqx-docking-layout-overlay-square-bottom")&&u._dropHandler(1,"vertical","height","bottom");u._removeFloatGroupObject(u._draggedWindow.element.current),u._draggedWindow.element.remove(),u._hideOverlays()}}c._touchDevice?(u.addHandler(O(document),"touchmove.jqxDockingLayout"+e,function(e){u._windowDragged&&(e.preventDefault(),e=e.originalEvent.touches[0],o(O(document.elementFromPoint(e.pageX,e.pageY))))}),u.addHandler(O(document),"touchend.jqxDockingLayout"+e,function(){!1!==r&&(a(r),r=!1)})):O.each(u._squares,function(){u.addHandler(this,"mouseenter.jqxDockingLayout"+e,function(){o(O(this))}),u.addHandler(this,"mouseleave.jqxDockingLayout"+e,function(){u._dropOverlay.style.display="none"}),u.addHandler(this,"mouseup.jqxDockingLayout"+e,function(){a(O(this))})})},_addOverlayHandlers:function(){var t=this,o=t._overlayWidth,a=t._overlayHeight;t.base._touchDevice?t.addHandler(O(document),"touchmove.jqxDockingLayout"+t.base.element.id,function(e){e=e.originalEvent.touches[0];t._x=e.pageX,t._y=e.pageY,t._windowDragged&&!t._oldIE&&(t._checkPosition(o,a),t._windowCreate&&t._draggedWindow.element.jqxWindow("move",e.pageX-50,e.pageY-10))}):t.addHandler(O(document),"mousemove.jqxDockingLayout"+t.base.element.id,function(e){t._x=e.pageX,t._y=e.pageY,t._windowDragged&&!t._oldIE&&(t._checkPosition(o,a),t._windowCreate&&t._draggedWindow.element.jqxWindow("move",e.pageX-50,e.pageY-10))})},_checkPosition:function(e,t){for(var o=this,a=o.base,r=o._x,n=o._y,i=0;i<a._overlayGroups.length;i++){var d=a._overlayGroups[i];if(!d.self){var l=d.width,s=d.height,u=d.offset,c=u.left,u=u.top;if(c<=r&&r<=c+l&&u<=n&&n<=u+s){if(("documentGroup"===d.settings.type&&"documentGroup"===o._draggedWindow.fromGroup.type||"tabbedGroup"===d.settings.type&&("tabbedGroup"===o._draggedWindow.fromGroup.type||"autoHideGroup"===o._draggedWindow.fromGroup.type)||"layoutGroup"===d.settings.type)&&!1!==d.settings.allowDrop)o._overlayCenter.removeClass(a.toThemeProperty("jqx-fill-state-disabled"));else if(o._overlayCenter.addClass(a.toThemeProperty("jqx-fill-state-disabled")),"floatGroup"===d.settings.parent.type)return;for(var y=0;y<o._sansCenter.length;y++)"floatGroup"===d.settings.parent.type?o._sansCenter[y].addClass(a.toThemeProperty("jqx-fill-state-disabled")):o._sansCenter[y].removeClass(a.toThemeProperty("jqx-fill-state-disabled"));return o._overlay[0].style.display="block",o._overlay.offset({left:parseInt(c+l/2-e/2,10),top:parseInt(u+s/2-t/2,10)}),void(o._dropToGroup=d)}}}o._overlay[0].style.display="none"},_dropHandler:function(e,t,o,a){var r=this,n=r.base,i=r._dropToGroup.settings,d=i.parent,l=r._getDraggedWindowInformation(),s=l.title,u=l.content,c=l.groupType,y=l.itemType,p=[];if(d.orientation===t){l=i.index+e,(h={type:c,parent:d})[o]=r._draggedWindow.element[o]();for(var g=0;g<s.length;g++)p.push({type:y,title:s[g],parent:h,prevent:!0,selected:r._getFloatGroupItemSelection(g),detachedContent:u[g],docked:!0});h.items=p,r._setOptimalDimension(o,h,i),d.items.splice(l,0,h)}else{var v,d="width"===o?(v="height","minHeight"):(v="width","minWidth"),l={type:"layoutGroup",orientation:t,parent:i.parent,index:i.index};l[v]=i[v],i[d]&&(l[d]=i[d]),i.parent.items.splice(i.index,1),i.parent.items.splice(i.index,0,l);for(var h={type:c,parent:i.parent=l},m=0;m<s.length;m++)p.push({type:y,title:s[m],parent:h,prevent:!0,selected:r._getFloatGroupItemSelection(m),detachedContent:u[m],docked:!0});h.items=p,delete i[v],i[o]="50%",h[o]="50%",l.items=[i],l.items.splice(0+e,0,h)}n.render();for(var _=n._find(h.widget,".jqx-ribbon-content-section"),f=0;f<_.length;f++)for(var q=O(_[f]),x=u[f],j=0;j<x.length;j++)u[f][j].appendTo(q);r._clearTextSelection(),n._raiseEvent("1",{item:i}),r._raiseEvent("1",{position:a,item:h})},_setOptimalDimension:function(e,t,o){var a="width"===e?"minWidth":"minHeight",r=o[a]||this.base["minGroup"+e.charAt(0).toUpperCase()+e.slice(1)],n=o.parent.widget[e](),i=parseFloat(o[e])-r/n*100,d=t[e]/n*100;i<d?(t[e]=parseFloat(o[e])/2+"%",t[a]=parseInt(parseFloat(t[e])/100*n,10),o[e]=parseFloat(o[e])-parseFloat(t[e])+"%",(i=parseInt(parseFloat(o[e])/100*n,10))<r&&(o[a]=i)):(t[e]=d+"%",o[e]=parseFloat(o[e])-d+"%")},_dropToEmptyLayoutGroup:function(e){var t=this._dropToGroup.settings,o={type:e.groupType,items:[],parent:t},a=e.content;"horizontal"===t.orientation?o.width="100%":"vertical"===t.orientation&&(o.height="100%");for(var r=0;r<e.title.length;r++){var n={type:e.itemType,title:e.title[r],parent:o,prevent:!0,selected:this._getFloatGroupItemSelection(r),detachedContent:a[r],docked:!0};o.items.push(n)}t.items.push(o),this.base.render();for(var i=this.base._find(o.widget,".jqx-ribbon-content-section"),d=0;d<i.length;d++)for(var l=0;l<a[d].length;l++)a[d][l].appendTo(i[d])},_getFloatGroupItemSelection:function(e){e=!!this._draggedWindow.fromPanel||this._draggedWindow.element.current.items[0].items[e].selected;return e},_createEdgeOverlays:function(){function e(e){var t="left"===e||"right"===e?"horizontal":"vertical",o='<div class="'+r.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-mini-window-edge-"+t)+'"><div class="'+r.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header jqx-docking-layout-overlay-inner-square-header-"+t)+'"></div><div class="'+r.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-inner-square-content jqx-docking-layout-overlay-inner-square-content-"+t)+'"></div></div>',t='<div class="'+r.toThemeProperty("jqx-docking-layout-overlay-square-edge-arrow-container jqx-docking-layout-overlay-square-edge-arrow-container-"+t)+'"><div class="'+r.toThemeProperty("jqx-fill-state-pressed jqx-docking-layout-overlay-square-edge-arrow jqx-docking-layout-overlay-square-edge-arrow-"+e)+'"></div></div>',e="left"===e||"top"===e?o+t:t+o,t=document.createElement("div");return t.className=r.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-edge"),t.innerHTML='<div class="'+r.toThemeProperty("jqx-docking-layout-overlay-inner-square-edge")+'">'+e+"</div>",(r._ie7?document.body:r.element).appendChild(t),a._edgeOverlays.push(t),O(t)}var a=this,r=a.base;a._edgeOverlays=[],a._leftOverlay=e("left"),a._rightOverlay=e("right"),a._topOverlay=e("top"),a._bottomOverlay=e("bottom"),a._addEdgeOverlaysHandlers()},_addEdgeOverlaysHandlers:function(){function t(e,t,o,a){r._dropOverlay.style.display="block",r._dropOverlay.style.width=e,r._dropOverlay.style.height=t,O(r._dropOverlay).offset({left:o,top:a})}var o,r=this,a=r.base,e=a.element.id,n=!1;function i(e){switch(o=a.host.offset(),e=r._closest(O(e),"jqx-docking-layout-overlay-square-edge")[0],n=e){case r._leftOverlay[0]:t("100px",a.host.height()+"px",o.left,o.top);break;case r._rightOverlay[0]:t("100px",a.host.height()+"px",o.left+a.host.width()-100,o.top);break;case r._topOverlay[0]:t(a.host.width()+"px","100px",o.left,o.top);break;case r._bottomOverlay[0]:t(a.host.width()+"px","100px",o.left,o.top+a.host.height()-100);break;default:a._touchDevice&&(n=!1)}}function d(e){switch(e){case r._leftOverlay[0]:r._dropToEdge("left",0,"horizontal","width");break;case r._rightOverlay[0]:r._dropToEdge("right",a.layout[0].items.length-1,"horizontal","width");break;case r._topOverlay[0]:r._dropToEdge("top",0,"vertical","height");break;case r._bottomOverlay[0]:r._dropToEdge("bottom",a.layout[0].items.length-1,"vertical","height")}}a._touchDevice?(r.addHandler(O(document),"touchmove.jqxDockingLayout"+e,function(e){r._windowDragged&&(e.preventDefault(),e=e.originalEvent.touches[0],i(O(document.elementFromPoint(e.pageX,e.pageY))))}),r.addHandler(O(document),"touchend.jqxDockingLayout"+e,function(){!1!==n&&(d(n),n=!1)})):O.each(r._edgeOverlays,function(){r.addHandler(this,"mouseenter.jqxDockingLayout"+e,function(){i(this)}),r.addHandler(this,"mouseleave.jqxDockingLayout"+e,function(){r._dropOverlay.style.display="none"}),r.addHandler(this,"mouseup.jqxDockingLayout"+e,function(){d(this)})})},_dropToEdge:function(e,t,o,a){var r,n=this,i=n.base,d=i.layout[0],l=n._getDraggedWindowInformation(),s=l.title,u=l.content,c=l.groupType,y=l.itemType,p=[];if(n._removeFloatGroupObject(n._draggedWindow.element.current),d.orientation===o){(h={type:c,parent:d})[a]=n._draggedWindow.element[a]();for(var g=0;g<s.length;g++)p.push({type:y,title:s[g],parent:h,prevent:!0,selected:n._getFloatGroupItemSelection(g),detachedContent:u[g],docked:!0});h.items=p,r=d.items[t],n._setOptimalDimension(a,h,r),"left"===e||"top"===e?d.items.splice(t,0,h):d.items.push(h)}else{"width"===a?v="height":v="width";for(var v,l={type:"layoutGroup",orientation:o,parent:d.parent,index:d.index},h={type:c,parent:l},m=0;m<s.length;m++)p.push({type:y,title:s[m],parent:h,prevent:!0,selected:n._getFloatGroupItemSelection(m),detachedContent:u[m],docked:!0});h.items=p,delete d[v],delete h[v],h[a]="50%",d[a]="50%",(d.parent=l).items="left"===e||"top"===e?[h,d]:[d,h],i.layout[0]=l,r=d}i.render();for(var _=i._find(h.widget,".jqx-ribbon-content-section"),f=0;f<_.length;f++)for(var q=0;q<u[f].length;q++)u[f][q].appendTo(_[f]);n._clearTextSelection(),i._raiseEvent("1",{item:r}),n._raiseEvent("1",{position:e+"-edge",item:h}),n._draggedWindow.element.remove(),n._hideOverlays()},_showEdgeOverlays:function(){var e=this,t=e.base,o=t.host.width(),a=t.host.height(),r=t.host.offset(),n=!0,i=!0,d=!0,l=!0;!function e(t){var o,a;t.items&&0!==t.items.length&&(o=t.orientation,a=t.items[0],t=t.items[t.items.length-1],"horizontal"===o?("autoHideGroup"===a.type?n=n&&!1:"layoutGroup"===a.type&&e(a),"autoHideGroup"===t.type?i=i&&!1:"layoutGroup"===t.type&&e(t)):"vertical"===o&&("autoHideGroup"===a.type?d=d&&!1:"layoutGroup"===a.type&&e(a),"autoHideGroup"===t.type?l=l&&!1:"layoutGroup"===t.type&&e(t)))}(t.layout[0]),n&&(e._leftOverlay[0].style.display="block"),i&&(e._rightOverlay[0].style.display="block"),d&&(e._topOverlay[0].style.display="block"),l&&(e._bottomOverlay[0].style.display="block"),e._leftOverlay.offset({left:r.left+5,top:r.top+a/2-20}),e._rightOverlay.offset({left:r.left+o-40,top:r.top+a/2-20}),e._topOverlay.offset({left:r.left+o/2-20,top:r.top+5}),e._bottomOverlay.offset({left:r.left+o/2-20,top:r.top+a-40})},_hideOverlays:function(){var e=this,t=e.base;!(e._windowDragged=!1)===e._oldIE&&clearInterval(e._oldIEInterval),t.resizable&&setTimeout(function(){e.base._overlay[0].style.display="none"},0),e._overlay[0].style.display="none";for(var o=0;o<e._edgeOverlays.length;o++)e._edgeOverlays[o].style.display="none";e._dropOverlay.style.display="none"},_getDraggedWindowInformation:function(){var e,t,o=this,a=o.base,r=[],n=[];if(o._draggedWindow.fromPanel)r.push(o._draggedWindow.title),n.push(a._detachChildNodes(a._find(o._draggedWindow.element,".jqx-window-content")[0]));else for(var i=a._find(o._draggedWindow.element,".jqx-ribbon-content-section"),d=0;d<o._draggedWindow.element.current.items[0].items.length;d++){var l=o._draggedWindow.element.current.items[0].items[d];r.push(l.title),n.push(a._detachChildNodes(i[d]))}return t="documentGroup"===o._draggedWindow.fromGroup.type?(e="documentGroup","documentPanel"):(e="tabbedGroup","layoutPanel"),{title:r,content:n,groupType:e,itemType:t}},_removeFloatGroupObject:function(e){var t=this.base;e.removed=!0,t._updateLayout(t.layout)},_trackFloatGroups:function(){for(var e=this.base,t=1;t<e.layout.length;t++){var o,a=e.layout[t];"tabbedGroup"===a.items[0].type&&(o={element:o=a.items[0].widget,width:o.width(),height:o.height(),offset:o.offset(),settings:a.items[0]},a._overlayGroup=o,e._overlayGroups.push(o))}},_updateOverlayGroup:function(e){var t;e&&(t=e.element,e.width=t.width(),e.height=t.height(),e.offset=t.offset(),e.self=!1)},_updateOverlayGroups:function(){for(var e=this.base._overlayGroups,t=e.length-1;0<=t;t--)!0===e[t].removed&&e.splice(t,1)},_clearTextSelection:function(){try{document.selection?document.selection.empty():window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())}catch(e){}},_closest:function(e,t){if(e.hasClass(t))return e;for(var o=O(e[0].parentNode);null!==o[0]&&"#document"!==o[0].nodeName;){if(o.hasClass(t))return o;o=O(o[0].parentNode)}}})}(jqxBaseFramework);