!function(m){m.jqx.jqxWidget("jqxBulletChart","",{}),m.extend(m.jqx._jqxBulletChart.prototype,{defineInstance:function(){var t={width:500,height:100,barSize:"50%",ranges:[{startValue:0,endValue:50,color:"#000000",opacity:.7},{startValue:50,endValue:80,color:"#000000",opacity:.5},{startValue:80,endValue:100,color:"#000000",opacity:.3}],pointer:{value:65,label:"Value",size:"25%",color:""},target:{value:85,label:"Target",size:4,color:""},ticks:{position:"far",interval:20,size:10},title:"Title",description:"Description",orientation:"horizontal",labelsFormat:null,labelsFormatFunction:null,animationDuration:400,showTooltip:!0,tooltipFormatFunction:null,disabled:!1,rtl:!1,events:["change"]};return this===m.jqx._jqxBulletChart.prototype||m.extend(!0,this,t),t},createInstance:function(t){if(!m.jqx.dataAdapter)throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxdata.js'.");this._setDefaultValues(),this.render();var i=this;m.jqx.utilities.resize(this.host,function(){i._timer&&clearTimeout(i._timer),i._timer=setTimeout(function(){var t=i.animationDuration;i.animationDuration=0,i.render(),setTimeout(function(){i.animationDuration=t},0)},10)},!1,!0)},render:function(){0<this.host.children().length&&(this._removeHandlers(),1==this.showTooltip&&this.host.jqxTooltip("destroy"),this.host.empty()),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-bulletchart")),this.host.width(this.width),this.host.height(this.height);var t,i,e,s,o,r,l,a,h,n=this.host.width(),c=this.host.height(),d=this.rtl?"rtl":"ltr",d=("horizontal"==this.orientation?t=m("<div style='position: absolute; visibility: hidden; padding: 5px;'><div class='"+this.toThemeProperty("jqx-bulletchart-title")+"' style='direction: "+d+";'>"+this.title+"</div><div class='"+this.toThemeProperty("jqx-bulletchart-description")+"' style='direction: "+d+";'>"+this.description+"</div></div>"):"vertical"==this.orientation&&(t=m("<div style='position: absolute; visibility: hidden; padding-bottom: 15px;'><div class='"+this.toThemeProperty("jqx-bulletchart-title")+"' style='width: "+n+"px; direction: "+d+";'>"+this.title+"</div><div class='"+this.toThemeProperty("jqx-bulletchart-description")+"' style='direction: "+d+";'>"+this.description+"</div></div>")),this.host.append(t),t.outerWidth()),p=t.outerHeight();if(t.remove(),"horizontal"==this.orientation?(r="jqx-bulletchart-title-container-horizontal",l="jqx-bulletchart-chart-container-horizontal",a=this._checkPercentage(this.barSize,this.host),h=0,s=n-(o=d),e=i=this.barSize,this.width&&0<=this.width.toString().indexOf("%")&&(s=parseFloat(parseFloat(100*s)/n).toString()+"%",o=parseFloat(parseFloat(100*o)/n).toString()+"%",this._percentageWidth=!0)):"vertical"==this.orientation&&(r="jqx-bulletchart-title-container-vertical",l="jqx-bulletchart-chart-container-vertical",a=0,o="100%",i=p,h=this._checkPercentage(this.barSize,this.host),s=this.barSize,e=c-i),(0==this.rtl||1==this.rtl&&"vertical"==this.orientation)&&this.host.append("<div id='"+this.element.id+"titleContainer' class='"+r+"' style='top: "+a+";'></div>"),this.host.append("<div id='"+this.element.id+"ChartContainer' class='"+l+"' style='top: "+a+"; left: "+h+";'></div>"),1==this.rtl&&"horizontal"==this.orientation&&this.host.append("<div id='"+this.element.id+"titleContainer' class='"+r+"' style='top: "+a+";'></div>"),this._titleContainer=m("#"+this.element.id+"titleContainer"),this._chartContainer=m("#"+this.element.id+"ChartContainer"),this._titleContainer.css({width:o,height:i}),this._chartContainer.css({width:s,height:e}),this._min=this.ranges[0].startValue,this._max=this.ranges[this.ranges.length-1].endValue,this._interval=this._max-this._min,this._valueToPixelsHorizontal=this._chartContainer.width()/this._interval,this._valueToPixelsVertical=this._chartContainer.height()/this._interval,this._checkValues(),this._appendRanges(),this._appendPointerAndTarget(),this._appendTitleAndDescription(),"none"!=this.ticks.position&&this._appendTicksAndLabels(),1==this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),1==this.showTooltip){if(null==this.host.jqxTooltip)throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxtooltip.js'.");this._initializeTooltip(),this.host.data().jqxWidget=this}this._updateValue(this.pointer.value,0,!0)},refresh:function(t){t||this.render()},val:function(t){if(0==arguments.length||null!=t&&"object"==typeof t)return this.pointer.value;t>this._max?t=this._max:t<this._min&&(t=this._min),t!=this.pointer.value&&(this._updateValue(t,this.pointer.value),this.pointer.value=t,1==this.showTooltip&&this._updateTooltip())},destroy:function(){m.jqx.utilities.resize(this.host,null,!0),this._removeHandlers(),1==this.showTooltip&&this.host.jqxTooltip("destroy"),this.host.remove()},propertyChangedHandler:function(s,o,e,r){if(e!=r||r instanceof Object){function t(){m.each(e,function(t,i){null==r[t]&&(s[o][t]=i)})}var l=!0;switch(o){case"barSize":break;case"ranges":m.each(e,function(e,t){m.each(t,function(t,i){void 0!==r[e]&&null==r[e][t]&&(s[o][e][t]=i)})}),this._setDefaultValues();break;case"pointer":return t(),void this._updatePointer(r,e);case"target":return t(),void this._updateTarget(r,e);case"ticks":l=!1,t(),m.each(e,function(t,i){e[t]!=s[o][t]&&(l=!0)});break;case"showTooltip":if(1==r){if(null==this.host.jqxTooltip)throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxtooltip.js'.");this._initializeTooltip()}else this._removeHandlers(),this.host.jqxTooltip("destroy");break;case"animationDuration":return;case"tooltipFormatFunction":return void this._updateTooltip();case"disabled":return void(1==r?this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")))}1==l&&this.render()}},_raiseEvent:function(t,i){t=this.events[t],t=new m.Event(t);t.owner=this,t.args=i;try{var e=this.host.trigger(t)}catch(t){}return e},_removeHandlers:function(){var t=m("#"+this.element.id+"Pointer, #"+this.element.id+"Target");this.removeHandler(t,"mouseenter.bulletchart"+this.element.id),this.removeHandler(t,"mouseleave.bulletchart"+this.element.id)},_setDefaultValues:function(){for(var t=this.ranges,i=this.ranges.length,e=0;e<i;e++){if(null==t[e].startValue||null==t[e].endValue)throw new Error("jqxBulletChart: Each range must have its startValue and endValue set.");null==t[e].color&&(this.ranges[e].color="#000000"),null==t[e].opacity&&(this.ranges[e].opacity=1-1/i*e)}var s=this.pointer,s=(null==s.value&&(this.pointer.value=65),null==s.label&&(this.pointer.label="Value"),null==s.size&&(this.pointer.size="25%"),null==s.color&&(this.pointer.color=""),this.target),s=(null==s.value&&(this.target.value=85),null==s.label&&(this.target.label="Target"),null==s.size&&(this.target.size=5),null==s.color&&(this.target.color=""),this.ticks);null==s.position&&(this.ticks.position="near"),null==s.interval&&(this.ticks.interval=20),null==s.size&&(this.ticks.size=10)},_checkValues:function(){this.pointer.value>this._max?this.pointer.value=this._max:this.pointer.value<this._min&&(this.pointer.value=this._min),this.target.value>this._max?this.target.value=this._max:this.target.value<this._min&&(this.target.value=this._min)},_appendRanges:function(){for(var t="",i=this.ranges.length,e=0;e<i;e++){var s,o,r,l=this.ranges[e];"horizontal"==this.orientation?(s=this.rtl?"right":"left",o=(l.startValue-this._min)*this._valueToPixelsHorizontal,r=(l.endValue-l.startValue)*this._valueToPixelsHorizontal,s="<div class='"+this.toThemeProperty("jqx-bulletchart-range")+" "+this.toThemeProperty("jqx-bulletchart-range-horizontal")+"' style='"+s+": "+o+"px; width: "+r+"px; background-color: "+l.color+"; opacity: "+l.opacity+"'></div>"):"vertical"==this.orientation&&(o=(l.startValue-this._min)*this._valueToPixelsVertical,r=(l.endValue-l.startValue)*this._valueToPixelsVertical,s="<div class='"+this.toThemeProperty("jqx-bulletchart-range")+" "+this.toThemeProperty("jqx-bulletchart-range-vertical")+"' style='bottom: "+o+"px; height: "+r+"px; background-color: "+l.color+"; opacity: "+l.opacity+"'></div>"),t+=s}this._chartContainer.append(t)},_appendPointerAndTarget:function(){var t,i,e,s,o,r,l="",a=this.element.id+"Pointer",h=this.element.id+"Target",n=this.pointer.size,c=this.target.value,d=this.target.size,p=0<c?0:parseInt(d),u=0<this.pointer.color.length?"":this.toThemeProperty("jqx-fill-state-pressed"),v=0<this.target.color.length?"":this.toThemeProperty("jqx-fill-state-pressed");"horizontal"==this.orientation?(t=this._normaliseValue(n),r=this._checkPercentage(n,this._chartContainer),i=this.rtl?"right":"left",o=(e=(c-this._min)*this._valueToPixelsHorizontal-p)+parseInt(d)-this._chartContainer.width(),e<0?e=0:0<o&&(e-=o),s=this._normaliseValue(d),l=(l+="<div class='"+v+" "+this.toThemeProperty("jqx-bulletchart-target")+" "+this.toThemeProperty("jqx-bulletchart-target-horizontal")+"' id='"+h+"' style='"+i+": "+e+"px; width: "+s+"; background-color: "+this.target.color+"'></div>")+"<div class='"+u+" "+this.toThemeProperty("jqx-bulletchart-pointer")+"' id='"+a+"' style='top: "+r+"; height: "+t+"; background-color: "+this.pointer.color+"'></div>"):"vertical"==this.orientation&&(this._chartContainer.width(),i=this._normaliseValue(n),e=this._checkPercentage(n,this._chartContainer),o=(s=(c-this._min)*this._valueToPixelsVertical-p)+parseInt(d)-this._chartContainer.height(),s<0?s=0:0<o&&(s-=o),r=this._normaliseValue(d),l=(l+="<div class='"+v+" "+this.toThemeProperty("jqx-bulletchart-target")+" "+this.toThemeProperty("jqx-bulletchart-target-vertical")+"' id='"+h+"' style='bottom: "+s+"px; height: "+r+"; background-color: "+this.target.color+"'></div>")+"<div class='"+u+" "+this.toThemeProperty("jqx-bulletchart-pointer")+"' id='"+a+"' style='left: "+e+"; width: "+i+"; background-color: "+this.pointer.color+"'></div>"),this._chartContainer.append(l)},_updatePointer:function(t,i){var e,s,o,r=m("#"+this.element.id+"Pointer");t.value>this._max?this.pointer.value=this._max:t.value<this._min&&(this.pointer.value=this._min),t.value!=i.value&&(this._updateValue(t.value,i.value),1==this.showTooltip&&this._updateTooltip()),t.label!=i.label&&1==this.showTooltip&&this._updateTooltip(),t.size!=i.size&&(e=t.size,"horizontal"==this.orientation?(s=this._checkPercentage(e,this._chartContainer),o=this._normaliseValue(e),r.css({top:s,height:o})):"vertical"==this.orientation&&(s=this._checkPercentage(e,this._chartContainer),o=this._normaliseValue(e),r.css({left:s,width:o}))),t.color!=i.color&&(""==t.color?(r.css("background-color",""),r.addClass(this.toThemeProperty("jqx-fill-state-pressed"))):(r.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),r.css("background-color",t.color)))},_updateTarget:function(t,i){var e,s,o,r,l,a=m("#"+this.element.id+"Target");t.value>this._max?this.target.value=this._max:t.value<this._min&&(this.target.value=this._min),t.value==i.value&&t.size==i.size||(e=t.value,s=parseInt(t.size),o=0<e?0:s,"horizontal"==this.orientation?(this.rtl,l=(r=(e-this._min)*this._valueToPixelsHorizontal-o)+s-this._chartContainer.width(),r<0?r=0:0<l&&(r-=l),0==this.rtl?a.css("left",r):a.css("right",r),a.width(s)):"vertical"==this.orientation&&(l=(r=(e-this._min)*this._valueToPixelsVertical-o)+s-this._chartContainer.height(),r<0?r=0:0<l&&(r-=l),a.css({bottom:r,height:s})),1==this.showTooltip&&this._updateTooltip()),t.label!=i.label&&1==this.showTooltip&&this._updateTooltip(),t.color!=i.color&&(""==t.color?(a.css("background-color",""),a.addClass(this.toThemeProperty("jqx-fill-state-pressed"))):(a.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),a.css("background-color",t.color)))},_appendTitleAndDescription:function(){var t="horizontal"==this.orientation?1==this.rtl?this.toThemeProperty("jqx-bulletchart-title-description-rtl"):this.toThemeProperty("jqx-bulletchart-title-description-ltr"):this.toThemeProperty("jqx-bulletchart-title-description-vertical"),i=this.rtl?"rtl":"ltr",t="<div id='"+this.element.id+"Title' class='"+this.toThemeProperty("jqx-bulletchart-title")+" "+t+"' style='direction: "+i+";'>"+this.title+"</div><div id='"+this.element.id+"Description' class='"+this.toThemeProperty("jqx-bulletchart-description")+" "+t+"' style='direction: "+i+";'>"+this.description+"</div>",i=m("<div style='position: absolute; visibility: hidden;'>"+t+"</div>"),e=(this._titleContainer.append(i),i.children()),e=m(e[0]).height()+m(e[1]).height();i.remove(),i="horizontal"==this.orientation?0==this.rtl?this.toThemeProperty("jqx-bulletchart-title-inner-container")+" "+this.toThemeProperty("jqx-bulletchart-title-inner-container-ltr"):this.toThemeProperty("jqx-bulletchart-title-inner-container")+" "+this.toThemeProperty("jqx-bulletchart-title-inner-container-rtl"):"",this._titleContainer.append("<div class='"+i+"' style='height: "+e+"px;'>"+t+"</div>")},_appendTicksAndLabels:function(){var t=m("<div style='position: absolute; visibility: hidden;'></div>"),i=(this._chartContainer.append(t),""),e=this._min<0,s=this.ticks.size;if("horizontal"==this.orientation){var o,r=this._titleContainer.width(),l=this._chartContainer.offset().top-this.host.offset().top;"both"!=this.ticks.position&&"far"!=this.ticks.position||(o=this._chartContainer.height()+l);for(var a=0;a<=this._interval;a+=this.ticks.interval){var h=a*this._valueToPixelsHorizontal+r,n=(a+this.ticks.interval>this._interval&&--h,e&&a+this._min==0&&(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-horizontal")+" "+this.toThemeProperty("jqx-bulletchart-zero-tick")+"' style='top: "+l+"px; "+d+": "+h+"px; height: "+this._chartContainer.height()+"px;'></div>",e=!1),this._labelValue(a)),c=(t.html(n),h-t.width()/2),d=this.rtl?"right":"left";"both"!=this.ticks.position&&"far"!=this.ticks.position||(i=(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-horizontal")+"' style='top: "+o+"px; "+d+": "+h+"px; height: "+s+"px;'></div>")+"<div class='"+this.toThemeProperty("jqx-bulletchart-labels")+"' style='top: "+(o+s+2)+"px; "+d+": "+c+"px;'>"+n+"</div>"),"both"!=this.ticks.position&&"near"!=this.ticks.position||(i=(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-horizontal")+"' style='top: "+(l-s)+"px; "+d+": "+h+"px; height: "+s+"px;'></div>")+"<div class='"+this.toThemeProperty("jqx-bulletchart-labels")+"' style='top: "+(l-(s+t.height()+2))+"px; "+d+": "+c+"px;'>"+n+"</div>")}}else if("vertical"==this.orientation){var p,u=this._chartContainer.offset().left-this.host.offset().left;"both"!=this.ticks.position&&"far"!=this.ticks.position||(p=this._chartContainer.width());for(a=0;a<=this._interval;a+=this.ticks.interval){var v=a*this._valueToPixelsVertical;a+this.ticks.interval>this._interval&&--v,e&&a+this._min==0&&(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-vertical")+" "+this.toThemeProperty("jqx-bulletchart-zero-tick")+"' style='left: "+u+"px; bottom: "+v+"px; width: "+p+"px;'></div>",e=!1),"both"!=this.ticks.position&&"near"!=this.ticks.position||(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-vertical")+"' style='left: "+(u-s)+"px; bottom: "+v+"px; width: "+s+"px;'></div>",n=this._labelValue(a,"near"),t.html(n),c=t.height()/2-1,i+="<div class='"+this.toThemeProperty("jqx-bulletchart-labels")+"' style='left: "+(u-(s+t.width()+2))+"px; bottom: "+(v-c)+"px;'>"+n+"</div>"),"both"!=this.ticks.position&&"far"!=this.ticks.position||(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-vertical")+"' style='left: "+(p+u)+"px; bottom: "+v+"px; width: "+s+"px;'></div>",n=this._labelValue(a,"far"),t.html(n),c=t.height()/2-1,i+="<div class='"+this.toThemeProperty("jqx-bulletchart-labels")+"' style='left: "+(p+u+s+2)+"px; bottom: "+(v-c)+"px;'>"+n+"</div>")}}this.host.append(i),t.remove()},_labelValue:function(t,i){t+=this._min,i=this.labelsFormatFunction?this.labelsFormatFunction(t,i):m.jqx.dataFormat.formatnumber(t,this.labelsFormat);return i},_initializeTooltip:function(){var i=this,t=this._tooltipContent(),t=(this.host.jqxTooltip({theme:this.theme,position:"mouse",content:t,trigger:"none",autoHide:!1,rtl:this.rtl}),this.host.jqxTooltip("getInstance").val=m.proxy(this.val,this),m("#"+this.element.id+"Pointer, #"+this.element.id+"Target"));this.addHandler(t,"mouseenter.bulletchart"+this.element.id,function(t){0==i.disabled&&(i.host.jqxTooltip("open",t.pageX,t.pageY),(t.target.id==i.element.id+"Pointer"&&""==i.pointer.color||t.target.id==i.element.id+"Target"&&""==i.target.color)&&(m(t.target).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),m(t.target).addClass(i.toThemeProperty("jqx-fill-state-hover"))))}),this.addHandler(t,"mouseleave.bulletchart"+this.element.id,function(t){0==i.disabled&&(i.host.jqxTooltip("close"),(t.target.id==i.element.id+"Pointer"&&""==i.pointer.color||t.target.id==i.element.id+"Target"&&""==i.target.color)&&(m(t.target).removeClass(i.toThemeProperty("jqx-fill-state-hover")),m(t.target).addClass(i.toThemeProperty("jqx-fill-state-pressed"))))})},_updateTooltip:function(){this.host.jqxTooltip({content:this._tooltipContent()})},_tooltipContent:function(){var t,i;return this.tooltipFormatFunction?this.tooltipFormatFunction(this.pointer.value,this.target.value):(t=m.jqx.dataFormat.formatnumber(this.pointer.value,this.labelsFormat),i=m.jqx.dataFormat.formatnumber(this.target.value,this.labelsFormat),"<div>"+this.pointer.label+": "+t+"</div><div>"+this.target.label+": "+i+"</div>")},_updateValue:function(s,o,t){function i(t,i,e){return 0<=n._min?("vertical"==t?c.css("bottom",0):1==n.rtl&&"horizontal"==t&&c.css("right",0),(s-n._min)*i):(e=0<=s?("horizontal"==t?1==n.rtl?(r="right",l="left"):r="left":"vertical"==t&&(r="bottom",l="top"),-n._min*i):("horizontal"==t?1==n.rtl?r="left":(r="right",l="left"):"vertical"==t&&(r="top"),e+n._min*i),c.css(r,e),l&&c.css(l,""),s*o<0&&("horizontal"==t?c.width(0):"vertical"==t&&c.height(0)),Math.abs(s*i))}function e(){t||n._raiseEvent("0")}var r,l,a,h,n=this,c=m("#"+this.element.id+"Pointer");"horizontal"==this.orientation?(a=i("horizontal",this._valueToPixelsHorizontal,this._chartContainer.width()),setTimeout(function(){c.animate({width:a},n.animationDuration,e)},0)):"vertical"==this.orientation&&(h=i("vertical",this._valueToPixelsVertical,this._chartContainer.height()),setTimeout(function(){c.animate({height:h},n.animationDuration,e)},0))},_checkPercentage:function(t,i){var e,s=-1;return-1==(s=t.indexOf?t.indexOf("%"):s)?("horizontal"==this.orientation?e=i.height():"vertical"==this.orientation&&(e=i.width()),(e-((i=t).indexOf&&-1!=t.indexOf("px")?parseFloat(i.slice(0,t.indexOf("px"))):i))/2+"px"):(100-parseFloat(t.slice(0,s)))/2+"%"},_normaliseValue:function(t){return!t.indexOf||-1==t.indexOf("px")&&-1==t.indexOf("%")?t+"px":t}})}(jqxBaseFramework);