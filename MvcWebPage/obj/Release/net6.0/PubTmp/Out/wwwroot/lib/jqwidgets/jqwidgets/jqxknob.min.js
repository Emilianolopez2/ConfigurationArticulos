!function(_){_.jqx.jqxWidget("jqxKnob","",{}),_.extend(_.jqx._jqxKnob.prototype,{defineInstance:function(){var e={type:"circle",allowValueChangeOnClick:!0,allowValueChangeOnDrag:!0,allowValueChangeOnMouseWheel:!0,changing:null,dragEndAngle:-1,dragStartAngle:-1,disabled:!1,dial:{style:"transparent",innerRadius:0,outerRadius:0,gradientType:null,gradientStops:null,startAngle:null,endAngle:null},endAngle:360,height:400,labels:{type:"digits",step:null,rotate:!1,offset:null,style:"",visible:!1},marks:{type:"",thickness:1,size:"10%",colorProgress:"transparent",colorRemaining:"transparent",minorInterval:1,majorInterval:5,offset:"80%",majorSize:"15%"},min:0,max:100,progressBar:{size:"10%",offset:"60%",color:"transparent",background:"transparent"},pointer:{color:{color:"transparent",border:null,gradientType:null,gradientStops:null},thickness:1,size:"",type:"",visible:!1},pointerGrabAction:"normal",renderEngine:"",rotation:"clockwise",startAngle:0,spinner:{color:"transparent",innerRadius:0,outerRadius:0,marks:{step:1,rotate:!1,color:"transparent",size:0,steps:10,thickness:1,offset:0}},style:{fill:"transparent",stroke:"transparent"},_touchEvents:{mousedown:_.jqx.mobile.getTouchEventName("touchstart"),mouseup:_.jqx.mobile.getTouchEventName("touchend"),mousemove:_.jqx.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave",click:_.jqx.mobile.getTouchEventName("touchstart")},step:1,snapToStep:!0,value:0,width:400};return this===_.jqx._jqxKnob.prototype||_.extend(!0,this,e),e},createInstance:function(){var e=this;e._hostInit(),e._ie8Plugin(),e._validateProperties(),e._initValues(),e._refresh(),_.jqx.utilities.resize(e.host,function(){e.widgetSize=Math.min(e.host.width(),e.host.height()),e._refresh()})},_getEvent:function(e){return this._isTouchDevice?this._touchEvents[e]+".jqxKnob"+this.element.id:e+".jqxKnob"+this.element.id},_ie8Plugin:function(){"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e){for(var r=0;r<this.length;r++)e.apply(this,[this[r],r,this])}),window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){var r=/(\-([a-z]){1})/g;return r.test(e="float"==e?"styleFloat":e)&&(e=e.replace(r,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]||null},this})},createColorGradient:function(e,r,t){return this._getGradient(e,r,t)},destroy:function(){var e=this;e.removeHandler(_(document),"mousemove.jqxKnob"+e.host[0].id),e.removeHandler(_(document),"blur.jqxKnob"+e.host[0].id),e.removeHandler(_(document),"mouseup.jqxKnob"+e.host[0].id),e.host.empty(),e.host.remove()},propertiesChangedHandler:function(e,r,t){t.width&&t.height&&2==Object.keys(t).length&&e._refresh()},propertyChangedHandler:function(e,r,t,n){e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length||("disabled"===r&&e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")),"value"===r?e._setValue(n,"propertyChange"):(e._validateProperties(),e._refresh()))},val:function(e){if(0==arguments.length)return this.value;this._setValue(e,null)},_isPointerGrabbed:!1,_pointerGrabbedIndex:-1,_attatchPointerEventHandlers:function(){var i=this,r=(i.addHandler(i.host,this._getEvent("mousedown"),function(e){if("pointer"!==i.pointerGrabAction||e.target.id===i._pointerID){if(i._isTouchDevice&&(r=_.jqx.position(e),e.clientX=r.left,e.clientY=r.top),"progressBar"===i.pointerGrabAction){var r={x:e.clientX,y:e.clientY},t=i.host[0].getBoundingClientRect(),n=i.widgetSize,t={x:t.left+n/2,y:t.top+n/2},a=i._calculateAngleFromCoordinates(r,t,i.rotation),r=i._calculateDistance(r,t);if(a<i.startAngle&&(a+=360),a>i.endAngle&&a-i.endAngle!=360+i.startAngle-a)return;t=i._getScale(i.progressBar.offset,"w",n/2),a=i._getScale(i.progressBar.size,"w",n/2);if(r<t||t+a<r)return}return(i._isPointerGrabbed=!0)===i.allowValueChangeOnClick&&i._mouseMovePointer(e),e.preventDefault(),e.stopPropagation(),!1}}),null);i.addHandler(_(document),this._getEvent("mousemove"),function(e){if(i.allowValueChangeOnDrag&&(r&&clearTimeout(r),r=setTimeout(function(){i._mouseMovePointer(e)}),i._isPointerGrabbed))return!1}),i.addHandler(_(document),"blur.jqxKnob"+i.host[0].id,function(){i._isPointerGrabbed=!1,i._pointerGrabbedIndex=-1}),i.addHandler(_(document),this._getEvent("mouseup"),function(e){i._isPointerGrabbed&&(i._isPointerGrabbed=!1,i._pointerGrabbedIndex=-1,i._raiseEvent(0,{originalEvent:e,value:i.value}))}),i.addHandler(i.host,"wheel",function(e){var r;if(i.allowValueChangeOnMouseWheel)return r=0,(e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?r=e.wheelDelta/120:e.detail?r=-e.detail/3:e.originalEvent&&e.originalEvent.deltaY&&(r=e.originalEvent.deltaY),0<r?i._increment():i._decrement(),!1})},_mouseMovePointer:function(e){var r=this;if(!r.disabled&&r._isPointerGrabbed){r._isTouchDevice&&(t=_.jqx.mobile.getTouches(e)[0],e.clientX=parseInt(t.clientX),e.clientY=parseInt(t.clientY));var t={x:e.clientX,y:e.clientY},e=r.host[0].getBoundingClientRect(),n=r.widgetSize,e={x:e.left+n/2,y:e.top+n/2},n=r._calculateAngleFromCoordinates(t,e,r.rotation),a=r._calculateValueFromAngle(n,r.dragStartAngle,r.dragEndAngle,r.min,r.max);if(r.value.length&&-1===r._pointerGrabbedIndex)for(var i=0;i<r.value.length;i++){if(a<=r.value[i]){r._pointerGrabbedIndex=i;break}if(i===r.value.length-1)r._pointerGrabbedIndex=i;else if(a<=r.value[i+1]){var o=r.value[i]+(r.value[i+1]-r.value[i])/2;r._pointerGrabbedIndex=a<=o?i:i+1;break}}if(r.pointer&&1<r.pointer.length){if(1==r._pointerGrabbedIndex){var s=r._calculateAngleFromValue(r.value[0],r.dragStartAngle,r.dragEndAngle,r.min,r.max),l=r._calculateAngleFromValue(r.max,r.dragStartAngle,r.dragEndAngle,r.min,r.max);if((n=r._calculateAngleFromValue(a,r.dragStartAngle,r.dragEndAngle,r.min,r.max))<=s)return;if(l<=n)return}if(0==r._pointerGrabbedIndex){l=r._calculateAngleFromValue(r.value[1],r.dragStartAngle,r.dragEndAngle,r.min,r.max),s=r._calculateAngleFromValue(r.min,r.dragStartAngle,r.dragEndAngle,r.min,r.max);if((n=r._calculateAngleFromValue(a,r.dragStartAngle,r.dragEndAngle,r.min,r.max))<=s)return;if(l<=n)return}}if(r.changing)if(Array.isArray(r.value)){t=r.value.slice(0);if(t[r._pointerGrabbedIndex]=a,!1===r.changing(r.value,t))return}else if(!1===r.changing(r.value,a))return;r._setValue(a,"mouse")}},_getScale:function(e,r,t){return e&&0<=e.toString().indexOf("%")?(e=parseInt(e,10)/100,"object"==typeof t?t[r]()*e:t*e):parseInt(e,10)},_hostInit:function(){var e=this,r=(this._isTouchDevice=_.jqx.mobile.isTouchDevice(),e.host);r.width(e.width),r.height(e.height),r.css("position","relative"),e.host.addClass(e.toThemeProperty("jqx-widget jqx-knob")),-1==e.dragStartAngle&&(e.dragStartAngle=e.startAngle),-1==e.dragEndAngle&&(e.dragEndAngle=e.endAngle),e.dragStartAngle<e.startAngle&&(e.dragStartAngle=e.startAngle),e.dragEndAngle>e.endAngle&&(e.dragEndAngle=e.endAngle),e.widgetSize=Math.min(e.host.width(),e.host.height())},_initRenderer:function(e){if(_.jqx.createRenderer)return _.jqx.createRenderer(this,e);throw"jqxKnob: Please include a reference to jqxdraw.js"},_initValues:function(){var e=this;e.marks&&(e.marks.style&&""!==e.marks.style&&("line"!==e.marks.style||e.marks.thickness||(e.marks.thickness=1),e.marks.size||(e.marks.size="5%"),e.marks.offset||(e.marks.offset="85%")),e.marks.majorInterval&&void 0===e.marks.majorSize&&(e.marks.majorSize="10%")),e._marksList=e._getMarksArray(e.marks),e.spinner&&(e._spinnerMarksList=e._getMarksArray(e.spinner.marks))},_calculateAngleFromValue:function(e,r,t,n,a){return _.jqx.browser.msie&&_.jqx.browser.version<9?"circle"!=this.type?n!=a?parseInt((e-n)/(a-n)):0:n!=a?parseInt((e-n)/(a-n)*(t-r)):0:"circle"!=this.type?n!=a?(e-n)/(a-n):0:n!=a?(e-n)/(a-n)*(t-r):0},_calculateAngleFromCoordinates:function(e,r,t){var n=e.x-r.x,e=e.y-r.y;return 0<e?"clockwise"===t?90-180*Math.atan(n/e)/Math.PI:270+180*Math.atan(n/e)/Math.PI:e<0?"clockwise"===t?270-180*Math.atan(n/e)/Math.PI:90+180*Math.atan(n/e)/Math.PI:0<=n?0:180},_calculateValueFromAngle:function(e,r,t,n,a){e<r&&(e+=360);var i=n;return t<e?e-t<360+r-e&&(i=a):i=n+(e-r)*(a-n)/(t-r),i},_calculateDistance:function(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))},_drawBackground:function(){var e,r,t=this,n=t.renderer,a=t.widgetSize,i=a/2,o=t.style.strokeWidth||0;i-=o/2,t.style&&(e=t._getColor(t.style.fill),r=t._getColor(t.style.stroke),o=t.style.strokeWidth||1,"circle"!=t.type?n.rect(0,0,this.host.width(),this.host.height(),{fill:e,stroke:r,"stroke-width":o}):n.circle(a/2,a/2,i,{fill:e,stroke:r,"stroke-width":o}))},_drawDial:function(){var e,r,t,n,a,i,o,s,l,g=this;g.dial&&(e=g.renderer,n=r=(i=g.widgetSize)/2,a=g._getScale(g.dial.outerRadius,"w",i/2),i=g._getScale(g.dial.innerRadius,"w",i/2),o=null!=g.dial.startAngle&&null!=g.dial.endAngle?(t="clockwise"===g.rotation?360-g.dial.endAngle:g.dial.startAngle,"clockwise"===g.rotation?360-g.dial.startAngle:g.dial.endAngle):(t="clockwise"===g.rotation?360-g.endAngle:g.startAngle,"clockwise"===g.rotation?360-g.startAngle:g.endAngle),s=g._getColor(g.dial.style.fill),l=g._getColor(g.dial.style.stroke)||"",g=g.dial.style.strokeWidth||0,e.pieslice(n,r,i,a,t,o,0,{fill:s,stroke:l,"stroke-width":g}))},_getMarksArray:function(e){if(null==e)return[];function r(e){return parseFloat(e.toPrecision(12))}var t,n={},a=this.max,i=this.min,o=a-i,s=e.minorInterval,l=e.majorInterval;if(s){for(t=0;t<o;t+=s)n[r(i+t)]={type:"minor"};n[a]={type:"minor"}}if(l){for(t=0;t<o;t+=l)n[r(i+t)]={type:"major"};n[a]={type:"major"}}if(!s&&!l){var g=this.step;if(g){for(t=0;t<o;t+=g)n[r(i+t)]={type:"minor"};n[a]={type:"minor"}}}return n},_drawMarks:function(){var n,a,i,o,s,l,g,e,d=this;d.marks&&(n=d.renderer,a=d.widgetSize,s=d.marks&&null!=d.marks.colorRemaining?d.marks.colorRemaining:"transparent",s=d._getColor(s),d._dialMarks=[],l=d.marks.type||"line",g=d._getScale(d.marks.offset,"w",a/2),e=d._marksList,_.each(e,function(e,r){var t;d.dragEndAngle-d.dragStartAngle==360&&e==d.max||(o=d.dragStartAngle+d._calculateAngleFromValue(e,d.dragStartAngle,d.dragEndAngle,d.min,d.max),"circle"===l?(e=d._getScale(d.marks.size,"w",a/2),t=d._getPointerPosition({x:a/2,y:a/2},g,o,d.rotation),d._dialMarks.push(n.circle(t.x,t.y,e,{fill:s}))):"line"===l&&(i="major"===r.type&&null!==d.marks.majorSize&&void 0!==d.marks.majorSize?d._getScale(d.marks.majorSize,"w",a/2):d._getScale(d.marks.size,"w",a/2),t=d._getScale(d.marks.thickness,"w",a/2),e=d._getPointerPosition({x:a/2,y:a/2},g,o,d.rotation),r=d._getPointerPosition({x:a/2,y:a/2},g+i,o,d.rotation),_.jqx.browser.msie&&_.jqx.browser.version<9?d._dialMarks.push(n.line(parseInt(e.x),parseInt(e.y),parseInt(r.x),parseInt(r.y),{stroke:s,"stroke-width":t})):d._dialMarks.push(n.line(e.x,e.y,r.x,r.y,{stroke:s,"stroke-width":t}))))}))},_drawProgressBars:function(){var e=this;if(e.progressBar){e._progressBar=e._progressBar||[];for(var r=0;r<e._progressBar.length;r++)_(e._progressBar[r]).remove();if(e._progressBar=[],e._isArray(e.progressBar.style)){var t=e.value[0],n=e.value[1],a=e.progressBar.style[0],i=e.progressBar.style[1];if(e._progressBar.push(e._drawProgressBar(e.max,e.progressBar.background,"background")),e.progressBar.ranges)for(r=0;r<e.progressBar.ranges.length;r++){var o=e.progressBar.ranges[r].startValue,s=e.progressBar.ranges[r].endValue;e._progressBar.push(e._drawProgressBarFromToValue(o,s,e.progressBar.ranges[r],"background"))}e._progressBar.push(e._drawProgressBar(t,a)),e._progressBar.push(e._drawProgressBarFromEndToStart(n,i))}else{if(e._progressBar.push(e._drawProgressBar(e.max,e.progressBar.background,"background")),e.progressBar.ranges)for(r=0;r<e.progressBar.ranges.length;r++){o=e.progressBar.ranges[r].startValue,s=e.progressBar.ranges[r].endValue;e._progressBar.push(e._drawProgressBarFromToValue(o,s,e.progressBar.ranges[r],"background"))}e._progressBar.push(e._drawProgressBar(e.value,e.progressBar.style))}}},_drawProgressBarFromEndToStart:function(e,r){var t,n=this,a=n.renderer,i=n.widgetSize,o=n._getScale(n.progressBar.offset,"w",i/2),s=t=i/2,l=o,o=o+n._getScale(n.progressBar.size,"w",i/2),i=n._getColor(r.fill)||"transparent",g=n._getColor(r.stroke)||"transparent",e=n.dragStartAngle+n._calculateAngleFromValue(e,n.dragStartAngle,n.dragEndAngle,n.min,n.max),r=(n.dragStartAngle,r.strokeWidth||1);if(n.endAngle!=e)return"clockwise"===n.rotation?a.pieslice(s,t,l,o,360-n.endAngle,360-e,0,{fill:i,stroke:g,"stroke-width":r}):a.pieslice(s,t,l,o,void 0,e,0,{fill:i,stroke:g,"stroke-width":r})},_drawProgressBarFromToValue:function(e,r,t,n){var a,i=this,o=i.renderer,s=i.widgetSize,l=i._getScale(i.progressBar.offset,"w",s/2),g=i._getScale(i.progressBar.size,"w",s/2),d=s=s/2,c=l,u=l+g,h=i._getColor(t.fill)||"transparent",p=i._getColor(t.stroke)||"transparent",r=i.dragStartAngle+i._calculateAngleFromValue(r,i.dragStartAngle,i.dragEndAngle,i.min,i.max),e=i.dragStartAngle+i._calculateAngleFromValue(e,i.dragStartAngle,i.dragEndAngle,i.min,i.max);if(e!=r)return a="background"==n?0:1,n=t.strokeWidth||a,"circle"!=i.type?"rect"==i.type?(t=r*(this.host.height()-2*l),a=this.host.height()-2*l,o.rect(d-g/2,l+a-t,g,t,{fill:h,stroke:p,"stroke-width":n})):o.rect(l,s-g/2,this.host.width()-2*l,g,{fill:h,stroke:p,"stroke-width":n}):"clockwise"===i.rotation?o.pieslice(d,s,c,u,360-r,360-e,0,{fill:h,stroke:p,"stroke-width":n}):o.pieslice(d,s,c,u,e,r,0,{fill:h,stroke:p,"stroke-width":n})},_drawProgressBar:function(e,r,t){var n,a,i=this,o=i.renderer,s=i.widgetSize,l=i._getScale(i.progressBar.offset,"w",s/2),g=i._getScale(i.progressBar.size,"w",s/2),d=s=s/2,c=l,u=l+g,h=i._getColor(r.fill)||"transparent",p=i._getColor(r.stroke)||"transparent",e=i.dragStartAngle+i._calculateAngleFromValue(e,i.dragStartAngle,i.dragEndAngle,i.min,i.max),_=i.dragStartAngle;if(_!=e)return n="background"==t?0:1,t=r.strokeWidth||n,"circle"!=i.type?"rect"==i.type?(n=e*(this.host.height()-2*l),a=this.host.height()-2*l,o.rect(d-g/2,l+a-n,g,n,{fill:h,stroke:p,"stroke-width":t})):o.rect(l,s-g/2,this.host.width()-2*l,g,{fill:h,stroke:p,"stroke-width":t}):"clockwise"===i.rotation?o.pieslice(d,s,c,u,360-e,360-_,0,{opacity:r.opacity||1,fill:h,stroke:p,"stroke-width":t}):o.pieslice(d,s,c,u,_,e,0,{opacity:r.opacity||1,fill:h,stroke:p,"stroke-width":t})},_drawLabels:function(){var e=this,r=(e._labels=[],e.renderer),t=e.widgetSize;if(void 0===e.labels.visible&&(e.labels.visible=!0),!0===e.labels.visible){var n=e._getScale(e.labels.offset,"w",t/2),a=e.labels.type||"digits",i=e.labels.style,o=i&&i.fill?e._getColor(i.fill):"#333";if("digits"===a){var s=[];if(e.labels.customLabels)for(g=0;g<e.labels.customLabels.length;g++)s.push(e.labels.customLabels[g].value);else{for(var l=e.labels.step||e.step,g=e.min;g<e.max;g+=l)s.push(g);e.dragEndAngle-360<e.dragStartAngle&&s.push(e.max)}for(g=0;g<s.length;g++){var d,c,u=e.labels.customLabels?e.labels.customLabels[g].text:s[g].toString(),h=(e.labels.formatFunction&&(u=e.labels.formatFunction(u)),e.dragStartAngle),p=e.dragEndAngle,h=h+e._calculateAngleFromValue(s[g],h,p,e.min,e.max),p=e._getPointerPosition({x:t/2,y:t/2},n,h,e.rotation);_.jqx.browser.msie&&_.jqx.browser.version<9?(d=r.measureText(u,0,{class:this.toThemeProperty("jqx-knob-label")}),c=e.labels.rotate?90-h:0,r.text(u,p.x-d.width/2,p.y-d.height/2,d.width,d.height,c,{class:this.toThemeProperty("jqx-knob-label")},!1)):(d=r.measureText(u,0,{style:{fill:o},class:this.toThemeProperty("jqx-knob-label")}),c=e.labels.rotate?90-h:0,r.text(u,p.x-d.width/2,p.y-d.height/2,d.width,d.height,c,{style:{fill:o},class:this.toThemeProperty("jqx-knob-label")},!1))}}}},_drawPointers:function(){var e=this;if(e._pointers=e._pointers||[],e._pointers.forEach(function(e,r,t){_(e).remove(),t.splice(r,1)}),e.pointer)if(e._isArray(e.pointer))for(var r=0;r<e.progressBar.style.length;r++)!1!==e.pointer[r].visible&&e._pointers.push(e._drawPointer(e.value[r],e.pointer[r]));else!1!==e.pointer.visible&&e._pointers.push(e._drawPointer(e.value,e.pointer))},_drawPointer:function(e,r){var t,n,a,i,o,s,l=this,g=(r.id=r.id||l._getID(),l.renderer),d=l.widgetSize,c=(c=r.type)||"circle",u=(r.style||(r.style={fill:"#feaf4e",stroke:"#feaf4e"}),l._getColor(r.style.fill)),h=r.style.stroke||"",p=l._getScale(r.offset,"w",d/2),e=l.dragStartAngle+l._calculateAngleFromValue(e,l.dragStartAngle,l.dragEndAngle,l.min,l.max);return"circle"===c?(s=l._getScale(r.size,"w",d/2),t=l._getPointerPosition({x:d/2,y:d/2},p,e,l.rotation),t=g.circle(t.x,t.y,s,{id:r.id,fill:u,stroke:h})):"line"===c?(n=l._getScale(r.size,"w",d/2),a=r.thickness,s=l._getPointerPosition({x:d/2,y:d/2},p,e,l.rotation),i=l._getPointerPosition({x:d/2,y:d/2},p+n,e,l.rotation),t=g.line(s.x,s.y,i.x,i.y,{id:r.id,stroke:u,"stroke-width":a})):"arc"===c?(n=l._getScale(r.size,"w",d/2),s=(l.dragEndAngle-l.dragStartAngle)/l._steps.length,i=d/2,o="clockwise"===l.rotation?360-(e+s/2):e-s/2,s="clockwise"===l.rotation?360-(e-s/2):e+s/2,t=g.pieslice(i,i,p,p+n,o,s,0,{id:r.id,fill:u,stroke:h})):"arrow"===c&&(n=l._getScale(r.size,"w",d/2),a=r.thickness,g=l._getPointerPosition({x:d/2,y:d/2},n,e,l.rotation),i=l._getPointerPosition({x:d/2,y:d/2},p,e,l.rotation),o=l._getPointerPosition({x:i.x,y:i.y},a/2,e-90,l.rotation),s=l._getPointerPosition({x:i.x,y:i.y},a/2,e+90,l.rotation),c="M "+g.x+","+g.y+" L "+o.x+","+o.y+" L "+s.x+","+s.y+" "+g.x+","+g.y,t=this.renderer.path(c,{id:r.id,stroke:h,fill:u})),t},_rotateSpinnerMarks:function(n){var a=this,i=a.spinner.marks;if(i&&!1!==i.rotate){for(var o,s,l=a.renderer,g=a.widgetSize,d=i&&null!=i.colorRemaining?i.colorRemaining:"transparent",d=a._getColor(d),c=(c=i.type)||"line",u=a._getScale(i.offset,"w",g/2),e=0;e<a._spinnerMarks.length;e++)_(a._spinnerMarks[e]).remove();a._spinnerMarks=[];var r=a._spinnerMarksList;_.each(r,function(e,r){var t;if(a.endAngle-a.startAngle!=360||e!=a.max)return(s=n+a._calculateAngleFromValue(e,a.startAngle,a.endAngle,a.min,a.max))<a.startAngle||(s>a.endAngle&&s<a.startAngle+360||void("circle"===c?(e=a._getScale(i.size,"w",g/2),t=a._getPointerPosition({x:g/2,y:g/2},u,s,a.rotation),a._spinnerMarks.push(l.circle(t.x,t.y,e,{fill:d}))):"line"===c&&(o="major"===r.type&&null!==i.majorSize&&void 0!==i.majorSize?a._getScale(i.majorSize,"w",g/2):a._getScale(i.size,"w",g/2),t=a._getScale(i.thickness,"w",g/2),e=a._getPointerPosition({x:g/2,y:g/2},u,s,a.rotation),r=a._getPointerPosition({x:g/2,y:g/2},u+o,s,a.rotation),a._spinnerMarks.push(l.line(e.x,e.y,r.x,r.y,{stroke:d,"stroke-width":t})))))})}},_drawSpinnerMarks:function(n){var a,i,o,s,l,g,d,e,c=this;n&&(a=c.renderer,i=c.widgetSize,l=n&&null!=n.colorRemaining?n.colorRemaining:"transparent",l=c._getColor(l),c._spinnerMarks=[],g=n.type||"line",d=c._getScale(n.offset,"w",i/2),e=c._spinnerMarksList,_.each(e,function(e,r){var t;c.dragEndAngle-c.dragStartAngle==360&&e==c.max||(s=c.startAngle+c._calculateAngleFromValue(e,c.startAngle,c.endAngle,c.min,c.max),"circle"===g?(e=c._getScale(n.size,"w",i/2),t=c._getPointerPosition({x:i/2,y:i/2},d,s,c.rotation),c._spinnerMarks.push(a.circle(t.x,t.y,e,{fill:l}))):"line"===g&&(o="major"===r.type&&null!==n.majorSize&&void 0!==n.majorSize?c._getScale(n.majorSize,"w",i/2):c._getScale(n.size,"w",i/2),t=c._getScale(n.thickness,"w",i/2),e=c._getPointerPosition({x:i/2,y:i/2},d,s,c.rotation),r=c._getPointerPosition({x:i/2,y:i/2},d+o,s,c.rotation),c._spinnerMarks.push(a.line(e.x,e.y,r.x,r.y,{stroke:l,"stroke-width":t}))))}))},_drawSpinner:function(){var e,r,t,n,a,i,o,s,l=this;l.spinner&&(e=l.renderer,o=l.widgetSize,l.spinner.style||(l.spinner.style={fill:"#dfe3e9",stroke:"#dfe3e9"}),r=l._getColor(l.spinner.style.fill),t=l.spinner.style.stroke||"",a=n=o/2,i=l._getScale(l.spinner.outerRadius,"w",o/2),o=l._getScale(l.spinner.innerRadius,"w",o/2),s=r.strokeWidth||2,e.pieslice(a,n,o,i,360-l.endAngle,360-l.startAngle,0,{"stroke-width":s,fill:r,stroke:t}),l.spinner.marks&&l._drawSpinnerMarks(l.spinner.marks))},_getColor:function(e){return e&&"object"==typeof e?this._getGradient(e.color,e.gradientType,e.gradientStops):e},_getGradient:function(e,r,t){return r&&null!=t&&"object"==typeof t&&("linear"===r?e=this.renderer._toLinearGradient(e,!0,t):"linearHorizontal"===r?e=this.renderer._toLinearGradient(e,!1,t):"radial"===r&&(e=this.renderer._toRadialGradient(e,t))),e},_isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},_events:["slide","change"],_raiseEvent:function(e,r){e=this._events[e],e=_.Event(e);return e.args=r,this.host.trigger(e)},_movePointers:function(){for(var e,r=this,t=0;t<r._pointers.length;t++)1!==r._pointers.length?(e=r.dragStartAngle+r._calculateAngleFromValue(r.value[t],r.dragStartAngle,r.dragEndAngle,r.min,r.max),r._pointers[t]=r._movePointer(r._pointers[t],r.pointer[t],e,r.value[t])):(e=r.dragStartAngle+r._calculateAngleFromValue(r.value,r.dragStartAngle,r.dragEndAngle,r.min,r.max),r._pointers[0]=r._movePointer(r._pointers[0],r.pointer,e,r.value))},_movePointer:function(e,r,t,n){var a,i,o,s=this,l=s.renderer,g=s.widgetSize,d=(d=r.type)||"circle",c=s._getScale(r.offset,"w",g/2);return"circle"===d?(a=s._getPointerPosition({x:g/2,y:g/2},c,t,s.rotation),l.attr(e,{cx:a.x,cy:a.y}),_.jqx.browser.msie&&_.jqx.browser.version<9&&(_("#"+r.id).remove(),e=s._drawPointer(n,r))):"line"===d?(o=s._getScale(r.size,"w",g/2),a=s._getPointerPosition({x:g/2,y:g/2},c,t,s.rotation),i=s._getPointerPosition({x:g/2,y:g/2},c+o,t,s.rotation),l.attr(e,{x1:a.x,y1:a.y,x2:i.x,y2:i.y}),_.jqx.browser.msie&&_.jqx.browser.version<9&&(_("#"+r.id).remove(),e=s._drawPointer(n,r))):"arrow"===d?(o=s._getScale(r.size,"w",g/2),a=r.thickness,i=s._getPointerPosition({x:g/2,y:g/2},o,t,s.rotation),o=s._getPointerPosition({x:g/2,y:g/2},c,t,s.rotation),g=s._getPointerPosition({x:o.x,y:o.y},a/2,t-90,s.rotation),c=s._getPointerPosition({x:o.x,y:o.y},a/2,t+90,s.rotation),o="M "+i.x+","+i.y+" L "+g.x+","+g.y+" L "+c.x+","+c.y+" "+i.x+","+i.y,l.attr(e,{d:o}),_.jqx.browser.msie&&_.jqx.browser.version<9&&(_("#"+r.id).remove(),e=s._drawPointer(n,r))):"arc"===d&&(_("#"+r.id).remove(),e=s._drawPointer(r)),s.progressBar&&e.parentNode.appendChild(e.parentNode.removeChild(e)),e},_getPointerPosition:function(e,r,t,n){return _.jqx.browser.msie&&_.jqx.browser.version<9?{x:parseInt(e.x+r*Math.sin(Math.PI/180*(t+90))),y:"clockwise"===n?parseInt(e.y+r*Math.sin(Math.PI/180*t)):parseInt(e.y-r*Math.sin(Math.PI/180*t))}:{x:e.x+r*Math.sin(Math.PI/180*(t+90)),y:"clockwise"===n?e.y+r*Math.sin(Math.PI/180*t):e.y-r*Math.sin(Math.PI/180*t)}},_getID:function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_decrement:function(){this._setValue(this.value-this.step,"mouse")},_increment:function(){this._setValue(this.value+this.step,"mouse")},_refresh:function(){var e=this;if(e.disabled&&e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")),e.renderer||(e._isVML=!1,e.host.empty(),e._initRenderer(e.host)),e.removeHandler(_(document),"mousemove.jqxKnob"+e.host[0].id),e.removeHandler(_(document),"blur.jqxKnob"+e.host[0].id),e.removeHandler(_(document),"mouseup.jqxKnob"+e.host[0].id),e.removeHandler(e.host,"wheel"),e.removeHandler(e.host,"mousedown"),e.host.empty(),e._initRenderer(e.host),e.renderer){e._steps=[];for(var r=0;r<=(e.max-e.min)/e.step;r++)e._steps.push(e.min+e.step*r);e._initValues(),e._render()}},_render:function(){var e=this;e._drawBackground(),e._drawDial(),e._drawMarks(),e._drawLabels(),e._drawSpinner(),e._drawProgressBars(),e._updateMarksColor(),e._updateSpinnerMarksColor(),e._drawPointers(),e._attatchPointerEventHandlers()},_setValue:function(e,r){var t=this,n=t.value;if((e=isNaN(e)?t.min:e)>t.max?e=t.max:e<t.min&&(e=t.min),t.snapToStep)for(var a=t._steps,i=0;i<a.length;i++)if(e<a[i]){e=0===i||a[i]-e<e-a[i-1]?a[i]:a[i-1];break}e!=n&&(_.isArray(t.value)?-1!=t._pointerGrabbedIndex&&(1==t._pointerGrabbedIndex&&(t.value[0],t.value[t._pointerGrabbedIndex]=e),0==t._pointerGrabbedIndex&&(t.value[1],t.value[t._pointerGrabbedIndex]=e),t.value[t._pointerGrabbedIndex]=e):t.value=e,t._updateProgressBarColor(),t._updateMarksColor(),t._updateSpinnerMarksColor(),n=t.dragStartAngle+t._calculateAngleFromValue(e,t.dragStartAngle,t.dragEndAngle,t.min,t.max),t._rotateSpinnerMarks(n),t._movePointers(),t._raiseEvent(1,{value:t.value,type:r}))},_updateMarksColor:function(){var r=this;if(r.marks&&(r.marks.colorProgress||r.marks.colorRemaining))for(var e=r.renderer,t=[],n=(_.each(r._marksList,function(e){r.endAngle-r.startAngle==360&&r.max,t.push(e)}),r._getColor(r.marks.colorProgress)),a=r._getColor(r.marks.colorRemaining),i=r.value.length?r.value[0]:r.value,o=0;o<r._dialMarks.length;o++)t[o]>i?"circle"===r.marks.type?e.attr(r._dialMarks[o],{fill:a}):e.attr(r._dialMarks[o],{stroke:a}):"circle"===r.marks.type?e.attr(r._dialMarks[o],{fill:n}):e.attr(r._dialMarks[o],{stroke:n}),r.progressBar&&r.marks.drawAboveProgressBar&&r._dialMarks[o].parentNode.appendChild(r._dialMarks[o].parentNode.removeChild(r._dialMarks[o]))},_updateSpinnerMarksColor:function(){var r=this;if(r.spinner&&r.spinner.marks&&r.spinner.marks&&(r.spinner.marks.colorProgress||r.spinner.marks.colorRemaining))for(var e=r.renderer,t=[],n=(_.each(r._spinnerMarksList,function(e){r.endAngle-r.startAngle==360&&e==r.max||t.push(e)}),r._getColor(r.spinner.marks.colorProgress)),a=r._getColor(r.spinner.marks.colorRemaining),i=r.value.length?r.value[0]:r.value,o=0;o<r._spinnerMarks.length;o++)t[o]>i?"circle"===r.spinner.marks.type?e.attr(r._spinnerMarks[o],{fill:a}):e.attr(r._spinnerMarks[o],{stroke:a}):"circle"===r.spinner.marks.type?e.attr(r._spinnerMarks[o],{fill:n}):e.attr(r._spinnerMarks[o],{stroke:n})},_updateProgressBarColor:function(){this.progressBar&&this._drawProgressBars()},_validateProperties:function(){function e(e,r){return e&&"string"==typeof e?{fill:e,stroke:e}:(e||((e={}).fill=r,e.stroke=r),e&&e.fill&&!e.stroke&&(e.stroke=e.fill),e&&!e.fill&&e.stroke&&(e.fill=e.stroke),e&&!e.fill&&(e.fill=r),e&&!e.stroke&&(e.stroke=r),e)}var r=this;if(r.dial&&(r.dial.style=e(r.dial.style,"#dddddd")),r.style&&(r.style=e(r.style,"#dddddd")),r.progressBar&&(r.progressBar.style=e(r.progressBar.style,"transparent"),r.progressBar.background=e(r.progressBar.background,"transparent")),r.spinner&&(r.spinner.style=e(r.spinner.style,"transparent")),r.pointer&&(r.pointer.style=e(r.pointer.style,"transparent")),r.startAngle>=r.endAngle)throw new Error("jqxKnob: The end angle must be bigger than the start angle!");if(r.startAngle<0||360<r.startAngle)throw new Error("jqxKnob: Start angle must be between 0 and 360");if(r.endAngle>r.startAngle+360)throw new Error("jqxKnob: End angle must be between startAngle and startAngle + 360");if(r.dial&&r.dial.color&&"transparent"!==r.dial.color&&(!r.dial.outerRadius||!r.dial.innerRadius))throw new Error("jqxKnob: Dial options innerRadius and outerRadius need to be specified");if(r._isArray(r.pointer)||r._isArray(r.value)){if(!r._isArray(r.pointer))throw new Error("jqxKnob: If the value is an array, the pointer must also be an array.");if(!r._isArray(r.value))throw new Error("jqxKnob: If the pointer is an array, the value must also be an array.");if(r.pointer.length!==r.value.length)throw new Error("jqxKnob: The pointer and value array sizes must match.");if(r.progressBar&&(!r._isArray(r.progressBar.style)||r.progressBar.style.length!==r.pointer.length))throw new Error("jqxKnob: progressBar color must be an array with the same number of elements as the pointer and value.")}return!0}})}(jqxBaseFramework);