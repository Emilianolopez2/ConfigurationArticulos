!function(q){q.jqx.jqxWidget("jqxLayout","",{}),q.extend(q.jqx._jqxLayout.prototype,{defineInstance:function(){var e={width:null,height:null,minGroupWidth:100,minGroupHeight:100,layout:[],resizable:!0,contextMenu:!1,rtl:!1,events:["create","resize","pin","unpin","floatGroupClosed"]};return this===q.jqx._jqxLayout.prototype||q.extend(!0,this,e),e},createInstance:function(){var e=this;e._originalElement=q(e.element.cloneNode(!0)),e._coordinates=[],e._oldIE=q.jqx.browser.msie&&q.jqx.browser.version<9,e._ie7=q.jqx.browser.msie&&q.jqx.browser.version<8,e._touchDevice=q.jqx.mobile.isTouchDevice(),"none"!==e.host.css("display")&&!0===document.body.contains(e.element)?(e._initiallyHidden=!1,e._initialization=!0,e.render()):e._initiallyHidden=!0,q.jqx.utilities.resize(this.host,function(){!0!==e._suppressResizeHandler&&(!0===e._initiallyHidden&&(e._initialization=!0),e.render(),!0===e._initiallyHidden&&(e.dockingLayout&&(e.dockingLayout._createOverlay(),e.dockingLayout._createEdgeOverlays()),e._initiallyHidden=!1))})},render:function(){var e=this,t=[];if(e._tabbedGroupsList=[],e.dockingLayout&&!(e._overlayGroups=[])===e._initialization)for(var o=e.dockingLayout._overlay.detach(),i=e.dockingLayout._dropOverlayHelper.detach(),n=0;n<e.dockingLayout._edgeOverlays.length;n++)t.push(q(e.dockingLayout._edgeOverlays[n]).detach());if(!0===e._rendered&&e._detachContent(e.layout[0].items),e.element.innerHTML="",!e.host.jqxRibbon)throw new Error("jqxLayout: Missing reference to jqxribbon.js.");if(e._setSize(),e._addClasses(),e._removeHandlers(),!e._rendered){if("layoutGroup"!==e.layout[0].type)throw new Error('jqxLayout: Invalid layout structure. The first member of the layout array has to be with type: "layoutGroup".');var a=e.layout[0].items[0].width,r=e.layout[0].items[0].height;a&&"string"==typeof a&&"%"===a.charAt(a.length-1)||r&&"string"==typeof r&&"%"===r.charAt(r.length-1)||(e.layout[0].initialPxWidth=e.element.offsetWidth,e.layout[0].initialPxHeight=e.element.offsetHeight,e._pxToPercent(e.layout[0],!0))}if(e._createLayout(e.layout,e.host,{type:"host"},0),!0===e.resizable&&(e._addResizeFeedbacks(),e._getGroupCoordinates(),e._addHandlers()),!0===e.contextMenu&&e._initMenu(),!0===e._initialization)e._initialization=!1,e._raiseEvent("0");else if(e.dockingLayout){if(e._ie7){q("body").append(o,i);for(var d=0;d<t.length;d++)q("body").append(t[d])}else{o.appendTo(e.host),i.appendTo(e.host);for(var l=0;l<t.length;l++)t[l].appendTo(e.host)}e.dockingLayout._trackFloatGroups()}for(var s=0;s<e._tabbedGroupsList.length;s++)e._validateTabbedGroup(e._tabbedGroupsList[s]);e._rendered||(e._rendered=!0)},refresh:function(e){!0!==e&&this.render()},destroy:function(){var e=this;e._mouseupHandler=null,e._docUP=null,e._removeHandlers(),!0===e.contextMenu&&e._menu.jqxMenu("destroy"),e.host.remove()},saveLayout:function(){for(var e=this,t=[],o=0;o<e.layout.length;o++)e._copyItem(e.layout[o],t);return t},loadLayout:function(e){var t;void 0!==e&&!1===q.isEmptyObject(e)&&((t=this).layout=e,t._rendered=!1,e=t._suppressResizeHandler,t._suppressResizeHandler=!0,t.render(),t._suppressResizeHandler=e)},propertyChangedHandler:function(m,e,t,y){if("layout"!==e){if(y!==t)switch(e){case"width":case"height":m.element.style[e]=m._toPx(y);break;case"theme":q.jqx.utilities.setTheme(t,y,m.host),m._menuInitialized&&q.jqx.utilities.setTheme(t,y,m._menu),m.dockingLayout&&0<q("."+m.element.id+"FloatGroup").length&&q("."+m.element.id+"FloatGroup").jqxWindow({theme:y});break;case"layout":case"resizable":m.render();break;case"contextMenu":!0!==y||m._menuInitialized||m.render();break;case"rtl":function o(e){for(var t=m._find(e,".jqx-layout-pseudo-window-title-"+f),o=m._find(e,".jqx-layout-pseudo-window-pin-background-"+f),i=m._find(e,".jqx-layout-pseudo-window-close-background-"+f),n=m._find(e,".jqx-layout-ribbon-header"),a=m._find(e,".jqx-ribbon"),r=0;r<t.length;r++){var d=q(t[r]);d.removeClass(m.toThemeProperty("jqx-layout-pseudo-window-title-"+f)),d.addClass(m.toThemeProperty("jqx-layout-pseudo-window-title-"+_))}for(var l=0;l<o.length;l++){var s=q(o[l]);s.removeClass(m.toThemeProperty("jqx-layout-pseudo-window-pin-background-"+f)),s.addClass(m.toThemeProperty("jqx-layout-pseudo-window-pin-background-"+_))}for(var u=0;u<i.length;u++){var c=q(i[u]);c.removeClass(m.toThemeProperty("jqx-layout-pseudo-window-close-background-"+f)),c.addClass(m.toThemeProperty("jqx-layout-pseudo-window-close-background-"+_))}for(var p=0;p<n.length;p++){var h=q(n[p]);h.removeClass(m.toThemeProperty("jqx-layout-ribbon-header-"+f)),h.addClass(m.toThemeProperty("jqx-layout-ribbon-header-"+_))}for(var g=0;g<a.length;g++)q(a[g]).jqxRibbon({rtl:y})}var _=y?"rtl":"ltr",f=y?"ltr":"rtl";if(o(m.host),m.dockingLayout)for(var i=m._find(document.body,"."+m.element.id+"FloatGroup"),n=0;n<i.length;n++){var a=q(i[n]);o(a),a.jqxWindow({rtl:y})}}}else m.render()},_raiseEvent:function(e,t){e=this.events[e],(t=void 0===t?{owner:null}:t).owner=this,e=new q.Event(e);return e.owner=this,e.args=t,e.preventDefault&&e.preventDefault(),this.host.trigger(e)},_setSize:function(){var e=this;e.element.style.width=e._toPx(e.width),e.element.style.height=e._toPx(e.height)},_addClasses:function(){this.host.addClass(this.toThemeProperty("jqx-layout jqx-widget jqx-widget-content jqx-rc-all"))},_getPercentage:function(e,t,o){return e/t.widget[o]()*100},_addHandlers:function(){var u,c,h=this,e=h.element.id;function t(e,t){for(var o=0;o<h._coordinates.length;o++){var i=h._coordinates[o];if(e>=i.x.from&&e<=i.x.to&&t>=i.y.from&&t<=i.y.to){"horizontal"===i.orientation?h.element.style.cursor="col-resize":h.element.style.cursor="row-resize",h._resize={allowed:!0,widget:i.widget,side:i.side};break}h.element.style.cursor="default",h._resize.allowed=!1}}function o(e){if(!0===h._resize.allowed){var t=h._resize.widget,o=t.current.parent,i=h._percentToPx("width",t.current.minWidth,o),n=h._percentToPx("height",t.current.minHeight,o),a=o.items[t.current.index-1],r=o.items[t.current.index+1];switch(h._resizeStartPosition={x:e.pageX,y:e.pageY},i=i||h._percentToPx("width",h.minGroupWidth,o),i=Math.min(i,t.width()),t.current.minWidth=i,n=n||h._percentToPx("height",h.minGroupHeight,o),n=Math.min(n,t.height()),t.current.minHeight=n,h._resize.side){case"left":var d=(d=h._percentToPx("width",a.minWidth,o))||h._percentToPx("width",h.minGroupWidth,o);u=a.widget.offset().left+d,c=t.offset().left+t.width()-i;break;case"right":d=(d=h._percentToPx("width",r.minWidth,o))||h._percentToPx("width",h.minGroupWidth,o);u=t.offset().left+i,c=r.widget.offset().left+r.widget.width()-d;break;case"top":d=(d=h._percentToPx("height",a.minHeight,o))||h._percentToPx("height",h.minGroupHeight,o);u=a.widget.offset().top+d,c=t.offset().top+t.height()-n;break;case"bottom":d=(d=h._percentToPx("height",r.minHeight,o))||h._percentToPx("height",h.minGroupHeight,o);u=t.offset().top+n,c=r.widget.offset().top+r.widget.height()-d}function l(e,t){var o;return t=void 0===t?{top:0,left:0}:t,e!==top&&(o=e.frameElement.getBoundingClientRect(),t.left+=o.left,t.top+=o.top,t=l(e.parent,t)),t}var s;h._clickedToResize=!0,h._overlay[0].style.display="block","left"===h._resize.side||"right"===h._resize.side?(h._verticalFeedback[0].style.height=h._resize.widget.height()+"px",s=h._ie7?l(window).top:0,h._verticalFeedback.offset({top:h._resize.widget.offset().top-h.host.offset().top+document.body.scrollTop-s})):(h._horizontalFeedback[0].style.width=h._resize.widget.width()+"px",s=h._ie7?l(window).left:0,h._horizontalFeedback.offset({left:h._resize.widget.offset().left-h.host.offset().left+document.body.scrollLeft+1-s}))}}function g(e,t,o,i,n){var a=n.charAt(0).toUpperCase()+n.slice(1),r=t.parent,e=e?(d=h._percentToPx(n,o["min"+a],r),parseFloat(o[n])/100*t.parent.widget[n]()-i):(d=h._percentToPx(n,t["min"+a],r),parseFloat(t[n])/100*t.parent.widget[n]()-i),d=d||h._percentToPx(n,h["minGroup"+a],r);return e<d?d:e}function i(e){if(!0===h._clickedToResize){function t(){h._clickedToResize=!1,h._overlay[0].style.display="none",h._verticalFeedback[0].style.display="none",h._horizontalFeedback[0].style.display="none"}var o,i,n,a,r,d,l=e.pageX,s=e.pageY,u=h._resize.widget.current,c=h._resize.widget.offset(),p=c.left,c=c.top;if(e.pageX===h._resizeStartPosition.x&&e.pageY===h._resizeStartPosition.y)t();else{if("left"===h._resize.side||"right"===h._resize.side){if(d=u.width,n="left"===h._resize.side?(o=u.parent.items[u.index-1],l<(i=p)):(o=u.parent.items[u.index+1],(i=p+u.widget.width())<=l),0===(a=Math.abs(l-i)))return void t();if(n?(r=h._getPercentage(g(!0,u,o,a,"width"),u.parent,"width"),a=Math.abs(r-parseFloat(o.width)),o.width=r+"%",u.width=parseFloat(u.width)+a+"%"):(r=h._getPercentage(g(!1,u,o,a,"width"),u.parent,"width"),a=Math.abs(r-parseFloat(u.width)),u.width=r+"%",o.width=parseFloat(o.width)+a+"%"),u.width===d)return void t()}else{if(d=u.height,n="top"===h._resize.side?(o=u.parent.items[u.index-1],s<(i=c)):(o=u.parent.items[u.index+1],(i=c+u.widget.height())<=s),0===(a=Math.abs(s-i)))return void t();if(n?(r=h._getPercentage(g(!0,u,o,a,"height"),u.parent,"height"),a=Math.abs(r-parseFloat(o.height)),o.height=r+"%",u.height=parseFloat(u.height)+a+"%"):(r=h._getPercentage(g(!1,u,o,a,"height"),u.parent,"height"),a=Math.abs(r-parseFloat(u.height)),u.height=r+"%",o.height=parseFloat(o.height)+a+"%"),u.height===d)return void t()}t(),h.render(),h._raiseEvent("1",{item:u})}}}function n(e){var t;!0===h._clickedToResize&&(t=e.pageX,e=e.pageY,"left"===h._resize.side||"right"===h._resize.side?(h._verticalFeedback[0].style.display="block",t<u?(t=u,h._verticalFeedback.addClass(h.toThemeProperty("jqx-layout-resize-feedback-warning"))):c<t?(t=c,h._verticalFeedback.addClass(h.toThemeProperty("jqx-layout-resize-feedback-warning"))):h._verticalFeedback.removeClass(h.toThemeProperty("jqx-layout-resize-feedback-warning")),h._verticalFeedback.offset({left:t-2})):(h._horizontalFeedback[0].style.display="block",e<u?(e=u,h._horizontalFeedback.addClass(h.toThemeProperty("jqx-layout-resize-feedback-warning"))):c<e?(e=c,h._horizontalFeedback.addClass(h.toThemeProperty("jqx-layout-resize-feedback-warning"))):h._horizontalFeedback.removeClass(h.toThemeProperty("jqx-layout-resize-feedback-warning")),h._horizontalFeedback.offset({top:e-2}),h._horizontalFeedback.offset({left:h._resize.widget.offset().left+document.body.scrollLeft+1})))}if(h._resize={allowed:!1},h._clickedToResize=!1,h._docUP=i,h._touchDevice?(h.addHandler(q(document),"touchstart.jqxDockingLayout"+e,function(e){e=e.originalEvent.touches[0];t(e.pageX,e.pageY),o(e)}),h.addHandler(q(document),"touchmove.jqxDockingLayout"+e,function(e){n(e.originalEvent.touches[0])}),h.addHandler(q(document),"touchend.jqxDockingLayout"+e,function(e){i(e.originalEvent.changedTouches[0])})):(h.addHandler(h.host,"mousemove.jqxLayout"+e,function(e){!1===h._clickedToResize&&(!h.dockingLayout||h.dockingLayout&&!0!==h.dockingLayout._windowDragged)&&t(e.pageX,e.pageY)}),h.addHandler(q(document),"mousemove.jqxLayout"+e,function(e){n(e)}),h.addHandler(h.host,"mousedown.jqxLayout"+e,function(e){o(e)}),h.addHandler(q(document),"mouseup.jqxLayout"+e,function(e){i(e)})),h.addHandler(q(document),"selectstart.jqxLayout"+e,function(){if(!0===h._clickedToResize)return!1}),h.dockingLayout)try{""===document.referrer&&!window.frameElement||(window.top.document.addEventListener?window.top.document.addEventListener("mouseup",h._mouseupHandler,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",h._mouseupHandler))}catch(e){}},_removeHandlers:function(){var e=this,t=e.element.id;if(e._touchDevice?(e.removeHandler(q(document),"touchstart.jqxLayout"+t),e.removeHandler(q(document),"touchmove.jqxLayout"+t),e.removeHandler(q(document),"touchend.jqxLayout"+t)):(e.removeHandler(e.host,"mousemove.jqxLayout"+t),e.removeHandler(q(document),"mousemove.jqxLayout"+t),e.removeHandler(e.host,"mousedown.jqxLayout"+t),e.removeHandler(q(document),"mouseup.jqxLayout"+t)),e.removeHandler(q(document),"selectstart.jqxLayout"+t),e.dockingLayout)try{""===document.referrer&&!window.frameElement||(window.top.document.removeEventListener?window.top.document.removeEventListener("mouseup",e._mouseupHandler,!1):window.top.document.detachEvent&&window.top.document.detachEvent("onmouseup",e._mouseupHandler))}catch(e){}if(e._oldIE)q("."+t+"FloatGroup").off("close");else for(var o=document.body.querySelectorAll("."+t+"FloatGroup"),i=0;i<o.length;i++)e.removeHandler(o[i],"close")},_createLayout:function(e,i,t){function o(e){var t=i.children(),o=t[0],t=t[1];o.innerHTML=e.title,void 0===(s=e.content||(void 0!==(o=n._find(n._originalElement,'[data-container="'+e.contentContainer+'"]')[0])?o.innerHTML:""))&&(s=""),t.innerHTML=s}for(var n=this,a=t.type,r=0;r<e.length;r++){var d,l,s,u,c,p,h,g=e[r];switch(g.type){case"layoutGroup":var m=document.createElement("div"),y="jqx-layout-group-default";"horizontal"===g.orientation&&(y+=" jqx-layout-group-default-horizontal"),"host"===a?y+=" jqx-layout-group-root":(_="horizontal"===t.orientation?g.width:"100%",f="horizontal"===t.orientation?"100%":g.height,m.style.width=n._toPx(_),m.style.height=n._toPx(f)),m.className=n.toThemeProperty(y),i[0].appendChild(m),d=q(m);break;case"tabbedGroup":"floatGroup"!==a?((d=document.createElement("div")).className=n.toThemeProperty("jqx-layout-group-tabbed"),d.innerHTML='<div class="jqx-layout-window-header"><div></div></div><div><div class="jqx-layout-ribbon"><ul class="jqx-layout-ribbon-header jqx-layout-ribbon-header-'+(n.rtl?"rtl":"ltr")+'"></ul><div class="jqx-layout-ribbon-content"></div></div></div>',i[0].appendChild(d),d=q(d),n._addRightClickHandler(n._find(d,".jqx-layout-window-header")[0],d)):((d=document.createElement("div")).className="jqx-layout-ribbon",d.innerHTML='<ul class="jqx-layout-ribbon-header jqx-layout-ribbon-header-'+(n.rtl?"rtl":"ltr")+'"></ul><div class="jqx-layout-ribbon-content"></div>',i.children()[1].appendChild(d),d=q(d));break;case"documentGroup":case"autoHideGroup":m=document.createElement("div");var _="";"documentGroup"===g.type&&(_="jqx-layout-ribbon-header jqx-layout-ribbon-header-"+(n.rtl?"rtl":"ltr")),m.innerHTML='<ul class="'+_+'"></ul><div></div>',n._ie7&&"autoHideGroup"===g.type&&(m.style.zIndex=9999-500*r),i[0].appendChild(m),d=q(m);break;case"floatGroup":if(n._rendered&&!0!==g.programmaticallyAdded)continue;if(!n.dockingLayout)throw new Error("Float groups are only available in the jqxDockingLayout widget. Initialize a jqxDockingLayout (requires jqxdockinglayout.js) instead of a jqxLayout.");(d=document.createElement("div")).className=n.toThemeProperty("jqx-docking-layout-group-floating"),d.innerHTML="<div></div><div></div>",i[0].appendChild(d),d=q(d),!0===g.programmaticallyAdded&&delete g.programmaticallyAdded;break;case"layoutPanel":if(d={},"tabbedGroup"===a){var f=n._find(i,".jqx-layout-window-header")[0];if(f&&""===q(f).text()&&(f.firstChild.innerHTML=g.title),(c=document.createElement("li")).innerHTML=g.title,n._find(i,".jqx-layout-ribbon-header")[0].appendChild(c),s=n._rendered||g.docked?g.detachedContent:void 0!==(l=n._find(n._originalElement,'[data-container="'+g.contentContainer+'"]')[0])?l.innerHTML:"",u=document.createElement("div"),"string"==typeof s)u.innerHTML=s;else for(var w=0;w<s.length;w++)q(s[w]).appendTo(u);n._find(i,".jqx-layout-ribbon-content")[0].appendChild(u),n._addRightClickHandler(c,d)}else if("autoHideGroup"===a){if(p=i.children(),(c=document.createElement("li")).innerHTML=g.title,p[0].appendChild(c),s=n._rendered?g.detachedContent:void 0!==(l=n._find(n._originalElement,'[data-container="'+g.contentContainer+'"]')[0])?l.innerHTML:"",u=document.createElement("div"),"string"==typeof s)u.innerHTML=s;else for(var x=0;x<s.length;x++)s[x].appendTo(u);var y="left"===t.alignment||"right"===t.alignment?(void 0!==t.popupContentSize&&(u.style.width=parseInt(t.popupContentSize,10)+"px"),"jqx-layout-group-auto-hide-content-vertical"):(void 0!==t.popupContentSize&&(u.style.height=parseInt(t.popupContentSize,10)+"px"),"jqx-layout-group-auto-hide-content-horizontal"),b=(u.className=n.toThemeProperty(y),document.createElement("div")),v=document.createElement("div");v.className="jqx-layout-window",v.innerHTML="<div><div>"+g.title+"</div></div>",v.appendChild(u),b.appendChild(v),p[1].appendChild(b),n._addRightClickHandler(v,d)}else"floatGroup"===a&&o(g);break;case"documentPanel":if(d={},"floatGroup"===a)o(g);else{if(p=i.children(),(c=document.createElement("li")).innerHTML=g.title,p[0].appendChild(c),s=n._rendered||g.docked?g.detachedContent:void 0!==(l=n._find(n._originalElement,'[data-container="'+g.contentContainer+'"]')[0])?l.innerHTML:"",u=document.createElement("div"),"string"==typeof s)u.innerHTML=s;else for(var j=0;j<s.length;j++)s[j].appendTo(u);p[1].appendChild(u),n._addRightClickHandler(c,d)}}g.items&&0<g.items.length&&(h=d,n._createLayout(g.items,h,g)),n._createWidget(t,i,g,d,r),n.dockingLayout&&("documentGroup"===g.type||"tabbedGroup"===g.type||"layoutGroup"===g.type&&0===g.items.length)&&(h={element:d,width:d.width(),height:d.height(),offset:d.offset(),settings:g},n._overlayGroups.push(h),"floatGroup"===g.parent.type&&(g.parent._overlayGroup=h))}},_createWidget:function(t,e,a,r,o){var i,n,d=this,l="horizontal"===t.orientation?a.width:"100%",s="horizontal"===t.orientation?"100%":a.height,u=!1;function c(){for(var e=0,t=0;t<a.items.length;t++)if(!0===a.items[t].selected){e=t;break}return a.items[e].selected=!0,e}switch(a.parent=t,a.widget=r,a.index=o,a.widget&&(a.widget.current=a),a.type){case"tabbedGroup":"floatGroup"!==t.type?(i=d._initWindowPanel(r,l,s,a.type),n=q(d._find(r,".jqx-layout-ribbon")[0]),d._tabbedGroupsList.push(a)):n=r,d.dockingLayout&&!1!==a.allowDrag&&(u=!0),n.jqxRibbon({theme:d.theme,width:"100%",height:"100%",position:"bottom",selectionMode:"click",animationType:"none",rtl:d.rtl,_roundedCorners:!1,initContent:function(e){var t=a.items[e];!t.initialized&&t.initContent&&(t.initContent(q(this._contentSections[e])),t.initialized=!0)},_removeByDrag:u,reorder:!0,_suppressReorder:!1}),n.on("select",function(e){e.stopPropagation(),e.target.id===n[0].id&&(e.stopPropagation(),e=e.args.selectedIndex,a.items[e].selected=!0,e=q(q(n.children()[1]).children()[e]).text(),"floatGroup"!==t.type?i[0].innerHTML=e:d._find(t.widget,".jqx-window-header")[0].firstChild.innerHTML=e)}),n.on("unselect",function(e){e.stopPropagation(),e.target.id===n[0].id&&(a.items[e.args.unselectedIndex].selected=!1)}),n.on("reorder",function(e){d._swapPanelsInLayout(a.items,e.args.newIndex,e.args.oldIndex);var t=e.args.newIndex;setTimeout(function(){a.items[t]&&d._addRightClickHandler(d._find(n,".jqx-ribbon-item")[t],a.items[t].widget)},200)}),u&&(n.on("_removeByDrag",function(e){d.dockingLayout._removeByDragHandler(e,a,n),"floatGroup"===a.parent.type&&1===a.items.length&&n.jqxRibbon({_removeByDrag:!1})}),"floatGroup"!==a.parent.type&&d.dockingLayout._addTabbedGroupHandlers(a,r)),n.jqxRibbon("selectAt",c());break;case"documentGroup":d.dockingLayout&&!1!==a.allowDrag&&(u=!0),r.jqxRibbon({theme:d.theme,width:l,height:s,_roundedCorners:!1,position:"top",selectedIndex:c(),selectionMode:"click",animationType:"none",rtl:d.rtl,initContent:function(e){var t=a.items[e];!t.initialized&&t.initContent&&(t.initContent(q(this._contentSections[e])),t.initialized=!0)},_removeByDrag:u,reorder:!0,_suppressReorder:!1}),r.on("select",function(e){e.stopPropagation(),e.target.id===r[0].id&&(a.items[e.args.selectedIndex].selected=!0)}),r.on("unselect",function(e){e.stopPropagation(),e.target.id===r[0].id&&(a.items[e.args.unselectedIndex].selected=!1)}),r.on("reorder",function(e){d._swapPanelsInLayout(a.items,e.args.newIndex,e.args.oldIndex);var t=e.args.newIndex;setTimeout(function(){d._addRightClickHandler(d._find(r,".jqx-ribbon-item")[t],a.items[t].widget)},200)}),u&&r.on("_removeByDrag",function(e){d.dockingLayout._removeByDragHandler(e,a,r)}),r.addClass(d.toThemeProperty("jqx-layout-group-document"));break;case"autoHideGroup":r.jqxRibbon({theme:d.theme,width:l,height:s,mode:"popup",popupCloseMode:"click",position:a.alignment,selectionMode:"click",animationType:"none",_roundedCorners:!1,rtl:d.rtl,initContent:function(e){var t=q(this._contentSections[e]),t=q(d._find(t,".jqx-layout-window")[0]);t.current=r.current.items[e],t[0].style.border="none",d._initWindowPanel(t,"100%","100%",a.type),!a.items[e].initialized&&a.items[e].initContent&&(a.items[e].initContent(q(t.children()[1])),a.items[e].initialized=!0)}}),r.addClass(d.toThemeProperty("jqx-layout-group-auto-hide"));break;case"floatGroup":r.addClass(d.element.id+"FloatGroup"),r.jqxWindow({theme:d.theme,width:a.width,maxWidth:null,height:a.height,maxHeight:null,position:{x:a.position.x,y:a.position.y},showCloseButton:!1!==a.allowClose,closeButtonAction:"close",rtl:d.rtl,initContent:function(){var e=this._header,t=d._touchDevice?"touchstart":"mousedown",o=".jqxLayout"+d.element.id;if(d.addHandler(e,t+o,function(){var e,t,o;d.dockingLayout._windowDragged=!0,a._overlayGroup&&(a._overlayGroup.self=!0),d.dockingLayout._interval(),d.resizable&&(d._overlay[0].style.display="block"),"documentPanel"===a.items[0].type?(e={type:"documentGroup"},o=(t=a.items[0]).title):"layoutPanel"===a.items[0].type?(e={type:"tabbedGroup"},o=(t=a.items[0]).title):"tabbedGroup"===a.items[0].type&&(e=a.items[0]),d.dockingLayout._draggedWindow={fromGroup:e,fromPanel:t,title:o,element:r},d.dockingLayout._showEdgeOverlays()}),d.addHandler(e,"mouseup"+o,function(){d.dockingLayout._hideOverlays()}),"tabbedGroup"===a.items[0].type){for(var i=0,n=0;n<a.items[0].items.length;n++)if(a.items[0].items[n].selected){i=n;break}t=a.items[0].items[i].title;r.jqxWindow("setTitle",t)}else a.items[0].initContent&&a.items[0].initContent(this._content)}}),r.on("moved",function(e){a.position.x=e.args.x,a.position.y=e.args.y,a._overlayGroup&&d.dockingLayout._updateOverlayGroup(a._overlayGroup),d.dockingLayout._windowCreate=!1,d.dockingLayout._hideOverlays(),d.dockingLayout._clearTextSelection()}),r.on("resized",function(e){a.width=e.args.width,a.height=e.args.height;e=q(this).offset();a.position.x=e.left,a.position.y=e.top,a._overlayGroup&&d.dockingLayout._updateOverlayGroup(a._overlayGroup)}),r.on("close",function(e){e.stopPropagation(),e.target.id===r[0].id&&(d._raiseEvent("4",{element:r,floatGroup:r.current}),r.current._overlayGroup&&(r.current._overlayGroup.removed=!0,d.dockingLayout._updateOverlayGroups()),d.dockingLayout._removeFloatGroupObject(r.current))})}},_initWindowPanel:function(e,t,o,i){var n,a,r,d,l=this,s=(e.addClass(l.toThemeProperty("jqx-widget jqx-widget-content jqx-window jqx-layout-pseudo-window jqx-rc-all")),l._ie7?(u=e.parent(),"tabbedGroup"===i?(n=parseInt(e.css("border-left-width"),10),s=parseInt(e.css("border-right-width"),10),p=parseInt(e.css("border-top-width"),10),h=parseInt(e.css("border-bottom-width"),10),c="100%"===t?u.width():parseFloat(t)/100*u.width(),c-=n+s,n="100%"===o?u.height():parseFloat(o)/100*u.height(),e.css({width:c,height:n-=p+h})):"autoHideGroup"===i&&e.css({width:t,height:o})):(e[0].style.width=t,e[0].style.height=o),l.rtl?"rtl":"ltr"),u=q(e[0].firstChild),c=q(u[0].firstChild),p=(c.addClass(l.toThemeProperty("jqx-layout-pseudo-window-title jqx-layout-pseudo-window-title-"+s)),u.addClass(l.toThemeProperty("jqx-widget-header jqx-window-header jqx-disableselect jqx-layout-pseudo-window-header")),l._ie7&&(u.css("width",u.width()-parseInt(u.css("padding-left"),10)-parseInt(u.css("padding-right"),10)),u.css("height",u.height()-parseInt(u.css("padding-top"),10)-parseInt(u.css("padding-bottom"),10))),0);if((l.dockingLayout?"layoutPanel"===e.current.type?void 0===e.current.parent.allowClose||!0===e.current.parent.allowClose:void 0===e.current.allowClose||!0===e.current.allowClose:"layoutPanel"===e.current.type?!0===e.current.parent.allowClose:!0===e.current.allowClose)&&((a=document.createElement("div")).className=l.toThemeProperty("jqx-window-close-button-background jqx-layout-pseudo-window-close-background jqx-layout-pseudo-window-close-background-"+s),a.setAttribute("title","Close"),a.innerHTML='<div class="'+l.toThemeProperty("jqx-window-close-button jqx-icon-close jqx-layout-pseudo-window-close-icon")+'"></div>',u[0].appendChild(a),p+=16),"tabbedGroup"===i&&!1!==e.current.allowPin||"autoHideGroup"===i&&!1!==e.current.parent.allowUnpin){switch(i){case"tabbedGroup":e.pinned=!(d="jqx-layout-pseudo-window-pin-icon");break;case"autoHideGroup":d="jqx-layout-pseudo-window-pinned-icon",e.pinned=!0}(r=document.createElement("div")).className=l.toThemeProperty("jqx-window-close-button-background jqx-layout-pseudo-window-pin-background"),r.setAttribute("title","Auto Hide"),r.innerHTML='<div class="'+l.toThemeProperty(d)+'"></div>',a?r.className+=" "+l.toThemeProperty("jqx-layout-pseudo-window-pin-background-"+s):!1===l.rtl&&(r.style.right="0px"),u[0].appendChild(r),p+=16,l.dockingLayout&&"autoHideGroup"===i&&l.dockingLayout._addAutoHideGroupHandlers(e.current,u,e.current.title,e.children()[1])}c[0].style.maxWidth=l._toPx(u.width()-p);var h=e.children()[1];return h.style.height=l._toPx(1+e.height()-u.outerHeight()),h.style.marginLeft="-1px",h.style.marginRight="-1px",l._addWindowPanelHandlers(a,r,e),c},_addWindowPanelHandlers:function(e,t,o){var i=this,n=i.element.id,a=o.current,r=a.type;e&&i.addHandler(e,"click.jqxLayout"+n,function(){var e;"tabbedGroup"===r&&1<a.items.length?(e=i._find(o,".jqx-ribbon-item-selected")[0]._index,i._close(a.items[e])):(o.initAnimate&&o.initAnimate(),o.fadeOut({complete:function(){i._close(a),o.remove()}}))}),t&&i.addHandler(t,"click.jqxLayout"+n,function(){"tabbedGroup"===r&&!0===a.pinValid?i._pin(a):"layoutPanel"===r&&i._unPin(a.parent)})},_getGroupCoordinates:function(){var p=this;function h(e){return"layoutGroup"===e||"tabbedGroup"===e||"documentGroup"===e}p._coordinates=[],function e(t){for(var o=0;o<t.length;o++){var i,n,a,r,d,l,s,u,c=t[o];h(c.type)&&(i=t[o-1],n=t[o+1],a=c.widget.offset(),i&&h(i.type)&&(u="horizontal"===c.parent.orientation?(d=10+(r=a.left-5),s=(l=a.top-5)+c.widget.height()+10,"left"):(d=(r=a.left-5)+c.widget.width()+10,s=10+(l=a.top-5),"top"),p._coordinates.push({x:{from:r,to:d},y:{from:l,to:s},widget:c.widget,side:u,orientation:c.parent.orientation})),n&&h(n.type)&&(u="horizontal"===c.parent.orientation?(d=10+(r=a.left+c.widget.width()-5),s=(l=a.top-5)+c.widget.height()+10,"right"):(d=(r=a.left-5)+c.widget.width()+10,s=10+(l=a.top+c.widget.height()-5),"bottom"),p._coordinates.push({x:{from:r,to:d},y:{from:l,to:s},widget:c.widget,side:u,orientation:c.parent.orientation})),c.items&&e(c.items))}}(p.layout[0].items)},_close:function(o){var e,t,i,n,a,r=this;if(o.removed=!0,"tabbedGroup"===o.type||"autoHideGroup"===o.type||"documentGroup"===o.type)(a="tabbedGroup"===o.type?q(r._find(o.widget,".jqx-ribbon")[0]):o.widget).jqxRibbon("destroy"),o.parent.items&&(e=o.parent.items[o.index-1],t=o.parent.items[o.index+1],i="vertical"===o.parent.orientation?"height":"width",n=function(e){var t=parseFloat(e[i])+parseFloat(o[i])+"%";"documentGroup"===e.type?"height"===i?e.widget.jqxRibbon({height:t}):e.widget.jqxRibbon({width:t}):"layoutGroup"!==e.type&&"tabbedGroup"!==e.type||(e.widget[0].style[i]=t),e[i]=t,r._raiseEvent("1",{item:e})},e&&"autoHideGroup"!==e.type&&"floatGroup"!==e.type?n(e):t&&"autoHideGroup"!==t.type&&"floatGroup"!==t.type&&n(t));else if("layoutPanel"===o.type){if("tabbedGroup"===o.parent.type)return(a=q(r._find(o.parent.widget,".jqx-ribbon")[0])).jqxRibbon("removeAt",o.index),r._updateLayout(r.layout),void(0===o.index?a.jqxRibbon("selectAt",0):a.jqxRibbon("selectAt",o.index-1));if("autoHideGroup"===o.parent.type){(a=o.parent.widget).jqxRibbon("removeAt",o.index);for(var d=a.children(),l=0,s=0;s<d.length;s++)if("ul"===d[s].nodeName.toLowerCase()){l=q(d[s]).children().length;break}0===l&&r._close(a.current)}}r._updateLayout(r.layout),r.render()},_updateLayout:function(e){for(var t=0;t<e.length;t++)if(!0===e[t].removed){e.splice(t,1);for(var o=0;o<e.length;o++)e[o].index=o}else e[t].items&&this._updateLayout(e[t].items)},_pin:function(e){var t,o=this,i=e.parent,n="top"===(l=e.alignment||(l=Math.abs(e.parent.items.length-1-e.index),Math.abs(0-e.index)<l?"horizontal"===e.parent.orientation?"left":"top":"horizontal"===e.parent.orientation?"right":"bottom"))||"left"===l?e.index+1:e.index-1,a="left"===l||"right"===l?(t="width",e.pinnedWidth):(t="height",e.pinnedHeight),r=((a="number"==typeof a?o._getPercentage(a,i,t)+"%":a)||("width"===t?a=8e3/e.parent.widget.width()+"%":"height"===t&&(a=3e3/e.parent.widget.height()+"%")),o._detachContent(e.items,!0),{type:"autoHideGroup",alignment:l,items:e.items});r[t]=a,r["min"+t.charAt(0).toUpperCase()+t.slice(1)]=e["min"+t.charAt(0).toUpperCase()+t.slice(1)],r["unpinned"+t.charAt(0).toUpperCase()+t.slice(1)]=e[t],r.allowDrag=e.allowDrag,r.allowDrop=e.allowDrop,r.allowClose=e.allowClose;for(var d=0;d<r.items.length;d++)r.items[d].allowClose=e.allowClose;e.popupContentSize&&(r.popupContentSize=e.popupContentSize);var l=i.items[n];l[t]=parseFloat(l[t])+parseFloat(e[t])-parseFloat(a)+"%",i.items.splice(e.index,0,r),e.removed=!0,q(o._find(e.widget,".jqx-ribbon")[0]).jqxRibbon("destroy"),e.widget.remove(),o._updateLayout(o.layout),o.render(),o._raiseEvent("1",{item:l}),o._raiseEvent("2",{item:r})},_unPin:function(e){var t,o,i,n=this,a=e.parent,r=e.alignment,d="top"===r||"left"===r?e.index+1:e.index-1,d=a.items[d],l="left"===r||"right"===r?(t="width",e.unpinnedWidth):(t="height",e.unpinnedHeight),r=(l=l||"10%",n._detachContent(e.items,!0),{type:"tabbedGroup",alignment:r,items:e.items});r["pinned"+t.charAt(0).toUpperCase()+t.slice(1)]=e[t],r.allowDrag=e.allowDrag,r.allowDrop=e.allowDrop,r.allowClose=e.allowClose,e.popupContentSize&&(r.popupContentSize=e.popupContentSize),i=d?(o=parseFloat(d[t])+parseFloat(e[t])-parseFloat(l)+"%",i=(i=d["min"+t.charAt(0).toUpperCase()+t.slice(1)])||n["minGroup"+t.charAt(0).toUpperCase()+t.slice(1)],parseFloat(o)<n._getPercentage(i,a,t)?(l=e[t],o=n._getPercentage(i,a,t)+"%",r["min"+t.charAt(0).toUpperCase()+t.slice(1)]=e.widget.width()):r["min"+t.charAt(0).toUpperCase()+t.slice(1)]=e["min"+t.charAt(0).toUpperCase()+t.slice(1)],r[t]=l,d[t]=o,d):(r["min"+t.charAt(0).toUpperCase()+t.slice(1)]=e["min"+t.charAt(0).toUpperCase()+t.slice(1)],r[t]="100%",r),a.items.splice(e.index,0,r),e.removed=!0,e.widget.jqxRibbon("destroy"),n._updateLayout(n.layout),n.render(),n._raiseEvent("1",{item:i}),n._raiseEvent("3",{item:r})},_copyItem:function(e,t){var o,i={};for(o in e)if(e.hasOwnProperty(o)&&"parent"!==o&&"widget"!==o&&"initialized"!==o)if("position"===o)i.position={x:e.position.x,y:e.position.y};else if("items"===o){for(var n=[],a=0;a<e.items.length;a++)this._copyItem(e.items[a],n);i.items=n}else i[o]=e[o];t.push(i)},_addResizeFeedbacks:function(){var e=this;e._horizontalFeedback=document.createElement("div"),e._horizontalFeedback.className=e.toThemeProperty("jqx-fill-state-normal jqx-layout-resize-feedback jqx-layout-resize-feedback-horizontal"),e._verticalFeedback=document.createElement("div"),e._verticalFeedback.className=e.toThemeProperty("jqx-fill-state-normal jqx-layout-resize-feedback jqx-layout-resize-feedback-vertical"),e._overlay=document.createElement("div"),e._overlay.className=e.toThemeProperty("jqx-layout-overlay"),e.dockingLayout&&e.dockingLayout._windowDragged&&(e._overlay.style.display="block"),e.element.appendChild(e._horizontalFeedback),e.element.appendChild(e._verticalFeedback),e.element.appendChild(e._overlay),e._horizontalFeedback=q(e._horizontalFeedback),e._verticalFeedback=q(e._verticalFeedback),e._overlay=q(e._overlay)},_detachContent:function(e,o){var i=this;function t(e){var t;!0===e.prevent?e.prevent=!1:(t=i._find(e.parent.widget,".jqx-ribbon-content-section")[e.index],a=i._detachChildNodes(t),q(t).remove(),e.detachedContent=a,!0===o&&(e.prevent=!0))}for(var n=e.length-1;0<=n;n--){var a,r,d=e[n],l=d.type;"layoutGroup"===l||"tabbedGroup"===l||"documentGroup"===l||"autoHideGroup"===l||"floatGroup"===l?d.items&&0<d.items.length&&this._detachContent(d.items):"layoutPanel"===l?"tabbedGroup"===d.parent.type?t(d):"autoHideGroup"===d.parent.type&&(!0===d.prevent?d.prevent=!1:("left"===d.parent.alignment||"right"===d.parent.alignment?(r=i._find(d.parent.widget,".jqx-layout-group-auto-hide-content-vertical")[n],a=i._detachChildNodes(r),q(r).remove()):(r=i._find(d.parent.widget,".jqx-layout-group-auto-hide-content-horizontal")[n],a=i._detachChildNodes(r),q(r).remove()),d.detachedContent=a,!0===o&&(d.prevent=!0))):"documentPanel"===l&&t(d)}},_pxToPercent:function(o,i){function e(e,t){return(100*(e=parseInt(e,10))/(i?n.element["offset"+t]:o["initialPx"+t])).toString()+"%"}for(var n=this,t=0;t<o.items.length;t++){var a=o.items[t];void 0!==a.width?(a.initialPxWidth=a.width,a.width=e(a.width,"Width")):a.initialPxWidth=o.initialPxWidth,void 0!==a.height?(a.initialPxHeight=a.height,a.height=e(a.height,"Height")):a.initialPxHeight=o.initialPxHeight,void 0!==a.unpinnedWidth&&(a.unpinnedWidth=e(a.unpinnedWidth,"Width")),void 0!==a.pinnedWidth&&(a.pinnedWidth=e(a.pinnedWidth,"Width")),void 0!==a.unpinnedHeight&&(a.unpinnedHeight=e(a.unpinnedHeight,"Height")),void 0!==a.pinnedHeight&&(a.pinnedHeight=e(a.pinnedHeight,"Height")),"layoutGroup"===a.type&&a.items&&0<a.items.length&&n._pxToPercent(a,!1)}},_percentToPx:function(e,t,o){if(void 0!==t)return"string"!=typeof t||"string"==typeof t&&"%"!==t.charAt(t.length-1)?parseFloat(t):parseFloat(t.slice(0,t.length-1))/100*o.widget[e]()},_swapPanelsInLayout:function(e,t,o){var i=e[t];e[t]=e[o],e[t].index=t,e[o]=i,e[o].index=o},_initMenu:function(){var i=this;if(!i._menuInitialized){function t(e,t,o){i._menu.jqxMenu("disable","dockOption"+n,e),i._menu.jqxMenu("disable","autoHideOption"+n,t),i._menu.jqxMenu("disable","closeOption"+n,o)}var n=i.element.id,e="";if(!i.host.jqxMenu)throw new Error("jqxLayout: Missing reference to jqxmenu.js.");i.dockingLayout&&(e='<li id="floatOption'+n+'">Float</li>');function o(e){return i.dockingLayout?!1===e.allowClose:!0!==e.allowClose}var a=document.createElement("div");a.className=i.toThemeProperty("jqx-layout-context-menu jqx-layout-context-menu-"+n),a.innerHTML="<ul>"+e+'<li id="dockOption'+n+'">Dock</li><li id="autoHideOption'+n+'" style="white-space: nowrap;">Auto Hide</li><li id="closeOption'+n+'">Close</li></ul>',i._menu=q(a),document.body.appendChild(a),i._menu.jqxMenu({theme:i.theme,width:100,height:"auto",autoOpenPopup:!1,mode:"popup",popupZIndex:99999,rtl:i.rtl}),i._menuInitialized=!0,i.addHandler(i._menu,"itemclick.jqxLayout"+n,function(e){i._handleMenuItemClick(q(e.target).text())});i.addHandler(i._menu,"shown.jqxLayout"+n,function(){switch(i._contextMenuTarget.type){case"tabbedGroup":t(!0,!1===i._contextMenuTarget.allowPin||!1===i._contextMenuTarget.pinValid,o(i._contextMenuTarget));break;case"layoutPanel":var e=i._contextMenuTarget.parent;"tabbedGroup"===e.type?t(!0,!1===e.allowPin||i._isMiddleTabbedGroup(e),o(e)):"autoHideGroup"===e.type&&t(!1===e.allowUnpin,!0,o(i._contextMenuTarget));break;case"documentPanel":t(!0,!0,o(i._contextMenuTarget))}})}},_addRightClickHandler:function(e,i){var n=this;!0===n.contextMenu&&(n.addHandler(e,"mousedown.jqxLayout"+n.element.id,function(e){var t,o;!0===n.contextMenu&&(e.which&&3===e.which||e.button&&2===e.button)&&(t=document.body.scrollTop,o=q(window).scrollLeft(),n._contextMenuTarget=i.current,n._menu.jqxMenu("open",parseInt(e.clientX,10)+5+o,parseInt(e.clientY,10)+5+t))}),n.addHandler(e,"contextmenu.jqxLayout"+n.element.id,function(){if(!0===n.contextMenu)return!1}))},_handleMenuItemClick:function(e){var t,o=this,i=o._contextMenuTarget.type,n=o._contextMenuTarget.parent;switch(e){case"Float":switch(i){case"tabbedGroup":o.dockingLayout._floatTabbedGroup(o._contextMenuTarget,o._contextMenuTarget.widget);break;case"layoutPanel":"tabbedGroup"===n.type?o.dockingLayout._removeByDragHandler(void 0,n,n.widget,o._contextMenuTarget.index,!1):"autoHideGroup"===n.type&&(t=o._find(q(q(o._find(o._contextMenuTarget.parent.widget,".jqx-ribbon-content")[0]).children()[o._contextMenuTarget.index]),".jqx-layout-window")[0].firstChild,o.dockingLayout._floatAutoHideGroup(o._contextMenuTarget,o._contextMenuTarget.title,t));break;case"documentPanel":o.dockingLayout._removeByDragHandler(void 0,n,n.widget,o._contextMenuTarget.index,!1)}break;case"Dock":o._unPin(o._contextMenuTarget.parent);break;case"Auto Hide":switch(i){case"tabbedGroup":o._pin(o._contextMenuTarget);break;case"layoutPanel":o._pin(o._contextMenuTarget.parent)}break;case"Close":switch(i){case"tabbedGroup":o._close(o._contextMenuTarget);break;case"layoutPanel":1<o._contextMenuTarget.parent.items.length?o._close(o._contextMenuTarget):o._close(o._contextMenuTarget.parent);break;case"documentPanel":o._closeDocumentPanel(o._contextMenuTarget.index,o._contextMenuTarget.parent.items,o._contextMenuTarget.parent,o._contextMenuTarget.parent.widget,!1)}}},_closeDocumentPanel:function(e,t,o,i,n){if(!1===n&&i.jqxRibbon("removeAt",e),1<t.length){var a=!1;t[e].removed=!0,this._updateLayout(t);for(var r=0;r<t.length;r++)if(!0===t[r].selected){a=!0;break}setTimeout(function(){!1===a?t[e]?i.jqxRibbon("selectAt",e):i.jqxRibbon("selectAt",e-1):i.jqxRibbon("render")},0)}else this._close(o)},_isMiddleTabbedGroup:function(e){return!(0===e.index||e.index===e.parent.items.length-1)},_validateTabbedGroup:function(e){var t,o=!0;(o=o&&1<e.parent.items.length)&&2===e.parent.items.length&&(t=0===e.index?1:0,"autoHideGroup"===e.parent.items[t].type&&(o=!1)),o=o&&(o&&!this._isMiddleTabbedGroup(e)),!1===(e.pinValid=o)&&q(this._find(e.widget,".jqx-layout-pseudo-window-pin-background")[0]).addClass("jqx-fill-state-disabled")},_mouseupHandler:function(e){try{this.dockingLayout&&(this._docUP(e),this.dockingLayout._windowCreate=!1,this.dockingLayout._hideOverlays())}catch(e){}},_toPx:function(e){return"number"==typeof e?e+"px":e},_find:function(e,t){return this._oldIE?e.find(t):(e[0]||e).querySelectorAll(t)},_detachChildNodes:function(e){if(void 0===e)return[];var t=[],o=e.childNodes;if(void 0!==o)for(;0<o.length;)t.push(q(o[0]).detach());return t}})}(jqxBaseFramework);