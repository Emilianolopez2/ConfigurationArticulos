!function(C){C.jqx.jqxWidget("jqxListBox","",{}),C.extend(C.jqx._jqxListBox.prototype,{defineInstance:function(){var e={disabled:!1,checkboxSize:16,checkboxes:!1,width:null,height:null,items:new Array,multiple:!1,selectedIndex:-1,selectedIndexes:new Array,source:null,scrollBarSize:C.jqx.utilities.scrollBarSize,enableHover:!0,enableSelection:!0,visualItems:new Array,groups:new Array,equalItemsWidth:!0,itemHeight:-1,visibleItems:new Array,emptyGroupText:"Group",hasThreeStates:!1,autoHeight:!1,autoItemsHeight:!1,roundedcorners:!0,touchMode:"auto",displayMember:"",groupMember:"",valueMember:"",searchMember:"",searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:1e3,incrementalSearchKeyDownDelay:300,allowDrag:!1,allowDrop:!0,dropAction:"default",touchModeStyle:"auto",keyboardNavigation:!0,enableMouseWheel:!0,multipleextended:!1,selectedValues:new Array,emptyString:"",rtl:!1,rendered:null,renderer:null,dragStart:null,dragEnd:null,focusable:!0,ready:null,_checkForHiddenParent:!0,autoBind:!0,_renderOnDemand:!1,filterable:!1,filterHeight:30,filterPlaceHolder:"Looking for",filterDelay:100,filterChange:null,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["select","unselect","change","checkChange","dragStart","dragEnd","bindingComplete","itemAdd","itemRemove","itemUpdate"]};return this===C.jqx._jqxListBox.prototype||C.extend(!0,this,e),e},createInstance:function(e){var t,i=this,s=(15!=C.jqx.utilities.scrollBarSize&&(i.scrollBarSize=C.jqx.utilities.scrollBarSize),null==i.width&&(i.width=200),null==i.height&&(i.height=200),!i.isMaterialized()||(t=window.getComputedStyle(i.element).getPropertyValue("--jqx-list-item-height"))&&-1===this.itemHeight&&(this.itemHeight=parseInt(t)),i.renderListBox(),i);C.jqx.utilities.resize(i.host,function(){s._updateSize()},!1,i._checkForHiddenParent)},resize:function(e,t){this.width=e,this.height=t,this._updateSize()},render:function(){this.renderListBox(),this.refresh()},renderListBox:function(){var t=this,e=t.element.nodeName.toLowerCase();"select"==e||"ul"==e||"ol"==e?(t.field=t.element,t.field.className&&(t._className=t.field.className),e={title:t.field.title},t.field.id.length?e.id=t.field.id.replace(/[^\w]/g,"_")+"_jqxListBox":e.id=C.jqx.utilities.createId()+"_jqxListBox",s=C("<div></div>",e),t.width||(t.width=C(t.field).width()),t.height||(t.height=C(t.field).outerHeight()),t.element.style.cssText=t.field.style.cssText,C(t.field).hide().after(s),i=t.host.data(),t.host=s,t.host.data(i),t.element=s[0],t.element.id=t.field.id,t.field.id=e.id,t._className&&(t.host.addClass(t._className),C(t.field).removeClass(t._className)),t.field.tabIndex&&(i=t.field.tabIndex,t.field.tabIndex=-1,t.element.tabIndex=i)):(0<t.host.find("li").length||0<t.host.find("option").length)&&(s=C.jqx.parseSourceTag(t.element),t.source=s.items),t.element.innerHTML="";var e=(t=t).element.className,i=(e=(e=(e=(e=(e+=" "+t.toThemeProperty("jqx-listbox"))+(" "+t.toThemeProperty("jqx-reset")))+(" "+t.toThemeProperty("jqx-rc-all")))+(" "+t.toThemeProperty("jqx-widget")))+(" "+t.toThemeProperty("jqx-widget-content")),t.element.className=e,window.getComputedStyle(this.element)),s=2*parseInt(i.borderLeftWidth),e=i.boxSizing,i=(0===this.element.offsetWidth&&(s=2),"border-box"!==e&&!isNaN(s)||(s=0),null!=t.width&&-1!=t.width.toString().indexOf("%")&&(t.host.width(t.width),0<s&&this.host.css("box-sizing","border-box"),0),null!=t.height&&-1!=t.height.toString().indexOf("%")&&(t.host.height(t.height),0==t.host.height()&&t.host.height(200),0),(null==t.width||-1==t.width.toString().indexOf("px"))&&(null==t.width||isNaN(t.width))||(t.element.style.width=parseInt(t.width)-s+"px"),(null==t.height||-1==t.height.toString().indexOf("px"))&&(null==t.height||isNaN(t.height))||(t.element.style.height=parseInt(t.height)-s+"px"),t.multiple||t.multipleextended||t.checkboxes?C.jqx.aria(t,"aria-multiselectable",!0):C.jqx.aria(t,"aria-multiselectable",!1),"<div style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='filter"+t.element.id+"' style='display: none; visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><input style='position: absolute;'/></div><div id='listBoxContent' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+t.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+t.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/></div></div>"),e=(t.host.attr("role","listbox"),t.element.innerHTML=i,t._checkForHiddenParent&&(t._addInput(),t.host.attr("tabIndex")||t.host.attr("tabIndex",1)),t.filter=C(t.element.firstChild.firstChild.firstChild),t.filterInput=C(t.filter[0].firstChild),t.filterInput.attr("placeholder",t.filterPlaceHolder),t.filterInput.addClass(t.toThemeProperty("jqx-widget jqx-listbox-filter-input jqx-input jqx-rc-all")),t.addHandler(t.filterInput,"keyup.textchange",function(e){13==e.keyCode?t._search(e):0<t.filterDelay&&(t._filterTimer&&clearTimeout(t._filterTimer),t._filterTimer=setTimeout(function(){t._search(e)},t.filterDelay)),e.stopPropagation()}),C(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling));if(!t.host.jqxButton)throw new Error("jqxListBox: Missing reference to jqxbuttons.js.");if(!e.jqxScrollBar)throw new Error("jqxListBox: Missing reference to jqxscrollbar.js.");s=parseInt(t.host.height())/2,t.vScrollBar=e.jqxScrollBar({_initialLayout:!0,vertical:!0,rtl:t.rtl,theme:t.theme,touchMode:t.touchMode,largestep:s=0==s?10:s}),i=C(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling);t.hScrollBar=i.jqxScrollBar({_initialLayout:!0,vertical:!1,rtl:t.rtl,touchMode:t.touchMode,theme:t.theme}),t.content=C(t.element.firstChild.firstChild.firstChild.nextSibling),t.content.addClass(t.toThemeProperty("jqx-listbox-content-element")),t.content[0].id="listBoxContent"+t.element.id,t.bottomRight=C(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling.nextSibling).addClass(t.toThemeProperty("jqx-listbox-bottomright")).addClass(t.toThemeProperty("jqx-scrollbar-state-normal")),t.bottomRight[0].id="bottomRight"+t.element.id,t.vScrollInstance=C.data(t.vScrollBar[0],"jqxScrollBar").instance,t.hScrollInstance=C.data(t.hScrollBar[0],"jqxScrollBar").instance,!t.isTouchDevice()||C.jqx.browser.msie&&C.jqx.browser.version<9||(e=C("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>"),t.content.parent().append(e),t.overlayContent=t.host.find(".overlay"),t.filterable&&t.overlayContent.css("top","30px")),t._updateTouchScrolling(),t.host.addClass("jqx-disableselect"),t.host.jqxDragDrop&&window.jqxListBoxDragDrop()},_highlight:function(e,t){t=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<b>"+t+"</b>"})},_addInput:function(){var e=this.host.attr("name");e&&this.host.attr("name",""),this.input=C("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",e)},_updateTouchScrolling:function(){var e,i=this;this.isTouchDevice()&&(i.enableHover=!1,e=this.overlayContent||this.content,this.removeHandler(C(e),C.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"),this.removeHandler(C(e),C.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(C(e),C.jqx.mobile.getTouchEventName("touchend")+".touchScroll"),this.removeHandler(C(e),"touchcancel.touchScroll"),C.jqx.mobile.touchScroll(e,i.vScrollInstance.max,function(e,t){null!=t&&"hidden"!=i.vScrollBar.css("visibility")&&(i.vScrollInstance.value,i.vScrollInstance.setPosition(t),i._lastScroll=new Date),null!=e&&"hidden"!=i.hScrollBar.css("visibility")&&(i.hScrollInstance.value,i.hScrollInstance.setPosition(e),i._lastScroll=new Date)},this.element.id,this.hScrollBar,this.vScrollBar),"visible"!=i.vScrollBar.css("visibility")&&"visible"!=i.hScrollBar.css("visibility")?C.jqx.mobile.setTouchScroll(!1,this.element.id):C.jqx.mobile.setTouchScroll(!0,this.element.id),this._arrange())},isTouchDevice:function(){var e=C.jqx.mobile.isTouchDevice();if(1==this.touchMode){if(this.touchDevice)return!0;if(C.jqx.browser.msie&&C.jqx.browser.version<9)return!1;e=this.touchDevice=!0,C.jqx.mobile.setMobileSimulator(this.element)}else 0==this.touchMode&&(e=!1);return e&&0!=this.touchModeStyle&&(this.scrollBarSize=C.jqx.utilities.touchScrollBarSize),e&&this.host.addClass(this.toThemeProperty("jqx-touch")),e},beginUpdate:function(){this.updatingListBox=!0},endUpdate:function(){this.updatingListBox=!1,this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop()},beginUpdateLayout:function(){this.updating=!0},resumeUpdateLayout:function(){this.updating=!1,this.vScrollInstance.value=0,this._render(!1)},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&(e._cachedItemHtml=new Array,e.refresh())},propertyChangedHandler:function(e,t,i,s){var l;null==this.isInitialized||0==this.isInitialized||i==s||e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length||("_renderOnDemand"==t&&(e._render(!1,!0),-1!=e.selectedIndex&&(l=e.selectedIndex,e.selectedIndex=-1,e._stopEvents=!0,e.selectIndex(l,!1,!0),-1==e.selectedIndex&&(e.selectedIndex=l),e._stopEvents=!1)),"filterable"==t&&e.refresh(),"filterHeight"==t&&e._arrange(),"filterPlaceHolder"==t&&e.filterInput.attr("placeholder",s),"renderer"==t&&(e._cachedItemHtml=new Array,e.refresh()),"itemHeight"!=t&&"checkboxSize"!==t||e.refresh(),"source"!=t&&"checkboxes"!=t||(null==s&&i&&i.unbindBindingUpdate&&(i.unbindBindingUpdate(e.element.id),i.unbindDownloadComplete(e.element.id)),e.clearSelection(),e.refresh()),"scrollBarSize"!=t&&"equalItemsWidth"!=t||s!=i&&e._updatescrollbars(),"disabled"==t&&(e._renderItems(),e.vScrollBar.jqxScrollBar({disabled:s}),e.hScrollBar.jqxScrollBar({disabled:s})),"touchMode"!=t&&"rtl"!=t||(e._removeHandlers(),e.vScrollBar.jqxScrollBar({touchMode:s}),e.hScrollBar.jqxScrollBar({touchMode:s}),"touchMode"!=t||C.jqx.browser.msie&&C.jqx.browser.version<9||(l=C("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div>"),e.content.parent().append(l),e.overlayContent=e.host.find(".overlay")),e.filterable&&e.filterInput&&("rtl"==t&&s?e.filterInput.addClass(e.toThemeProperty("jqx-rtl")):"rtl"!=t||s||e.filterInput.removeClass(e.toThemeProperty("jqx-rtl")),e._arrange()),e._updateTouchScrolling(),e._addHandlers(),e._render(!1)),this.updating||"width"!=t&&"height"!=t||e._updateSize(),"theme"==t&&i!=s&&(e.hScrollBar.jqxScrollBar({theme:e.theme}),e.vScrollBar.jqxScrollBar({theme:e.theme}),e.host.removeClass(),e.host.addClass(e.toThemeProperty("jqx-listbox")),e.host.addClass(e.toThemeProperty("jqx-widget")),e.host.addClass(e.toThemeProperty("jqx-widget-content")),e.host.addClass(e.toThemeProperty("jqx-reset")),e.host.addClass(e.toThemeProperty("jqx-rc-all")),e.refresh()),"selectedIndex"==t&&(e.clearSelection(),e.selectIndex(s,!0)),"displayMember"!=t&&"valueMember"!=t||(i!=s&&(l=e.selectedIndex,e.refresh(),e.selectedIndex=l,e.selectedIndexes[l]=l),e._renderItems()),"autoHeight"==t&&(i!=s?e._render(!1):(e._updatescrollbars(),e._renderItems())),e._checkForHiddenParent&&C.jqx.isHidden(e.host)&&C.jqx.utilities.resize(this.host,function(){e._updateSize()},!1,e._checkForHiddenParent))},loadFromSelect:function(e){var t;null!=e&&0<(e=C("#"+e)).length&&(t=(e=C.jqx.parseSourceTag(e[0])).items,e=e.index,this.source=t,this.fromSelect=!0,this.clearSelection(),this.selectedIndex=e,this.selectedIndexes[this.selectedIndex]=this.selectedIndex,this.refresh())},invalidate:function(){this._cachedItemHtml=[],this._renderItems(),this.virtualSize=null,this._updateSize()},refresh:function(e){var t=this;if(null!=this.vScrollBar){this.itemHeight=parseInt(this.itemHeight),this._cachedItemHtml=[],this.visibleItems=new Array;function i(e){1==e&&-1!=t.selectedIndex&&(e=t.selectedIndex,t.selectedIndex=-1,t._stopEvents=!0,t.selectIndex(e,!1,!0),-1==t.selectedIndex&&(t.selectedIndex=e),t._stopEvents=!1)}if(null!=this.itemswrapper&&(this.itemswrapper.remove(),this.itemswrapper=null),C.jqx.dataAdapter&&null!=this.source&&this.source._source)return this.databind(this.source,e),void i(e);!this.autoBind&&(this.autoBind||e)||(this.field&&this.loadSelectTag(),this.items=this.loadItems(this.source)),this._render(!1,1==e),i(e),this._raiseEvent("6")}},loadSelectTag:function(){var e=C.jqx.parseSourceTag(this.field);this.source=e.items,-1==this.selectedIndex&&(this.selectedIndex=e.index)},_render:function(e,t){return this._renderOnDemand?(this.visibleItems=new Array,this.renderedVisibleItems=new Array,void this._renderItems()):(this._addItems(),this._renderItems(),this.vScrollInstance.setPosition(0),this._cachedItemHtml=new Array,(null==e||e)&&null!=this.items&&null!=this.items&&0<=this.selectedIndex&&this.selectedIndex<this.items.length&&this.selectIndex(this.selectedIndex,!0,!0,!0),this.allowDrag&&this._enableDragDrop&&(this._enableDragDrop(),this.isTouchDevice())?(this._removeHandlers(),this.overlayContent&&(this.overlayContent.remove(),this.overlayContent=null),this._updateTouchScrolling(),void this._addHandlers()):(this._updateTouchScrolling(),this.rendered&&this.rendered(),void(this.ready&&this.ready())))},_hitTest:function(e,t){this.filterable&&(t-=this.filterHeight)<0&&(t=0);var i=parseInt(this.vScrollInstance.value),s=this._searchFirstVisibleIndex(t+i,this.renderedVisibleItems);if(null!=this.renderedVisibleItems[s]&&this.renderedVisibleItems[s].isGroup)return null;if(0<this.renderedVisibleItems.length){var l=this.renderedVisibleItems[this.renderedVisibleItems.length-1];if(l.height+l.top<t+i)return null}return s=this._searchFirstVisibleIndex(t+i),this.visibleItems[s]},_searchFirstVisibleIndex:function(e,t){null==e&&(e=parseInt(this.vScrollInstance.value));for(var i=0,s=(t=null==t?this.visibleItems:t).length;i<=s;){var l=parseInt((i+s)/2),n=t[l];if(null==n)break;if(n.initialTop>e&&n.initialTop+n.height>e)s=l-1;else{if(!(n.initialTop<e&&n.initialTop+n.height<=e))return l;i=l+1}}return 0},_renderItems:function(){if(null==this.items||0==this.items.length)this.visibleItems=new Array;else if(1!=this.updatingListBox){var e=this.isTouchDevice(),t=this.vScrollInstance,i=this.hScrollInstance,s=parseInt(t.value),l=parseInt(i.value),n=(this.rtl&&"hidden"!=this.hScrollBar[0].style.visibility&&(l=i.max-l),this.items.length,this.host.width(),parseInt(this.content[0].style.width)),r=n+parseInt(i.max),h=(parseInt(this.vScrollBar[0].style.width),this.vScrollBar[0].style.visibility,"visible"!=this.hScrollBar[0].style.visibility&&(r=n),this._getVirtualItemsCount(),new Array),a=0,o=parseInt(this.element.style.height)+2,d=(-1!=this.element.style.height.indexOf("%")&&(o=this.host.outerHeight()),isNaN(o)&&(o=0),0),c=0,u=0;if(0==t.value||0==this.visibleItems.length)for(var m=0;m<this.items.length;m++)(w=this.items[m]).visible&&(w.top=-s,w.initialTop=-s,!w.isGroup&&w.visible&&((this.visibleItems[c++]=w).visibleIndex=c-1),(this.renderedVisibleItems[u++]=w).left=-l,0<=w.top+w.height&&w.top-w.height<=o&&(h[a++]={index:m,item:w}),s-=w.height,s--);for(var v=0<s?this._searchFirstVisibleIndex(this.vScrollInstance.value,this.renderedVisibleItems):0,p=0,a=0,g=this.vScrollInstance.value,x=0;p<100+o;){if(null==(w=this.renderedVisibleItems[v]))break;if(w.visible&&(w.left=-l,0<=w.top+w.height-g&&w.initialTop-g-w.height<=2*o&&(h[a++]={index:v,item:w})),v++,w.visible&&(p+=w.initialTop-g+w.height-p),++x>this.items.length-1)break}if(!this._renderOnDemand)for(var b=this.toThemeProperty("jqx-listitem-state-normal")+" "+this.toThemeProperty("jqx-item"),f=this.toThemeProperty("jqx-listitem-state-group"),I=this.toThemeProperty("jqx-listitem-state-disabled")+" "+this.toThemeProperty("jqx-fill-state-disabled"),y=(this.checkboxes&&(b+=" checkboxes"),0),S=this,m=0;m<this.visualItems.length;m++){function _(){var e=H[0].firstChild;null!=(e=S.checkboxes?H[0].lastChild:e)&&(e.style.visibility="hidden",e.className=""),S.checkboxes&&(H[0].firstChild.style.visibility="hidden")}var w,k,q,j,B,T,H=this.visualItems[m];!(m<h.length)||(w=h[m].item).initialTop-g>=o?_():(k=C(H[0].firstChild),0!=(k=this.checkboxes?C(H[0].lastChild):k).length&&null!=k[0]&&(k[0].className="",k[0].style.display="block",k[0].style.visibility="inherit",T="",T=!w.isGroup&&0<=!this.selectedIndexes[w.index]?b:f,(w.disabled||this.disabled)&&(T+=" "+I),this.roundedcorners&&(T+=" "+this.toThemeProperty("jqx-rc-all")),e&&(T+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),k[0].className=T,this.renderer?(w.key||(w.key=this.generatekey()),this._cachedItemHtml||(this._cachedItemHtml=new Array),this._cachedItemHtml[w.key]?k[0].innerHTML!=this._cachedItemHtml[w.key]&&(k[0].innerHTML=this._cachedItemHtml[w.key]):(T=this.renderer(w.index,w.label,w.value),k[0].innerHTML=T,this._cachedItemHtml[w.key]=k[0].innerHTML)):(-1!==this.itemHeight&&(T=2+2*parseInt(k.css("padding-top")),k[0].style.lineHeight=w.height-T+"px",k.css("vertical-align","middle")),null!=w.html&&0<w.html.toString().length?k[0].innerHTML=w.html:null!=w.label||null!=w.value?null!=w.label?(k[0].innerHTML!==w.label&&(k[0].innerHTML=w.label),""==C.trim(w.label)&&(k[0].innerHTML=this.emptyString,""==this.emptyString&&(k[0].style.height=w.height-8+"px")),this.incrementalSearch||w.disabled||null!=this.searchString&&""!=this.searchString&&(k[0].innerHTML=this._highlight(w.label.toString(),this.searchString))):null===w.label?(k[0].innerHTML=this.emptyString,""==this.emptyString&&(k[0].style.height=w.height-8+"px")):k[0].innerHTML!==w.value?k[0].innerHTML=w.value:""==w.label&&(k[0].innerHTML=" "):""!=w.label&&null!=w.label||(k[0].innerHTML="",k[0].style.height=w.height-8+"px")),H[0].style.left=w.left+"px",H[0].style.top=w.initialTop-g+"px",w.element=k[0],this.isMaterialized()&&!this.renderer&&this._checkForHiddenParent&&(C(w.element).addClass("ripple"),C.jqx.ripple(C(w.element))),w.title&&(k[0].title=w.title),this.equalItemsWidth&&!w.isGroup?(0==d&&(T=parseInt(r),T-=parseInt(k.outerWidth())-parseInt(k.width()),q=null!=(q=1)?parseInt(q):0,"border-box"===this.host.css("box-sizing")&&(T-=2),d=T,this.checkboxes&&"hidden"==this.hScrollBar[0].style.visibility&&(d-=this.checkboxSize+13)),n>this.virtualSize.width?(k[0].style.width=d+"px",w.width=d):(k[0].style.width=-4+this.virtualSize.width+"px",w.width=this.virtualSize.width-4)):k.width()<this.host.width()&&k.width(this.host.width()-2),this.rtl&&(k[0].style.textAlign="right"),this.autoItemsHeight&&(k[0].style.whiteSpace="pre-line",k.width(d),w.width=d),y=0,this.checkboxes&&!w.isGroup?(0==y&&(y=(w.height-this.checkboxSize-3)/2,y=parseInt(y),y++),(B=C(H.children()[0]))[0].item=w,this.rtl?"0px"!=k[0].style.left&&(k[0].style.left="0px"):(q=this.checkboxSize+9,k[0].style.left!=q+"px"&&(k[0].style.left=q+"px")),this.rtl&&B.css("left",8+w.width+"px"),B[0].style.top=y+"px",B[0].style.display="block",B[0].style.visibility="inherit",T=w.checked,j=w.checked?" "+this.toThemeProperty("jqx-checkbox-check-checked"):"",B[0].setAttribute("checked",w.checked),B[0].firstChild&&B[0].firstChild.firstChild&&B[0].firstChild.firstChild.firstChild&&B[0].firstChild.firstChild&&(T?B[0].firstChild.firstChild.firstChild.className=j:!1===T?B[0].firstChild.firstChild.firstChild.className="":null===T&&(B[0].firstChild.firstChild.firstChild.className=this.toThemeProperty("jqx-checkbox-check-indeterminate"))),C.jqx.ariaEnabled&&(T?H[0].setAttribute("aria-selected",!0):H[0].removeAttribute("aria-selected"))):this.checkboxes&&(B=C(H.children()[0])).css({display:"none",visibility:"inherit"}),!w.disabled&&(!this.filterable&&0<=this.selectedIndexes[w.visibleIndex]||w.selected&&this.filterable)?(k.addClass(this.toThemeProperty("jqx-listitem-state-selected")),k.addClass(this.toThemeProperty("jqx-fill-state-pressed")),C.jqx.ariaEnabled&&(H[0].setAttribute("aria-selected",!0),this._activeElement=H[0])):this.checkboxes||C.jqx.ariaEnabled&&H[0].removeAttribute("aria-selected")))}}},escapeHTML:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})},sanitizeHTML:function(e){var t=this,i=new RegExp("<s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)[^>]*>(.*?)<s*/s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)>","ig");return String(e).replace(i,function(e){return t.escapeHTML(e)})},escape_HTML:function(e){return(e=""+e)&&(0<=e.indexOf("onclick")||0<=e.indexOf("onload")||0<=e.indexOf("onerror"))?this.escapeHTML(e):this.sanitizeHTML(e)},generatekey:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_calculateVirtualSize:function(e){if(!this._renderOnDemand){var t=0,i=2,s=0,l=document.createElement("span"),n=(this.equalItemsWidth&&C(l).css("float","left"),l.style.whiteSpace="pre",0),r=void 0===e?this.host.outerHeight():e+2,h=(document.body.appendChild(l),this.items.length),a=this.host.width();if(this.autoItemsHeight&&(a-=10,"hidden"!=this.vScrollBar.css("visibility")&&(a-=20)),this.autoItemsHeight||this.renderer||1<=this.groups.length||0<h&&null!=this.items[0].html&&""!=this.items[0].html)for(var o,s=0;s<h;s++)(d=this.items[s]).isGroup&&""==d.label&&""==d.html||d.visible&&(c="",d.isGroup?c+=this.toThemeProperty("jqx-listitem-state-group jqx-rc-all"):c+=this.toThemeProperty("jqx-widget jqx-listitem-state-normal jqx-rc-all"),c+=" "+this.toThemeProperty("jqx-fill-state-normal"),this.isTouchDevice()&&(c+=" "+this.toThemeProperty("jqx-touch")),l.className=c,this.autoItemsHeight&&(l.style.whiteSpace="pre-line",u=this.checkboxSize+9,m=this.checkboxes?-u:0,l.style.width=m+a+"px"),this.renderer?(o=this.renderer(d.index,d.label,d.value),l.innerHTML=o):null!=d.html&&0<d.html.toString().length?l.innerHTML=d.html:null==d.label&&null==d.value||(null!=d.label?(l.innerHTML=this.escape_HTML(d.label),""==d.label&&(l.innerHTML="Empty")):l.innerHTML=this.escape_HTML(d.value)),v=l.offsetHeight,o=l.offsetWidth,-1<this.itemHeight&&(v=this.itemHeight),d.height=v,d.width=o,i+=++v,t=Math.max(t,o),i<=r&&n++);else{for(var d,c,u,m,v,i=0,p=0,g="",x=0,b=0,f=-1,s=0;s<h;s++)(d=this.items[s]).isGroup&&""==d.label&&""==d.html||d.visible&&(c="",0==++f&&(c=(c=(c=(c=(c+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"))+(" "+this.toThemeProperty("jqx-fill-state-normal")))+" "+this.toThemeProperty("jqx-widget"))+" "+this.toThemeProperty("jqx-listbox"))+" "+this.toThemeProperty("jqx-widget-content"),this.isTouchDevice()&&(c=(c+=" "+this.toThemeProperty("jqx-touch"))+" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),l.className=c,this.autoItemsHeight&&(l.style.whiteSpace="pre-line",u=this.checkboxSize+9,m=this.checkboxes?-u:0,l.style.width=m+a+"px"),null==d.html||""==d.label||null==d.label?l.innerHTML="Item":null!=d.html&&0<d.html.toString().length?l.innerHTML=d.html:null==d.label&&null==d.value||(null!=d.label?null!=d.label.toString().match(new RegExp("\\w"))||null!=d.label.toString().match(new RegExp("\\d"))?l.innerHTML=d.label:l.innerHTML="Item":l.innerHTML=d.value),v=1+l.offsetHeight,p=v=-1<this.itemHeight?this.itemHeight:v),null!=x&&(b=x),null!=d.html&&0<d.html.toString().length?b!=(x=Math.max(x,d.html.toString().length))&&(g=d.html):null!=d.label?b!=(x=Math.max(x,d.label.length))&&(g=d.label):null!=d.value&&b!=(x=Math.max(x,d.value.length))&&(g=d.value),i+=d.height=p,++i<=r&&n++);l.innerHTML=g,t=l.offsetWidth}return i+=2,n<10&&(n=10),this.filterable&&(i+=this.filterHeight),i-=4,l.parentNode.removeChild(l),{width:t,height:i,itemsPerPage:n}}},_getVirtualItemsCount:function(){var e;return 0==this.virtualItemsCount?(e=parseInt(this.host.height())/5)>this.items.length?this.items.length:e:this.virtualItemsCount},_addItems:function(e){if(!this._renderOnDemand){var t=this;if(1!=t.updatingListBox){if(null==t.items||0==t.items.length)return t.virtualSize={width:0,height:0,itemsPerPage:0},t._updatescrollbars(),t.renderedVisibleItems=new Array,void(t.itemswrapper&&t.itemswrapper.children().remove());var i=t.host.height();if(0==e)return l=2*(c=t._calculateVirtualSize(i)).itemsPerPage,t.autoHeight&&(l=t.items.length),t.virtualItemsCount=Math.min(l,t.items.length),c.width,t.virtualSize=c,void t._updatescrollbars();var s=0;t.visibleItems=new Array,t.renderedVisibleItems=new Array,t._removeHandlers(),t.allowDrag&&t._enableDragDrop&&(t.itemswrapper=null),null==t.itemswrapper&&(t.content[0].innerHTML="",t.itemswrapper=C('<div style="outline: 0 none; overflow:hidden; width:100%; position: relative;"></div>'),t.itemswrapper[0].style.height=2*i+"px",t.content[0].appendChild(t.itemswrapper[0]));for(var l=2*(c=t._calculateVirtualSize(i)).itemsPerPage,t=(t.autoHeight&&(l=t.items.length),t.virtualItemsCount=Math.min(l,t.items.length),this),e=(c.width,t.virtualSize=c,Math.max(t.host.width(),17+c.width)),n=(t.itemswrapper[0].style.width=e+"px",""),r=C.jqx.browser.msie&&C.jqx.browser.version<9?' unselectable="on"':"",h=0;h<t.virtualItemsCount;h++){var a,o=t.items[h],d="listitem"+h+t.element.id;""!=t.theme?n+="<div"+r+" role='option' id='"+d+"' class='jqx-listitem-element jqx-listitem-element-"+t.theme+"'>":n+="<div"+r+" role='option' id='"+d+"' class='jqx-listitem-element'>",t.checkboxes&&(n+='<div style="background-color: transparent; padding: 0; margin: 0; overflow:hidden; position: absolute; float: left; width: '+(d=this.checkboxSize+8)+"px; height:  "+d+'px;" class="'+t.toThemeProperty("jqx-checkbox")+' chkbox">',d='<div class="'+t.toThemeProperty("jqx-checkbox-default")+" "+t.toThemeProperty("jqx-fill-state-normal")+" "+t.toThemeProperty("jqx-rc-all")+'"><div style="cursor: pointer; width:  '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;">',a=o.checked?" "+t.toThemeProperty("jqx-checkbox-check-checked"):"",n=n+(d=d+'<span style="width: '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;" class="checkBoxCheck'+a+'"></span></div></div>')+"</div>"),n+="<span"+r+" style='white-space: pre; -ms-touch-action: none;'></span></div>"}this.WinJS?t.itemswrapper.html(n):t.itemswrapper[0].innerHTML=n;for(var c,u=t.itemswrapper.children(),h=0;h<t.virtualItemsCount;h++){var o=t.items[h],m=C(u[h]);t.allowDrag&&t._enableDragDrop&&m.addClass("draggable"),t.checkboxes&&(C(m.children()[0]),m.css("float","left"),C(m[0].firstChild).css("float","left")),m[0].style.height=o.height+"px",m[0].style.top=s+"px",s+=o.height+1,t.visualItems[h]=m}t._addHandlers(),t._updatescrollbars(),t.autoItemsHeight&&(l=2*(c=t._calculateVirtualSize(i)).itemsPerPage,t.autoHeight&&(l=t.items.length),t.virtualItemsCount=Math.min(l,t.items.length),c.width,(t=this).virtualSize=c,t._updatescrollbars()),C.jqx.browser.msie&&C.jqx.browser.version<8&&(t.host.attr("hideFocus",!0),t.host.find("div").attr("hideFocus",!0))}}},_updatescrollbars:function(){var e,t,i,s,l,n,r,h,a,o,d=this;d.virtualSize&&(e=d.virtualSize.height,t=d.virtualSize.width,i=d.vScrollInstance,s=d.hScrollInstance,d._arrange(!1),l=!1,n=d.host.outerWidth(),o=0,(r=d.host.outerHeight())<e+(o=n<t?d.hScrollBar.outerHeight()+2:o)?(h=i.max,i.max=2+parseInt(e)+o-parseInt(r-2),"inherit"!=d.vScrollBar[0].style.visibility&&(d.vScrollBar[0].style.visibility="inherit",l=!0),h!=i.max&&i._arrange()):"hidden"!=d.vScrollBar[0].style.visibility&&(d.vScrollBar[0].style.visibility="hidden",l=!0,i.setPosition(0)),"hidden"!=d.vScrollBar[o=0].style.visibility&&(o=d.scrollBarSize+6),h=d.checkboxes?this.checkboxSize+6:0,d.autoItemsHeight?d.hScrollBar[0].style.visibility="hidden":n-o-h<=t?(a=s.max,"inherit"==d.vScrollBar[0].style.visibility?s.max=h+o+parseInt(t)-d.host.width()+2:s.max=h+parseInt(t)-d.host.width()+4,"inherit"!=d.hScrollBar[0].style.visibility&&(d.hScrollBar[0].style.visibility="inherit",l=!0),a!=s.max&&s._arrange(),"inherit"==d.vScrollBar[0].style.visibility&&(i.max=2+parseInt(e)+d.hScrollBar.outerHeight()+2-parseInt(d.host.height()))):"hidden"!=d.hScrollBar[0].style.visibility&&(d.hScrollBar[0].style.visibility="hidden",l=!0),s.setPosition(0),l&&d._arrange(),d.itemswrapper&&(d.itemswrapper[0].style.width=Math.max(0,Math.max(n-2,17+t))+"px",o=Math.max(d.content.width(),17+d.virtualSize.width),d.itemswrapper[0].style.width=o+"px",d.itemswrapper[0].style.height=Math.max(0,2*r)+"px"),d.isTouchDevice()&&("visible"!=d.vScrollBar.css("visibility")&&"visible"!=d.hScrollBar.css("visibility")?C.jqx.mobile.setTouchScroll(!1,d.element.id):C.jqx.mobile.setTouchScroll(!0,d.element.id)))},clear:function(){this.source=null,this.visibleItems=new Array,this.renderedVisibleItems=new Array,this.itemsByValue=new Array,this.clearSelection(),this.refresh()},clearSelection:function(e){for(var t=0;t<this.selectedIndexes.length;t++)this.selectedIndexes[t]&&-1!=this.selectedIndexes[t]&&this._raiseEvent("1",{index:t,type:"api",item:this.getVisibleItem(t),originalEvent:null}),this.selectedIndexes[t]=-1;this.selectedIndex=-1,this.selectedValue=null,this.selectedValues=new Array,0!=e&&this._renderItems()},unselectIndex:function(e,t){if(!isNaN(e)){for(var i,s=!(this.selectedIndexes[e]=-1),l=0;l<this.selectedIndexes.length;l++){var n=this.selectedIndexes[l];-1!=n&&null!=n&&(s=!0)}s||(this.selectedValue=null,this.selectedIndex=-1,(i=this.getVisibleItem(e))&&this.selectedValues[i.value]&&(this.selectedValues[i.value]=null)),null!=t&&1!=t||(this._renderItems(),this._raiseEvent("1",{index:e,type:"api",item:this.getVisibleItem(e),originalEvent:null})),this._updateInputSelection(),this._raiseEvent("2",{index:e,type:"api",item:this.getItem(e)})}},getInfo:function(){var r=this,e=this.getItems(),h=this.getVisibleItems(),t=function(){for(var e=r.vScrollInstance.value,t=(r.filterable&&(e-=r.filterHeight),new Array),i=0;i<h.length;i++){var s,l,n=h[i];n&&(l=!0,(l=(s=n.initialTop)+n.height-e<0||s-e>=r.host.height()?!1:l)&&t.push(n))}return t}();return{items:e,visibleItems:h,viewItems:t}},getItem:function(e){if(-1==e||isNaN(e)||"string"==typeof e)return-1===e?null:this.getItemByValue(e);var t=null;C.each(this.items,function(){if(this.index==e)return t=this,!1});return t},getVisibleItem:function(e){return-1==e||isNaN(e)||"string"==typeof e?-1===e?null:this.getItemByValue(e):this.visibleItems[e]},getVisibleItems:function(){return this.visibleItems},checkIndex:function(e,t,i){var s;!this.checkboxes||isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),null!=(s=0<this.groups.length||this.filterable?this.getVisibleItem(e):s)&&(C(s.checkBoxElement),s.checked=!0,null!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{label:s.label,value:s.value,checked:!0,item:s}))},getCheckedItems:function(){if(!this.checkboxes)return null;var e=new Array;return null!=this.items?(C.each(this.items,function(){this.checked&&(e[e.length]=this)}),e):void 0},checkAll:function(t){var i;this.checkboxes&&!this.disabled&&(C.each((i=this).items,function(){var e=this.checked;!(this.checked=!0)!==t&&!0!==e&&i._raiseEvent(3,{label:this.label,value:this.value,checked:!0,item:this})}),this._updateCheckedItems())},uncheckAll:function(t){var i;this.checkboxes&&!this.disabled&&(C.each((i=this).items,function(){var e=this.checked;(this.checked=!1)!==t&&!1!==e&&(this.checked=!1,i._raiseEvent(3,{label:this.label,value:this.value,checked:!1,item:this}))}),this._updateCheckedItems())},uncheckIndex:function(e,t,i){var s;!this.checkboxes||isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),null!=(s=0<this.groups.length||this.filterable?this.getVisibleItem(e):s)&&(C(s.checkBoxElement),s.checked=!1,null!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{label:s.label,value:s.value,checked:!1,item:s}))},indeterminateIndex:function(e,t,i){var s;!this.checkboxes||isNaN(e)||e<0||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled||(s=this.getItem(e),null!=(s=0<this.groups.length||this.filterable?this.getVisibleItem(e):s)&&(C(s.checkBoxElement),(s.checked=null)!=t&&1!=t||this._updateCheckedItems()),null!=i&&1!=i||this._raiseEvent(3,{checked:null}))},getSelectedIndex:function(){return this.selectedIndex},getSelectedItems:function(){var e,t=this.getVisibleItems(),i=this.getItems(),s=(t&&t.length!==i.length&&(i=t),this.selectedIndexes),l=[];for(e in s)-1!=s[e]&&(l[l.length]=i[e]);return l},getSelectedItem:function(){var e=this.getSelectedItems();return e&&0<e.length?e[0]:null},_updateCheckedItems:function(){var e=this.selectedIndex,e=(this.clearSelection(!1),this.getCheckedItems(),this.selectedIndex=e,this._renderItems(),C.data(this.element,"hoveredItem"));null!=e&&(C(e).addClass(this.toThemeProperty("jqx-listitem-state-hover")),C(e).addClass(this.toThemeProperty("jqx-fill-state-hover"))),this._updateInputSelection()},getItemByValue:function(e){if(null!=this.visibleItems){if(e&&e.value&&(e=e.value),this.itemsByValue)return this.itemsByValue[C.trim(e).split(" ").join("?")];for(var t=this.visibleItems,i=0;i<t.length;i++)if(t[i].value==e)return t[i]}},checkItem:function(e){return null!=e&&(e=this._getItemByParam(e),this.checkIndex(e.visibleIndex,!0))},uncheckItem:function(e){return null!=e&&(e=this._getItemByParam(e),this.uncheckIndex(e.visibleIndex,!0))},indeterminateItem:function(e){return null!=e&&(e=this._getItemByParam(e),this.indeterminateIndex(e.visibleIndex,!0))},val:function(i){if(this.input){if(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return"number"!=typeof i&&("date"!=typeof i&&("boolean"!=typeof i&&"string"!=typeof i))}(i)||0==arguments.length)return this.input.val();var e=this.getItemByValue(i);return null!=e&&this.selectItem(e),this.input?this.input.val():void 0}},selectItem:function(e){var t;return null!=e?(null==e.index&&(t=this.getItemByValue(e))&&(e=t),this.selectIndex(e.visibleIndex,!0)):(this.clearSelection(),!1)},unselectItem:function(e){var t;return null!=e&&(null==e.index&&(t=this.getItemByValue(e))&&(e=t),this.unselectIndex(e.visibleIndex,!0))},selectIndex:function(e,t,i,s,l,n){if(!isNaN(e)){var r=this.selectedIndex;if(this.filterable&&(this.selectedIndex=-1),!(e<-1||e>=this.visibleItems.length||null!=this.visibleItems[e]&&this.visibleItems[e].disabled||this.disabled)){if(this.multiple||this.multipleextended||this.selectedIndex!=e||s||this.checkboxes){if(this.checkboxes)return this._updateCheckedItems(),a=r,this.selectedIndex!=e||this.multiple||(a=-1),null==l&&(l="none"),o=this.getItem(e),d=this.getItem(a),this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(e),d=this.getVisibleItem(a)),this._raiseEvent("1",{index:a,type:l,item:d,originalEvent:n}),this.selectedIndex=e,this.selectedIndexes[a]=-1,this.selectedIndexes[e]=e,o&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value),this._raiseEvent("0",{index:e,type:l,item:o,originalEvent:n}),void this._renderItems();var h=!(this.focused=!0),a=(this.selectedIndex!=e&&(h=!0),r),o=(this.selectedIndex!=e||this.multiple||(a=-1),null==l&&(l="none"),this.getItem(e)),d=this.getItem(a);if(this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(e),d=this.getVisibleItem(a)),null!=s&&s)this._raiseEvent("1",{index:a,type:l,item:d,originalEvent:n}),this.selectedIndex=e,this.selectedIndexes[a]=-1,this.selectedIndexes[e]=e,o&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value),this._raiseEvent("0",{index:e,type:l,item:o,originalEvent:n});else{function c(e,t,i,s,l,n){m._raiseEvent("1",{index:t,type:i,item:s,originalEvent:n}),m.selectedIndex=e,m.selectedIndexes=[],m.selectedIndexes[t=e]=e,m.selectedValues=new Array,l&&(m.selectedValues[l.value]=l.value),m._raiseEvent("0",{index:e,type:i,item:l,originalEvent:n})}function u(e,t,i,s,l,n){null==m.selectedIndexes[e]||-1==m.selectedIndexes[e]?(m.selectedIndexes[e]=e,m.selectedIndex=e,l&&(m.selectedValues[l.value]=l.value,m._raiseEvent("0",{index:e,type:i,item:l,originalEvent:n}))):(t=m.selectedIndexes[e],(s=m.getVisibleItem(t))&&(m.selectedValues[s.value]=null),m.selectedIndexes[e]=-1,m.selectedIndex=-1,m._raiseEvent("1",{index:t,type:i,item:s,originalEvent:n}))}var m=this;if(this.multipleextended)if(this._shiftKey||this._ctrlKey){if(this._ctrlKey)"keyboard"==l&&(this.clearSelection(!1),m._clickedIndex=e),u(e,0,l,0,o,n);else if(this._shiftKey){null==m._clickedIndex&&(m._clickedIndex=a);var r=Math.min(m._clickedIndex,e),v=Math.max(m._clickedIndex,e);this.clearSelection(!1);for(var p=r;p<=v;p++)m.selectedIndexes[p]=p,m.selectedValues[m.getVisibleItem(p).value]=m.getVisibleItem(p).value,m._raiseEvent("0",{index:p,type:l,item:this.getVisibleItem(p),originalEvent:n});m.selectedIndex="keyboard"!=l?m._clickedIndex:e}}else"keyboard"!=l&&"mouse"!=l?(u(e,0,l,0,o,n),m._clickedIndex=e):(this.clearSelection(!1),m._clickedIndex=e,c(e,a,l,d,o,n));else this.multiple?u(e,0,l,0,o,n):(o&&(this.selectedValue=o.value),c(e,a,l,d,o,n))}return null!=i&&1!=i||this._renderItems(),null!=t&&1==t&&this.ensureVisible(e),this._raiseEvent("2",{index:e,item:o,oldItem:d,type:l,originalEvent:n}),this._updateInputSelection(),h}this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(e))&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value)}}},_updateInputSelection:function(){this._syncSelection();var i=new Array;if(this.input&&(-1==this.selectedIndex?this.input.val(""):this.items&&null!=this.items[this.selectedIndex]&&(this.input.val(this.items[this.selectedIndex].value),i.push(this.items[this.selectedIndex].value)),this.multiple||this.multipleextended||this.checkboxes)){var e=this.checkboxes?this.getCheckedItems():this.getSelectedItems(),t="";if(e){for(var s=0;s<e.length;s++)null!=e[s]&&(s==e.length-1?t+=e[s].value:t+=e[s].value+",",i.push(e[s].value));this.input.val(t)}}this.field&&this.input&&("select"==this.field.nodeName.toLowerCase()?C.each(this.field,function(e,t){C(this).removeAttr("selected"),this.selected=0<=i.indexOf(this.value),this.selected&&C(this).attr("selected",!0)}):C.each(this.items,function(e,t){C(this.originalItem.originalItem).removeAttr("data-selected"),this.selected=0<=i.indexOf(this.value),this.selected&&C(this.originalItem.originalItem).attr("data-selected",!0)}))},isIndexInView:function(e){if(isNaN(e))return!1;if(!this.items)return!1;if(e<0||e>=this.items.length)return!1;var t=this.vScrollInstance.value,i=0,e=(this.filterable&&(i=this.filterHeight),this.visibleItems[e]);if(null==e)return!0;var s=e.initialTop,e=e.height;return!(s-t<i||s-t+i+e>=this.host.outerHeight())},_itemsInPage:function(){var e=0,t=this;return this.items&&C.each(this.items,function(){if(this.initialTop+this.height>=t.content.height())return!1;e++}),e},_firstItemIndex:function(){return null!=this.visibleItems?this.visibleItems[0]&&this.visibleItems[0].isGroup?this._nextItemIndex(0):0:-1},_lastItemIndex:function(){return null!=this.visibleItems?this.visibleItems[this.visibleItems.length-1]&&this.visibleItems[this.visibleItems.length-1].isGroup?this._prevItemIndex(this.visibleItems.length-1):this.visibleItems.length-1:-1},_nextItemIndex:function(e){for(var t=e+1;t<this.visibleItems.length;t++)if(this.visibleItems[t]&&!this.visibleItems[t].disabled&&!this.visibleItems[t].isGroup)return t;return-1},_prevItemIndex:function(e){for(var t=e-1;0<=t;t--)if(this.visibleItems[t]&&!this.visibleItems[t].disabled&&!this.visibleItems[t].isGroup)return t;return-1},clearFilter:function(){this.filterInput.val(""),this._updateItemsVisibility("")},_search:function(e){var t=this,i=t.filterInput.val();if(9!=e.keyCode&&"none"!=t.searchMode&&null!=t.searchMode&&"undefined"!=t.searchMode&&16!=e.keyCode&&17!=e.keyCode&&20!=e.keyCode)return 37!=e.keyCode&&39!=e.keyCode&&void(e.altKey||18==e.keyCode||33<=e.keyCode&&e.keyCode<=40||(e.ctrlKey||e.metaKey||t.ctrlKey)&&88!=e.keyCode&&86!=e.keyCode||i!==t.searchString&&t._updateItemsVisibility(i))},_updateItemsVisibility:function(s){var e=this.getItems();if(null==e)return{index:-1,matchItem:new Array};var l=this,n=new Array,r=0;C.each(e,function(e){var t="";if(!this.isGroup){var t=(t=this.searchLabel||this.label||this.value||this.title||"jqxItem").toString(),i=!1;switch(l.searchMode){case"containsignorecase":i=C.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=C.jqx.string.contains(t,s);break;case"equals":i=C.jqx.string.equals(t,s);break;case"equalsignorecase":i=C.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=C.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=C.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=C.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=C.jqx.string.endsWithIgnoreCase(t,s)}i||(this.visible=!1),i&&((n[r++]=this).visible=!0,this.visibleIndex),""==s&&(this.visible=!0)}}),l.renderedVisibleItems=new Array,l.visibleItems=new Array,l.vScrollInstance.setPosition(0,!0),l._addItems(!1),l._renderItems();for(var t,i=0;i<l.items.length;i++)l.selectedIndexes[i]=-1;for(t in l.selectedIndex=-1,l.selectedValues){var s=l.selectedValues[t],h=l.getItemByValue(s);h&&h.visible&&(l.selectedIndex=h.visibleIndex,l.selectedIndexes[h.visibleIndex]=h.visibleIndex)}l._syncSelection(),l.filterChange&&l.filterChange(s)},_getMatches:function(s,l){if(null==s||0==s.length)return-1;null==l&&(l=0);var e=this.getItems(),n=this,r=-1;return C.each(e,function(e){var t="";if(!this.isGroup){var t=this.searchLabel?this.searchLabel.toString():this.label?this.label.toString():this.value?this.value.toString():this.title?this.title.toString():"jqxItem",i=!1;switch(n.searchMode){case"containsignorecase":i=C.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=C.jqx.string.contains(t,s);break;case"equals":i=C.jqx.string.equals(t,s);break;case"equalsignorecase":i=C.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=C.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=C.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=C.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=C.jqx.string.endsWithIgnoreCase(t,s)}if(i&&this.visibleIndex>=l)return r=this.visibleIndex,!1}}),r},findItems:function(s){var e=this.getItems(),l=this,n=0,r=new Array;return C.each(e,function(e){var t="";if(!this.isGroup){var t=this.label||this.value||this.title||"jqxItem",i=!1;switch(l.searchMode){case"containsignorecase":i=C.jqx.string.containsIgnoreCase(t,s);break;case"contains":i=C.jqx.string.contains(t,s);break;case"equals":i=C.jqx.string.equals(t,s);break;case"equalsignorecase":i=C.jqx.string.equalsIgnoreCase(t,s);break;case"startswith":i=C.jqx.string.startsWith(t,s);break;case"startswithignorecase":i=C.jqx.string.startsWithIgnoreCase(t,s);break;case"endswith":i=C.jqx.string.endsWith(t,s);break;case"endswithignorecase":i=C.jqx.string.endsWithIgnoreCase(t,s)}i&&(r[n++]=this)}}),r},_syncSelection:function(){var e=this;if(e.filterable){if(e.items)for(var t=0;t<e.items.length;t++)(i=e.items[t]).selected=!1;for(t=0;t<e.visibleItems.length;t++){var i=e.visibleItems[t];e.selectedIndexes&&e.selectedIndexes[t]==i.visibleIndex&&(i.selected=!0)}e.itemswrapper&&e._renderItems()}},_handleKeyDown:function(e){var t=e.keyCode,i=this,s=i.selectedIndex,l=i.selectedIndex;if(this.keyboardNavigation&&this.enableSelection&&!(this.filterInput&&e.target==this.filterInput[0]||e.target instanceof HTMLInputElement&&C(e.target).ischildof(this.host))){var n,r,h,a=function(){(i.multiple||i.checkboxes)&&i.clearSelection(!1)};if(32==(t=e.altKey?-1:t)&&this.checkboxes)return null!=(n=this.getItem(s))&&(i._updateItemCheck(n,s),e.preventDefault()),i._searchString="",i.selectIndex(n.visibleIndex,!1,!0,!0,"keyboard",e),void i._renderItems();if(i.incrementalSearch){var o=-1,d=(i._searchString||(i._searchString=""),(8==t||46==t)&&1<=i._searchString.length&&(i._searchString=i._searchString.substr(0,i._searchString.length-1)),String.fromCharCode(t)),c=(e.key&&(d=e.key),!isNaN(parseInt(d))),u=!1;if((65<=t&&t<=97||c||8==t||32==t||46==t)&&(e.shiftKey||(d=d.toLocaleLowerCase()),c=1+i.selectedIndex,8!=t&&32!=t&&46!=t&&(0<i._searchString.length&&i._searchString.substr(0,1)==d&&(c=1+i.selectedIndex),i._searchString+=d),32==t&&(i._searchString+=" "),d=this._getMatches(i._searchString,c),(o=d)!=i._lastMatchIndex&&-1!=o||(o=d=this._getMatches(i._searchString,0)),0<=(i._lastMatchIndex=o)&&(i._toSelectTimer&&clearTimeout(i._toSelectTimer),i._toSelectTimer=setTimeout(function(){a(),i.selectIndex(o,!1,!1,!1,"keyboard",e),i.isIndexInView(o)?i._renderItems():i.ensureVisible(o)},i.incrementalSearchKeyDownDelay)),u=!0),null!=i._searchTimer&&clearTimeout(i._searchTimer),27!=t&&13!=t||(i._searchString=""),i._searchTimer=setTimeout(function(){i._searchString="",i._renderItems()},i.incrementalSearchDelay),0<=o)return;if(u)return!1}if(33==t&&(r=i._itemsInPage(),0<=i.selectedIndex-r?(a(),i.selectIndex(l-r,!1,!1,!1,"keyboard",e)):(a(),i.selectIndex(i._firstItemIndex(),!1,!1,!1,"keyboard",e)),i._searchString=""),32==t&&this.checkboxes&&(null!=(n=this.getItem(s))&&(i._updateItemCheck(n,s),e.preventDefault()),i._searchString=""),36==t&&(a(),i.selectIndex(i._firstItemIndex(),!1,!1,!1,"keyboard",e),i._searchString=""),35==t&&(a(),i.selectIndex(i._lastItemIndex(),!1,!1,!1,"keyboard",e),i._searchString=""),34==t&&(r=i._itemsInPage(),i.selectedIndex+r<i.visibleItems.length?(a(),i.selectIndex(l+r,!1,!1,!1,"keyboard",e)):(a(),i.selectIndex(i._lastItemIndex(),!1,!1,!1,"keyboard",e)),i._searchString=""),38==t){if(i._searchString="",!(0<i.selectedIndex))return!1;if((h=i._prevItemIndex(i.selectedIndex))==i.selectedIndex||-1==h)return!0;a(),i.selectIndex(h,!1,!1,!1,"keyboard",e)}else if(40==t){if(i._searchString="",!(i.selectedIndex+1<i.visibleItems.length))return!1;if((h=i._nextItemIndex(i.selectedIndex))==i.selectedIndex||-1==h)return!0;a(),i.selectIndex(h,!1,!1,!1,"keyboard",e)}return 35!=t&&36!=t&&38!=t&&40!=t&&34!=t&&33!=t||(i.isIndexInView(i.selectedIndex)?i._renderItems():i.ensureVisible(i.selectedIndex),!1)}},_updateItemCheck:function(e,t){if(!this.disabled)switch(1==e.checked?e.checked=!(!e.hasThreeStates||!this.hasThreeStates)&&null:e.checked=null!=e.checked,e.checked){case!0:this.checkIndex(t);break;case!1:this.uncheckIndex(t);break;default:this.indeterminateIndex(t)}},wheel:function(e,t){return t.autoHeight||!t.enableMouseWheel?e.returnValue=!0:!!t.disabled||(i=0,(e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i?((t=t._handleDelta(i))&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!t&&(e.returnValue=t=!1)):(e.preventDefault&&e.preventDefault(),void(e.returnValue=!1)));var i},_handleDelta:function(e){var t=this.vScrollInstance.value;return e<0?this.scrollDown():this.scrollUp(),t!=this.vScrollInstance.value},focus:function(){try{this.focused=!0,this.host.focus();var e=this;setTimeout(function(){e.host.focus()},25)}catch(e){}},_removeHandlers:function(){this.removeHandler(C(document),"keydown.listbox"+this.element.id),this.removeHandler(C(document),"keyup.listbox"+this.element.id),this.removeHandler(this.vScrollBar,"valueChanged"),this.removeHandler(this.hScrollBar,"valueChanged"),this._mousewheelfunc?this.removeHandler(this.host,"mousewheel",this._mousewheelfunc):this.removeHandler(this.host,"mousewheel"),this.removeHandler(this.host,"keydown"),this.removeHandler(this.content,"mouseleave"),this.removeHandler(this.content,"focus"),this.removeHandler(this.content,"blur"),this.removeHandler(this.host,"focus"),this.removeHandler(this.host,"blur"),this.removeHandler(this.content,"mouseenter"),this.removeHandler(this.content,"mouseup"),this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"touchend"),this._mousemovefunc?this.removeHandler(this.content,"mousemove",this._mousemovefunc):this.removeHandler(this.content,"mousemove"),this.removeHandler(this.content,"selectstart"),this.overlayContent&&this.removeHandler(this.overlayContent,C.jqx.mobile.getTouchEventName("touchend"))},_updateSize:function(){this.virtualSize||(this._oldheight=null,this.virtualSize=this._calculateVirtualSize());var e,t=this;t._arrange(),t.host.height()==t._oldheight&&t.host.width()==t._oldwidth||(t.host.width(),t._oldwidth,t.autoItemsHeight?t._render(!1):t.items&&(0<t.items.length&&t.virtualItemsCount*t.items[0].height<t._oldheight-2?t._render(!1):(e=t.vScrollInstance.value,t._updatescrollbars(),t._renderItems(),e<t.vScrollInstance.max?t.vScrollInstance.setPosition(e):t.vScrollInstance.setPosition(t.vScrollInstance.max))),t._oldwidth=t.host.width(),t._oldheight=t.host.height())},_addHandlers:function(){var a,o=this,d=(this.focused=!1,new Date,this.isTouchDevice(),this.addHandler(this.vScrollBar,"valueChanged",function(e){C.jqx.browser.msie&&9<C.jqx.browser.version?setTimeout(function(){o._renderItems()},1):o._renderItems()}),this.addHandler(this.hScrollBar,"valueChanged",function(){o._renderItems()}),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this._mousewheelfunc=function(e){o.wheel(e,o)},this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(C(document),"keydown.listbox"+this.element.id,function(e){o._ctrlKey=e.ctrlKey||e.metaKey,o._shiftKey=e.shiftKey}),this.addHandler(C(document),"keyup.listbox"+this.element.id,function(e){o._ctrlKey=e.ctrlKey||e.metaKey,o._shiftKey=e.shiftKey}),this.addHandler(this.host,"keydown",function(e){return o._handleKeyDown(e)}),this.addHandler(this.content,"mouseleave",function(e){o.focused=!1;var t=C.data(o.element,"hoveredItem");null!=t&&(C(t).removeClass(o.toThemeProperty("jqx-listitem-state-hover")),C(t).removeClass(o.toThemeProperty("jqx-fill-state-hover")),C.data(o.element,"hoveredItem",null))}),this.addHandler(this.content,"focus",function(e){o.disabled||(o.host.addClass(o.toThemeProperty("jqx-fill-state-focus")),o.focused=!0)}),this.addHandler(this.content,"blur",function(e){o.focused=!1,o.host.removeClass(o.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.host,"focus",function(e){o.disabled||(o.host.addClass(o.toThemeProperty("jqx-fill-state-focus")),o.focused=!0)}),this.addHandler(this.host,"blur",function(e){C.jqx.browser.msie&&C.jqx.browser.version<9&&o.focused||(o.host.removeClass(o.toThemeProperty("jqx-fill-state-focus")),o.focused=!1)}),this.addHandler(this.content,"mouseenter",function(e){o.focused=!0}),C.jqx.utilities.hasTransform(this.host)),c=o.isTouchDevice()&&!0!==this.touchMode,u=c?"touchend":"mousedown",l=(this.overlayContent?this.addHandler(this.overlayContent,C.jqx.mobile.getTouchEventName("touchend"),function(e){if(!o.enableSelection)return!0;if(c&&(o._newScroll=new Date,o._newScroll-o._lastScroll<500))return!0;var t=C.jqx.mobile.getTouches(e)[0];if(null!=t){var i=o.host.offset(),s=parseInt(t.pageX),l=parseInt(t.pageY),n=(1==o.touchMode&&null!=t._pageX&&(s=parseInt(t._pageX),l=parseInt(t._pageY)),s-=i.left,l-=i.top,o._hitTest(s,l));if(null!=n&&!n.isGroup)return o._newScroll=new Date,!(o._newScroll-o._lastScroll<500)&&(o.checkboxes?(o._updateItemCheck(n,n.visibleIndex),void o.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",e)):-1==n.html.indexOf("href")?(o.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",e),e.preventDefault&&e.preventDefault(),o.content.trigger("click"),!1):void setTimeout(function(){return o.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",e),o.content.trigger("click"),!1},100))}}):(a=!1,this.addHandler(this.content,u,function(e){if(!o.enableSelection)return!0;if(a=!0,c&&(o._newScroll=new Date,o._newScroll-o._lastScroll<500))return!1;if(o.focused=!0,!o.isTouchDevice()&&o.focusable&&o.host.focus(),e.target.id!="listBoxContent"+o.element.id&&o.itemswrapper[0]!=e.target){var t,i=e.target,s=C(i).offset(),l=o.host.offset(),n=(d&&(n=C.jqx.mobile.getLeftPos(i),i=C.jqx.mobile.getTopPos(i),s.left=n,s.top=i,n=C.jqx.mobile.getLeftPos(o.element),i=C.jqx.mobile.getTopPos(o.element),l.left=n,l.top=i),parseInt(s.top)-parseInt(l.top)),r=parseInt(s.left)-parseInt(l.left),h=o._hitTest(r,n);if(null==h||h.isGroup||(t=function(e,t){o._shiftKey||(o._clickedIndex=e.visibleIndex),o.checkboxes?(r=20+t.pageX-s.left,o.rtl?("hidden"!=o.hScrollBar.css("visibility")?o.hScrollInstance.max:o.host.width(),r<=o.host.width()-20&&(o.allowDrag?setTimeout(function(){o._dragItem||a||(o._updateItemCheck(e,e.visibleIndex),o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t))},200):(o._updateItemCheck(e,e.visibleIndex),o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)))):20<=r+o.hScrollInstance.value&&(o.allowDrag?setTimeout(function(){o._dragItem||a||(o._updateItemCheck(e,e.visibleIndex),o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t))},200):(o._updateItemCheck(e,e.visibleIndex),o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)))):o.selectIndex(e.visibleIndex,!1,!0,!1,"mouse",t)},h.disabled||(-1!=h.html.indexOf("href")?setTimeout(function(){t(h,e)},100):t(h,e))),"mousedown"==u){i=!1;if(e.which?i=3==e.which:e.button&&(i=2==e.button),i)return!0}}return!0})),this.addHandler(this.content,"mouseup",function(e){o.vScrollInstance.handlemouseup(o,e),a=!1}),C.jqx.browser.msie&&this.addHandler(this.content,"selectstart",function(e){return!1}),this.isTouchDevice());this.enableHover&&!l&&(this._mousemovefunc=function(e){if(l)return!0;if(!o.enableHover)return!0;var t,i,s;1==C.jqx.browser.msie&&C.jqx.browser.version;return null==e.target||(!!o.disabled||(o.focused=!0,void(o.vScrollInstance.isScrolling()||e.target.id=="listBoxContent"+o.element.id||o.itemswrapper[0]!=e.target&&(e=e.target,i=C(e).offset(),s=o.host.offset(),d&&(t=C.jqx.mobile.getLeftPos(e),e=C.jqx.mobile.getTopPos(e),i.left=t,i.top=e,t=C.jqx.mobile.getLeftPos(o.element),e=C.jqx.mobile.getTopPos(o.element),s.left=t,s.top=e),t=parseInt(i.top)-parseInt(s.top),e=parseInt(i.left)-parseInt(s.left),null==(i=o._hitTest(e,t))||i.isGroup||i.disabled||(null!=(s=C.data(o.element,"hoveredItem"))&&(C(s).removeClass(o.toThemeProperty("jqx-listitem-state-hover")),C(s).removeClass(o.toThemeProperty("jqx-fill-state-hover"))),C.data(o.element,"hoveredItem",i.element),(e=C(i.element)).addClass(o.toThemeProperty("jqx-listitem-state-hover")),e.addClass(o.toThemeProperty("jqx-fill-state-hover")))))))},this.addHandler(this.content,"mousemove",this._mousemovefunc))},_arrange:function(e){null==e&&(e=!0);function t(e){return 0==(e=s.host.height()-a)&&s.host.height(e=200),e}var i,s=this,l=null,n=null,r=s.filterable?s.filterHeight:0,h=window.getComputedStyle(this.element),a=2*parseInt(h.borderLeftWidth),h=h.boxSizing,h=(0===this.element.offsetWidth&&(a=2),"border-box"!==h&&!isNaN(a)||(a=0),(null==s.width||-1==s.width.toString().indexOf("px"))&&(null==s.width||isNaN(s.width))||(l=s.width),(null==s.height||-1==s.height.toString().indexOf("px"))&&(null==s.height||isNaN(s.height))||(n=s.height),null!=s.width&&-1!=s.width.toString().indexOf("%")&&(s.host.css("width",s.width),l=s.host.width()),null!=s.height&&-1!=s.height.toString().indexOf("%")&&(s.host.css("height",s.height),n=t(n)),null!=l&&(l=parseInt(l)-a,parseInt(s.element.style.width)!=parseInt(s.width)&&(s.element.style.width=parseInt(l)+"px")),s.autoHeight?s.virtualSize&&(n="hidden"!=s.hScrollBar.css("visibility")?(s.host.height(s.virtualSize.height+parseInt(s.scrollBarSize)+3),s.height=s.virtualSize.height+parseInt(s.scrollBarSize)+3,s.height):(s.host.height(s.virtualSize.height),s.height=s.virtualSize.height,s.virtualSize.height)):null!=n&&(n=parseInt(n),parseInt(s.element.style.height)!=parseInt(s.height)&&(s.host.height(s.height),t(n))),s.scrollBarSize),o=(isNaN(h)&&(h=parseInt(h),isNaN(h)?h="17px":h+="px"),h=parseInt(h),2),d=1;s.vScrollBar&&("hidden"!=s.vScrollBar[0].style.visibility?d=h+4:s.vScrollInstance.setPosition(d=0),0==h&&(o=d=0),s.hScrollBar&&(o="hidden"!=s.hScrollBar[0].style.visibility?h+4:(s.hScrollInstance.setPosition(0),0),s.autoItemsHeight&&(s.hScrollBar[0].style.visibility="hidden",o=0),null==n&&(n=0),(i=parseInt(n)-4-h)<0&&(i=0),parseInt(s.hScrollBar[0].style.height)!=h&&(parseInt(h)<0&&(h=0),s.hScrollBar[0].style.height=parseInt(h)+"px"),s.hScrollBar[0].style.top!=i+"px"&&(s.hScrollBar[0].style.top=i+"px",s.hScrollBar[0].style.left="0px"),i=(i=(i=l-h-4)<0?0:i)+"px",s.hScrollBar[0].style.width!=i&&(s.hScrollBar[0].style.width=i),d<=1&&2<=l&&(s.hScrollBar[0].style.width=parseInt(l-2)+"px"),h!=parseInt(s.vScrollBar[0].style.width)&&(s.vScrollBar[0].style.width=parseInt(h)+"px"),parseInt(n)-o!=parseInt(s.vScrollBar[0].style.height)&&(i=parseInt(n)-o,s.vScrollBar[0].style.height=(i=i<0?0:i)+"px"),null==l&&(l=0),i=parseInt(l)-parseInt(h)-4+"px",(i="border-box"===this.host.css("box-sizing")?parseInt(i)-2+"px":i)!=s.vScrollBar[0].style.left&&(0<=parseInt(i)&&(s.vScrollBar[0].style.left=i),s.vScrollBar[0].style.top="0px"),(i=s.vScrollInstance).disabled=s.disabled,e&&i._arrange(),(i=s.hScrollInstance).disabled=s.disabled,e&&i._arrange(),"hidden"!=s.vScrollBar[0].style.visibility&&"hidden"!=s.hScrollBar[0].style.visibility?(s.bottomRight[0].style.visibility="inherit",s.bottomRight[0].style.left=1+parseInt(s.vScrollBar[0].style.left)+"px",s.bottomRight[0].style.top=1+parseInt(s.hScrollBar[0].style.top)+"px",s.rtl&&s.bottomRight.css({left:0}),s.bottomRight[0].style.width=parseInt(h)+3+"px",s.bottomRight[0].style.height=parseInt(h)+3+"px"):s.bottomRight[0].style.visibility="hidden",parseInt(s.content[0].style.width)!=parseInt(l)-d&&(e=parseInt(l)-d,s.content[0].style.width=(e=e<0?0:e)+"px"),s.rtl&&(s.vScrollBar.css({left:"0px",top:"0px"}),s.hScrollBar.css({left:s.vScrollBar.width()+2+"px"}),"hidden"!=s.vScrollBar[0].style.visibility?s.content.css("margin-left",4+s.vScrollBar.width()):(s.content.css("margin-left",0),s.hScrollBar.css({left:"0px"})),s.filterable&&s.filterInput&&s.filterInput.css({left:s.vScrollBar.width()+6+"px"})),parseInt(s.content[0].style.height)!=parseInt(n)-o&&(i=parseInt(n)-o,s.content[0].style.height=(i=i<0?0:i)+"px",s.content[0].style.top="0px"),0<r&&(s.content[0].style.top=r+"px",s.content[0].style.height=parseInt(s.content[0].style.height)-r+"px"),s.filterable?(s.filterInput[0].style.height=r-6+"px",s.filterInput[0].style.top="3px",s.rtl||(s.filterInput[0].style.left=parseInt(s.content.css("left"))+3+"px"),s.filterInput[0].style.width=parseInt(s.content.css("width"))-7+"px",s.filter[0].style.display="block"):s.filter[0].style.display="none",s.overlayContent&&(s.overlayContent.width(parseInt(l)-d),s.overlayContent.height(parseInt(n)-o))))},ensureVisible:function(e,t){if(isNaN(e)&&(i=this.getItemByValue(e))&&(e=i.index),this.isIndexInView(e)){if(t)for(s=0;s<this.visibleItems.length;s++)(i=this.visibleItems[s]).visibleIndex!=e||i.isGroup||(r=this.vScrollInstance.value,n=i.initialTop,this.filterable&&(n=this.filterHeight+2+i.initialTop),r+this.host.height()<this.vScrollInstance.max&&this.vScrollInstance.setPosition(n))}else{if(e<0)return;if(this.autoHeight)(l=C.data(this.vScrollBar[0],"jqxScrollBar").instance).setPosition(0);else for(var i,s=0;s<this.visibleItems.length;s++)if((i=this.visibleItems[s]).visibleIndex==e&&!i.isGroup){var l,n,r=(l=C.data(this.vScrollBar[0],"jqxScrollBar").instance).value,h=this.filterable?this.filterHeight+2:0,a="hidden"===this.hScrollBar.css("visibility")?0:this.scrollBarSize+4;i.initialTop<r?(l.setPosition(i.initialTop),0==s&&l.setPosition(0)):i.initialTop+i.height>r+this.host.height()-h&&(h=this.host.height(),this.filterable?l.setPosition(this.filterHeight+2+i.initialTop+i.height+2-h+a):(l.setPosition(i.initialTop+i.height+2-h+a),s===this.visibleItems.length-1&&l.setPosition(l.max)),t&&(r=l.value,n=i.initialTop,this.filterable&&(n=this.filterHeight+2+i.initialTop),r+h<l.max&&l.setPosition(n)));break}}this._renderItems()},scrollTo:function(e,t){"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollInstance.setPosition(t),"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollInstance.setPosition(e)},scrollDown:function(){if("hidden"==this.vScrollBar.css("visibility"))return!1;var e=this.vScrollInstance;return e.value+e.largestep<=e.max?e.setPosition(e.value+e.largestep):e.setPosition(e.max),!0},scrollUp:function(){if("hidden"==this.vScrollBar.css("visibility"))return!1;var e=this.vScrollInstance;return e.value-e.largestep>=e.min?(e.setPosition(e.value-e.largestep),!0):e.value!=e.min&&(e.setPosition(e.min),!0)},databind:function(e,t){this.records=new Array;var i=!!e._source,r=new C.jqx.dataAdapter(e,{autoBind:!1}),s=(i&&(e=(r=e)._source),function(c,s){function l(e){var t,i,s=null,l=("string"==typeof e?(i=t=e,l=""):null!=c.displayMember&&""!=c.displayMember&&(i=e[c.valueMember],t=e[c.displayMember]),""),n=(c.groupMember?l=e[c.groupMember]:e&&null!=e.group&&(l=e.group),c.searchMember?s=e[c.searchMember]:e&&null!=e.searchLabel&&(s=e.searchLabel),c.valueMember||c.displayMember||"string"==C.type(e)&&(t=i=e.toString()),e&&null!=e.label&&(t=e.label),e&&null!=e.value&&(i=e.value),!1),r=(e&&null!=e.checked&&(n=e.checked),""),h=(e&&null!=e.html&&(r=e.html),!0),a=(e&&null!=e.visible&&(h=e.visible),!1),o=(e&&null!=e.disabled&&(a=e.disabled),!1),d=(e&&null!=e.hasThreeStates&&(o=e.hasThreeStates),{});return d.label=t,d.value=i,d.searchLabel=s,d.html=r,d.visible=h,d.originalItem=e,d.group=l,d.groupHtml="",d.disabled=a,d.checked=n,d.hasThreeStates=o,d}if(null!=s&&r._changedrecords[0])return void C.each(r._changedrecords,function(){var e,t=this.index,i=this.record;switch("remove"!=s&&(e=l(i)),s){case"update":c.updateAt(e,t);break;case"add":c.insertAt(e,t);break;case"remove":c.removeAt(t)}});c.records=r.records;for(var e=c.records.length,t=new Array,i=0;i<e;i++){var n=c.records[i],n=l(n);t[n.index=i]=n}c.items=c.loadItems(t,!0),c._render(),c._raiseEvent("6")}),l=(null!=e.type&&(r._options.type=e.type),null!=e.formatdata&&(r._options.formatData=e.formatdata),null!=e.contenttype&&(r._options.contentType=e.contenttype),null!=e.async&&(r._options.async=e.async),this);switch(e.datatype){case"local":case"array":default:null==e.localdata&&!C.isArray(e)||(r.unbindBindingUpdate(this.element.id),!this.autoBind&&(this.autoBind||t)||r.dataBind(),s(this),r.bindBindingUpdate(this.element.id,function(e){s(l,e)}));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=e.localdata)return r.unbindBindingUpdate(this.element.id),!this.autoBind&&(this.autoBind||t)||r.dataBind(),s(this),void r.bindBindingUpdate(this.element.id,function(){s(l)});var n={};r._options.data?C.extend(r._options.data,n):(e.data&&C.extend(n,e.data),r._options.data=n);r.unbindDownloadComplete(l.element.id),r.bindDownloadComplete(l.element.id,function(){s(l)}),!this.autoBind&&(this.autoBind||t)||r.dataBind()}},loadItems:function(e,r){if(null==e)return this.groups=new Array,this.items=new Array,void(this.visualItems=new Array);var h=this,a=0,o=0,d=0,c=(this.groups=new Array,this.items=new Array,this.visualItems=new Array,new Array),t=(this.itemsByValue=new Array,C.map(e,function(e){if(null==e)return null;var t=new C.jqx._jqxListBox.item,i=e.group,s=e.groupHtml,l=e.title,n=null,s=(h.searchMember?n=e[h.searchMember]:e&&null!=e.searchLabel&&(n=e.searchLabel),null==l&&(l=""),null==i&&(i=""),h.groupMember&&(i=e[h.groupMember]),null==s&&(s=""),h.groups[i]||(h.groups[i]={items:new Array,index:-1,caption:i,captionHtml:s},s=++a+"jqxGroup",h.groups[s]=h.groups[i],o++,h.groups.length=o),h.groups[i]);return s.index++,s.items[s.index]=t,"string"==typeof e?(t.label=e,t.value=e,1<arguments.length&&arguments[1]&&"string"==C.type(arguments[1])&&(t.label=e,t.value=arguments[1])):null==e.label&&null==e.value&&null==e.html&&null==e.group&&null==e.groupHtml?(t.label=e.toString(),t.value=e.toString()):(t.label=e.label,t.value=e.value,void 0===t.label&&(t.label=e.value),void 0===t.value&&(t.value=e.label)),"string"!=typeof e&&(void 0===e.label&&""!=h.displayMember&&(null!=e[h.displayMember]?t.label=e[h.displayMember]:t.label=""),void 0===e.value&&""!=h.valueMember&&(t.value=e[h.valueMember])),t.hasThreeStates=null==e.hasThreeStates||e.hasThreeStates,t.originalItem=e,r&&(t.originalItem=e.originalItem),(t.title=l)&&void 0===t.value&&void 0===t.label&&(t.value=t.label=l),t.html=e.html||"",e.html&&e.html,t.label,t.group=i,t.checked=e.checked||!1,t.groupHtml=e.groupHtml||"",t.disabled=e.disabled||!1,t.visible=null==e.visible||e.visible,t.searchLabel=n,t.index=d,c[d]=t,d++,t}),new Array),i=0;if(null==this.fromSelect||0==this.fromSelect)for(var s=0;s<o;s++){var l=(a=s+1)+"jqxGroup",n=this.groups[l];if(null==n)break;if(0==s&&""==n.caption&&""==n.captionHtml&&o<=1){for(var u=0;u<n.items.length;u++){var m=n.items[u].value;null!=n.items[u].value&&null!=n.items[u].value||(m=u),this.itemsByValue[C.trim(m).split(" ").join("?")]=n.items[u]}return n.items}l=new C.jqx._jqxListBox.item;l.isGroup=!0,l.label=n.caption,""==n.caption&&""==n.captionHtml&&(n.caption=this.emptyGroupText,l.label=n.caption),l.html=n.captionHtml,t[i]=l,i++;for(var v=0;v<n.items.length;v++){t[i]=n.items[v];m=n.items[v].value;""!=n.items[v].value&&null!=n.items[v].value||(m=i),h.itemsByValue[C.trim(m).split(" ").join("?")]=n.items[v],i++}}else{var i=0,p=new Array;C.each(c,function(){p[this.group]||""!=this.group&&((e=new C.jqx._jqxListBox.item).isGroup=!0,e.label=this.group,t[i]=e,i++,p[this.group]=!0);var e=(t[i]=this).value;""!=this.value&&null!=this.value||(e=i-1),h.itemsByValue[C.trim(e).split(" ").join("?")]=this,i++})}return t},_mapItem:function(e){var t=new C.jqx._jqxListBox.item;return this.displayMember&&(null==e.label&&(e.label=e[this.displayMember]),null==e.value&&(e.value=e[this.valueMember])),"string"==typeof e?(t.label=e,t.value=e):"number"==typeof e?(t.label=e.toString(),t.value=e.toString()):(t.label=void 0!==e.label?e.label:e.value,t.value=void 0!==e.value?e.value:e.label),null==t.label&&null==t.value&&null==t.html&&(t.label=t.value=e),t.html=e.html||"",t.group=e.group||"",t.checked=e.checked||!1,t.title=e.title||"",t.groupHtml=e.groupHtml||"",t.disabled=e.disabled||!1,t.visible=e.visible||!0,t},addItem:function(e){return this.insertAt(e,this.items?this.items.length:0)},_getItemByParam:function(e){var t;return e=null!=e&&null==e.index&&(t=this.getItemByValue(e))?t:e},insertItem:function(e,t){e=this._getItemByParam(e);return this.insertAt(e,t)},updateItem:function(e,t){t=this._getItemByParam(t);return!(!t||null==t.index)&&this.updateAt(e,t.index)},updateAt:function(e,t){null!=e&&(e=this._mapItem(e),this.itemsByValue[C.trim(e.value).split(" ").join("?")]=this.items[t],this.items[t].value=e.value,this.items[t].label=e.label,this.items[t].html=e.html,this.items[t].disabled=e.disabled,this._raiseEvent("9",{item:this.items[t]})),this._cachedItemHtml=[],this._renderItems(),this.rendered&&this.rendered()},insertAt:function(e,t){if(null==e)return!1;if(this._cachedItemHtml=[],null==this.items||0==this.items.length)return this.source=new Array,this.refresh(),(i=this._mapItem(e)).index=0,this.items[this.items.length]=i,this._addItems(!0),this._renderItems(),this.rendered&&this.rendered(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),a=i.value,""!=i.value&&null!=i.value||(a=t),this.itemsByValue[C.trim(a).split(" ").join("?")]=i,!1;var i=this._mapItem(e);if(-1==t||null==t||null==t||t>=this.items.length)i.index=this.items.length,this.items[this.items.length]=i;else{for(var s=new Array,l=0,n=!1,r=0,h=0;h<this.items.length;h++)0==this.items[h].isGroup&&t<=r&&!n&&((s[l++]=i).index=t,r++,n=!0),s[l]=this.items[h],this.items[h].isGroup||(s[l].index=r,r++),l++;this.items=s}var a=i.value,e=(""!=i.value&&null!=i.value||(a=t),this.itemsByValue[C.trim(a).split(" ").join("?")]=i,this.visibleItems=new Array,this.renderedVisibleItems=new Array,C.data(this.vScrollBar[0],"jqxScrollBar").instance),a=e.value;return e.setPosition(0),this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this.groups.length,this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),e.setPosition(a),this._raiseEvent("7",{item:i}),this.rendered&&this.rendered(),!0},removeAt:function(e){if(e<0||e>this.items.length-1)return!1;if(null==e)return!1;var t=this.items[e].height,i=this.items[e].value,s=(this.itemsByValue[C.trim(i=""!=i&&null!=i?i:e).split(" ").join("?")]=null,this.items[e]);if(1<this.groups.length){for(var l=new Array,n=0;n<this.items.length;n++)this.items[n].isGroup||l.push({item:this.items[n],key:n});if(!l[e])return!1;this.items.splice(l[e].key,1)}else this.items.splice(e,1);for(var r=new Array,h=0,a=0,n=0;n<this.items.length;n++)r[h]=this.items[n],this.items[n].isGroup||(r[h].index=a,a++),h++;this.items=r;var e=C.data(this.vScrollBar[0],"jqxScrollBar").instance,o=(e=C.data(this.vScrollBar[0],"jqxScrollBar").instance).value;e.setPosition(0),this.visibleItems=new Array,this.renderedVisibleItems=new Array,0<this.items.length?(this.virtualSize&&(this.virtualSize.height-=t,t=2*this.virtualSize.itemsPerPage,this.autoHeight&&(t=this.items.length),this.virtualItemsCount=Math.min(t,this.items.length)),this._updatescrollbars()):this._addItems(),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),"hidden"!=this.vScrollBar.css("visibility")?e.setPosition(o):e.setPosition(0),this.itemsByValue=new Array;for(var d=0;d<this.items.length;d++){i=this.items[d].value;""!=this.items[d].value&&null!=this.items[d].value||(i=d),this.itemsByValue[C.trim(i).split(" ").join("?")]=this.items[d]}return this._raiseEvent("8",{item:s}),0===this.items.length&&(this.selectedIndex=-1,this.selectedValue=null,this._updateInputSelection()),this.rendered&&this.rendered(),!0},removeItem:function(e,t){var i=this._getItemByParam(e),s=-1;if(i&&null!=i.index&&!0!==t){for(var l=0;l<this.items.length;l++)if(this.items[l].label==i.label&&this.items[l].value==i.value){s=l;break}if(-1!=s)return this.removeAt(s)}if(-1==s)return this.removeAt(i.index)},getItems:function(){return this.items},disableItem:function(e){e=this._getItemByParam(e);this.disableAt(e.index)},enableItem:function(e){e=this._getItemByParam(e);this.enableAt(e.index)},disableAt:function(e){return!!this.items&&(!(e<0||e>this.items.length-1)&&(this.items[e].disabled=!0,this._renderItems(),!0))},enableAt:function(e){return!!this.items&&(!(e<0||e>this.items.length-1)&&(this.items[e].disabled=!1,this._renderItems(),!0))},destroy:function(){this.source&&this.source.unbindBindingUpdate&&this.source.unbindBindingUpdate(this.element.id),this._removeHandlers(),this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar.remove(),this.hScrollBar.remove(),this.content.remove(),C.jqx.utilities.resize(this.host,null,!0);var e=C.data(this.element,"jqxListBox");delete this.hScrollInstance,delete this.vScrollInstance,delete this.vScrollBar,delete this.hScrollBar,delete this.content,delete this.bottomRight,delete this.itemswrapper,delete this.visualItems,delete this.visibleItems,delete this.items,delete this.groups,delete this.renderedVisibleItems,delete this._mousewheelfunc,delete this._mousemovefunc,delete this._cachedItemHtml,delete this.itemsByValue,delete this._activeElement,delete this.source,delete this.events,this.input&&(this.input.remove(),delete this.input),e&&delete e.instance,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.element=null,delete this.element,this.host=null,delete this.set,delete this.get,delete this.call,delete this.host},_raiseEvent:function(e,t){if(1==this._stopEvents)return!0;var i,e=this.events[e],t=t=null==t?{owner:null}:t,e=((t.owner=this)._updateInputSelection(),new C.Event(e));return e.owner=this,e.args=t,i=null!=this.host?this.host.trigger(e):i}})}(jqxBaseFramework),function(S){S.jqx.parseSourceTag=function(e){var s=new Array,t=S(e).find("option"),l=S(e).find("optgroup"),n=!1;if(0===t.length&&0<(t=S(e).find("li")).length&&(n=!0),0===t.length){for(var i=[],r=S(e).find("tr"),h=S(e).find("th"),a=0,o=(0===h.length&&0<r.length&&(h=S(r[0]).find("td"),a=1),[]),d=[],i=[],c=0;c<r.length;c++){var u=r[c],m={};c===a+1&&(d=[]);for(var v=0;v<h.length;v++){var p,g=S.trim(S(h[v]).text()),x=S(u).find("td:eq("+v+")");m[g]=S.trim(x.text()),c===a&&(o.push({text:g,dataField:g}),d.push({name:g})),c===a+1&&(x="","string"===(p=typeof m[g])&&("true"===m[g]||"false"===m[g]?p="bool":isNaN(parseFloat(m[g]))||-1!==m[g].indexOf("-")||-1!==m[g].indexOf("/")?0<=m[g].indexOf("$")||0<=m[g].indexOf("%")?(p="number",0<=m[g].indexOf("$")&&(x="c"),0<=m[g].indexOf("%")&&(x="p"),m[g]=m[g].replace("%","").replace("$","")):"Invalid Date"!==new Date(m[g]).toString()&&(p="date",x="d"):(p="number",x=0<=m[g].indexOf(".")?"f":"n")),o[v].cellsformat=x,"number"===p&&(o[v].cellsalign="right",o[v].align="right"),d.push({name:g,type:p}))}1<=c&&(i[i.length]=m)}return{source:new S.jqx.dataAdapter({localdata:i,datatype:"array",datafields:d}),columns:o}}var b=null,b=-1,f=new Array;if(S.each(t,function(e){var t=0<l.find(this).length,i=(null==this.text||null!=this.label&&""!=this.label||(this.label=this.text),!0===n&&(this.label=S(this).text().trim(),this.selected=S(this).attr("data-selected"),this.checked=this.selected,this.value=S(this).attr("data-value")||e,this.disabled=S(this).attr("disabled")),{style:this.style.cssText,selected:this.selected,html:this.innerHTML.trim(),classes:this.className,disabled:this.disabled,value:this.value,label:this.label,title:this.title,originalItem:this});S.jqx.browser.msie&&S.jqx.browser.version<8&&!n&&""==i.value&&null!=this.text&&0<this.text.length&&(i.value=this.text),t&&(t=l.find(this).parent()[0].label,i.group=t,f[t]||(f[t]=new Array,f.length++),f[t].push(i)),this.selected&&(b=e),i.checked=this.selected,void 0!==i.label&&s.push(i)}),0<f.length){var I,y=new Array;for(I in f)if("indexOf"!==I){for(c=0;c<l.length;c++)if(I===l[c].label||l[c].text){l[c];break}S.each(f[I],function(e,t){void 0!==this.label&&y.push(this)})}}return y&&0<y.length?{items:y,index:b}:{items:s,index:b}},S.jqx._jqxListBox.item=function(){return{group:"",groupHtml:"",selected:!1,isGroup:!1,highlighted:!1,value:null,label:"",html:null,visible:!0,disabled:!1,element:null,width:null,height:null,initialTop:null,top:null,left:null,title:"",index:-1,checkBoxElement:null,originalItem:null,checked:!1,visibleIndex:-1}}}(jqxBaseFramework);