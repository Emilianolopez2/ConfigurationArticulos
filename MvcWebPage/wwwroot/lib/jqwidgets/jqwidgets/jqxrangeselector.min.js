!function(g){g.jqx.jqxWidget("jqxRangeSelector","",{}),g.extend(g.jqx._jqxRangeSelector.prototype,{defineInstance:function(){var e={width:400,height:100,min:0,max:100,range:{from:0,to:1/0,min:0,max:1/0},majorTicksInterval:10,minorTicksInterval:1,showMajorTicks:!0,showMinorTicks:!1,snapToTicks:!0,labelsFormat:null,markersFormat:null,showLabels:!0,labelsOnTicks:!0,markersPosition:"top",labelsFormatFunction:null,groupLabelsFormatFunction:null,markersFormatFunction:null,showGroupLabels:!1,showMarkers:!0,resizable:!0,moveOnClick:!0,disabled:!1,rtl:!1,padding:"auto",events:["change"]};return this===g.jqx._jqxRangeSelector.prototype||g.extend(!0,this,e),e},createInstance:function(e){var i=this;if(this._isTouchDevice=g.jqx.mobile.isTouchDevice(),!g.jqx.dataAdapter)throw new Error("jqxRangeSelector: Missing reference to the following module: 'jqxdata.js'.");var r=g.jqx.isHidden(this.host),s=(this.render(),this.host.width()),a=this.host.height();g.jqx.utilities.resize(this.host,function(){var e=i.host.width(),t=i.host.height();i.range=i.getRange(),r?(i.refresh(),r=!1):s==e&&a==t||i.refresh(),s=i.host.width(),a=i.host.height()})},render:function(){(1<this.host.children().length||this.rangeSelector)&&(this._removeHandlers(),this.rangeSelector&&this.rangeSelector.remove()),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-rangeselector")),this.host.children(":eq(0)").addClass(this.toThemeProperty("jqx-rangeselector-content")),this._id=this.element.id,"string"==typeof this.min||this.min instanceof Date?this._dataType="date":this._dataType="number",this._privateProperties(),this._checkProperties(),this._setSize(),this._scale(),this._initSlider()},refresh:function(e){1!=e&&(this.host.children(".jqx-rangeselector-ticks-container").remove(),this._removeHandlers(),this._privateProperties(),this._checkProperties(),this._setSize(),this._scale(),this._initSlider())},destroy:function(){this._removeHandlers(),this.host.remove()},setRange:function(e,t){if(t<e)throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'");var i=this._getValue();if(i.from!=e||i.to!=t){i="The set values are in the wrong format. Please set "+("number"==this._dataType?"numeric":"date")+" values.";if("string"==typeof e||e instanceof Date){if("number"==this._dataType)throw new Error(i)}else if("date"==this._dataType)throw new Error(i);e=this._validateInput(e),t=this._validateInput(t),(e=e>this._max?this._max:e)<this._min&&(e=this._min);var i=(t=(t=t>this._max?this._max:t)<this._min?this._min:t)-e,i=(i>this._range._max?t=e+this._range._max:i<this._range._min&&(t=e+this._range._min),this._valuesArray.indexOf(e)),r=this._valuesArray.indexOf(t),i=this._ticksArray[i],r=this._ticksArray[r],s=Math.abs(r-i),s=(this.slider[0].style.width=s+"px",this.rtl?r:i);this.slider[0].style.left=s,this._moveSlider(s),"date"==this._dataType&&(e=new Date(e),t=new Date(t)),this._raiseEvent("0",{type:null,from:e,to:t})}},val:function(e){if(0==arguments.length)return this.getRange();null!=e.from&&this.setRange(e.from,e.to)},getRange:function(){return this._getValue()},propertyChangedHandler:function(e,t,i,r){switch(t){case"showMinorTicks":1==r?g("#"+this._id+" .jqx-rangeselector-ticks-minor").css("visibility","visible"):g("#"+this._id+" .jqx-rangeselector-ticks-minor").css("visibility","hidden");break;case"showMarkers":var s=g("#"+this._id+"LeftMarker, #"+this._id+"RightMarker, #"+this._id+"LeftMarkerArrow, #"+this._id+"RightMarkerArrow");1==r?s.css("visibility","visible"):s.css("visibility","hidden");break;default:this.refresh()}},_raiseEvent:function(e,t){e=this.events[e],e=new g.Event(e);e.owner=this,e.args=t;try{var i=this.host.trigger(e)}catch(e){}return i},_setSize:function(){this.host.width(this.width),this.host.height(this.height)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},_scale:function(){var e=this.host.width(),t=this._max-this._min;this._unitPerPixel=parseFloat((t/e).toFixed(4)),this._pixelPerUnit=e/t,this._minWidth=this._roundNumber(this._range._min/this._unitPerPixel),this._maxWidth=this._roundNumber(this._range._max/this._unitPerPixel),this._minWidth=parseInt(this._minWidth),this._maxWidth=parseInt(this._maxWidth),"number"==this._dataType&&(this._majorTicksCount=t/this.majorTicksInterval,this._majorTicksCount=Math.floor(this._majorTicksCount)+1,this._majorTicksDistance=parseInt(this._roundNumber(e/(t/this.majorTicksInterval))),this._unitsCount=t/this.minorTicksInterval,this._unitsCount=Math.floor(this._unitsCount)+1,this._unitsDistance=parseInt(this._roundNumber(e/(t/this.minorTicksInterval)))),this._addTicks()},_addTicks:function(){this.host.append("<div id='"+this._id+"TicksContainer' class='jqx-rangeselector-ticks-container'></div>"),this.rangeSelector=g("#"+this._id+"TicksContainer"),this._majorTicksArray=new Array,this._ticksArray=new Array,this._valuesArray=new Array;var e=new String,t=(g("#"+this._id+"TicksContainer").append("<div id='labelPlaceholder' style='visibility: hidden; position: absolute;'></div>"),this.rangeSelector.height()),e="number"==this._dataType?this._addNumericTicks(t):this._addDateTicks(t),t=0;this.showLabels&&(t+=g("#labelPlaceholder").outerHeight()+6),"number"!=this._dataType&&this.showGroupLabels&&(t+=g("#labelPlaceholder").outerHeight()+6),"auto"==this.padding&&this.host.css("padding-bottom",t),g("#labelPlaceholder").remove(),g("#"+this._id+"TicksContainer").append(e),this._ticksArray.sort(function(e,t){return e-t});for(var i=1;i<this._ticksArray.length;i++)this._ticksArray[i]=this._roundNumber(this._ticksArray[i]);if(this._valuesArray.sort(function(e,t){return e-t}),"number"==this._dataType)for(i=1;i<this._valuesArray.length;i++)this._valuesArray[i]=this._roundNumber(this._valuesArray[i],"marker",!0);for(i=1;i<this._ticksArray.length;i++)this._ticksArray[i-1]==this._ticksArray[i]&&(this._ticksArray.splice(i,1),this._valuesArray.splice(i,1));this.rtl&&(this._valuesArray=this._valuesArray.reverse())},_addNumericTicks:function(e){for(var t=this,i=new String,r=0,s=this._min,a=this._max,h=0;h<this._majorTicksCount;h++){var o,n=this._id+"LabelTick"+(h+1),l=(h==this._majorTicksCount-1&&(r=this.host.width()),t.showMajorTicks?"visible":"hidden"),l=(i+="<div id='"+n+"' class='"+this.toThemeProperty("jqx-rangeselector-ticks")+" "+this.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+l+"; left: "+r+"px;'></div>",this._ticksArray.push(r),this._majorTicksArray.push(r),this._id+"Label"+(h+1)),d=s,u=(this._valuesArray.push(parseFloat(d.toFixed(4))),t.rtl&&(d=a),d=this._formatOutput(d,this.labelsFormat,1<=this.minorTicksInterval?0:2,"label"),g("#labelPlaceholder").html(d),g("#labelPlaceholder").width()),m=t.showLabels?"visible":"hidden",_=(t.labelsOnTicks&&(i+="<div id='"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+m+"; left: "+(r-u/2)+"px; top: "+e+"px;'>"+d+"</div>"),r),r=(s+=this.majorTicksInterval,a-=this.majorTicksInterval,(s-t._min)/t._unitPerPixel);r=parseInt(r),!this.labelsOnTicks&&h<this._majorTicksCount-1&&(o=Math.abs(_-r),i+="<div id='"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+m+"; left: "+(_+o/2-u/2)+"px; top: "+e+"px;'>"+d+"</div>")}for(var r=0,c=this.showMinorTicks?"visible":"hidden",s=this._min,h=0;h<this._unitsCount;h++){var n=this._id+"MinorTick"+(h+1),f=(h==this._unitsCount-1&&(r=this.host.width()),i+="<div id='"+n+"' class='"+this.toThemeProperty("jqx-rangeselector-ticks")+" "+this.toThemeProperty("jqx-rangeselector-ticks-minor")+" "+this.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+c+"; left: "+r+"px;'></div>",s),r=(-1===this._valuesArray.indexOf(parseFloat(f.toFixed(4)))&&(this._valuesArray.push(parseFloat(f.toFixed(4))),this._ticksArray.push(r)),((s+=this.minorTicksInterval)-t._min)/t._unitPerPixel);r=parseInt(r)}return i},_getMillisecondsByInterval:function(e){var t={};return"year"==e||e.years?(t.divisor=e.years||1,31536e6*t.divisor):"month"==e||e.months?(t.divisor=e.months||1,2592e6*t.divisor):"week"==e||e.weeks?(t.divisor=e.weeks||1,6048e5*t.divisor):"day"==e||e.days?(t.divisor=e.days||1,864e5*t.divisor):"hour"==e||e.hours?(t.divisor=e.hours||1,36e5*t.divisor):"minute"==e||e.minutes?(t.divisor=e.minutes||1,60*t.divisor*1e3):"second"==e||e.seconds?(t.divisor=e.seconds||1,1e3*t.divisor):"millisecond"==e||e.milliseconds?(t.divisor=e.milliseconds||1,+t.divisor):t},_addDateTicks:function(n){function e(e){var e="majorTicksInterval"==e?u.majorTicksInterval:u.minorTicksInterval,t=new Object;return"year"==e||e.years?(t.period="year",t.interval=864e5,t.divisor=e.years||1,t.value=31536e6*t.divisor):"month"==e||e.months?(t.period="month",t.interval=864e5,t.divisor=e.months||1,t.value=2592e6*t.divisor):"week"==e||e.weeks?(t.period="week",t.interval=864e5,t.divisor=e.weeks||1,t.value=6048e5*t.divisor):"day"==e||e.days?(t.period="day",t.interval=36e5,t.divisor=e.days||1,t.value=864e5*t.divisor):"hour"==e||e.hours?(t.period="hour",t.interval=6e4,t.divisor=e.hours||1,t.value=36e5*t.divisor):"minute"==e||e.minutes?(t.period="minute",t.interval=6e4,t.divisor=e.minutes||1,t.value=60*t.divisor*1e3):"second"==e||e.seconds?(t.period="second",t.interval=1e3,t.divisor=e.seconds||1,t.value=1e3*t.divisor):"millisecond"!=e&&!e.milliseconds||(t.period="millisecond",t.interval=1,t.divisor=e.milliseconds||1,t.value=+t.divisor),t}function t(e,t,i){for(var r,s,a=0,h=1,o=new Date(u._min).getHours(),n=864e5==t.interval,l=new Array,d=u._min;d<=u._max;d+=t.interval)1==n&&o!=(r=new Date(d).getHours())&&(1==r?s=1:23==r&&(s=-1),d-=36e5*s,o=new Date(d).getHours()),1==m(d,t.period)&&(a%t.divisor==0&&(i?l.push(d):_(d,e,h,t.interval),h++),a++);return l}var u=this,l=new String,m=function(e,t){var e=new Date(e),i=e.getDate(),r="year"==t&&0==e.getMonth()&&1==i,i="month"==t&&1==i,s="week"==t&&0==e.getDay(),a="day"==t&&0==e.getHours(),h="hour"==t&&0==e.getMinutes(),o="minute"==t&&0==e.getSeconds(),e="minute"==t&&0==e.getMilliseconds();return r||i||s||a||h||o||e||"millisecond"==t},_=function(e,t,i){var r,s,a,h,o=(e-u._min)/u._unitPerPixel;u.rtl&&(e="majorTicksInterval"==t?u._dateMajorTicks[u._dateMajorTicks.length-i]:u._dateMinorTicks[u._dateMinorTicks.length-i]),o=parseInt(o);-1===u._valuesArray.indexOf(e)&&(u._ticksArray.push(o),u._valuesArray.push(e),"majorTicksInterval"==t&&u._majorTicksArray.push(o)),"majorTicksInterval"==t?(t=u._id+"LabelTick"+i,a=u.showMajorTicks?"visible":"hidden",l+="<div id='"+t+"' class='"+u.toThemeProperty("jqx-rangeselector-ticks")+" "+u.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+a+"; left: "+o+"px;'></div>",t=u._formatOutput(t=e,u.labelsFormat,u.labelPrecision,"label"),g("#labelPlaceholder").html(t),e=g("#labelPlaceholder").width(),h=u._id+"Label"+i,r=u.showLabels?"visible":"hidden",u.labelsOnTicks?u.labelsOnTicks&&(l+="<div id='"+h+"' class='"+u.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+r+"; left: "+(o-e/2)+"px; top: "+n+"px;'>"+t+"</div>"):(s=u._getMillisecondsByInterval(u.majorTicksInterval)/u._unitPerPixel/2,l+="<div id='"+h+"' class='"+u.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+r+"; left: "+(s+o-e/2)+"px; top: "+n+"px;'>"+t+"</div>")):(a=u.showMinorTicks?"visible":"hidden",h=u._id+"MinorTick"+i,l+="<div id='"+h+"' class='"+u.toThemeProperty("jqx-rangeselector-ticks")+" "+u.toThemeProperty("jqx-rangeselector-ticks-minor")+" "+u.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+a+"; left: "+o+"px;'></div>")};return u._dateMajorTicks=t("majorTicksInterval",e("majorTicksInterval"),!0),u._dateMinorTicks=t("minorTicksInterval",e("minorTicksInterval"),!0),t("majorTicksInterval",e("majorTicksInterval")),t("minorTicksInterval",e("minorTicksInterval")),1==this.showGroupLabels&&this.showLabels&&this._addGroupLabels(g("#labelPlaceholder").height()+n),l},_addGroupLabels:function(e){var t=this,i=new Date(this._min),r=new Date(this._max);if(0<r.getFullYear()-i.getFullYear())var s="year",a=864e5;else if(0<r.getMonth()-i.getMonth())s="month",a=864e5;else{if(!(0<r.getDate()-i.getDate()))return;s="day",a=36e5}for(var h,o,n,l,d=new String,u=this.toThemeProperty("jqx-rangeselector-group-labels-ticks")+" "+this.toThemeProperty("jqx-slider-tick-horizontal"),m=1,_=this._min;_<this._max;_+=a){h=_,l=f=c=n=o=void 0,h=new Date(h),n=h.getFullYear(),c=h.getMonth(),f=h.getDate(),l=!0,"year"==s&&0==c&&1==f?o=n:"month"==s&&1==f?(o=g.jqx.dataFormat.formatdate(h,"MMMM"),0==c&&(o=n+" "+o)):"day"==s&&0==h.getHours()?o=g.jqx.dataFormat.formatdate(h,"dddd"):l=!1;var c,f={check:l,value:1==l&&t.groupLabelsFormatFunction?t.groupLabelsFormatFunction(o,h):o};1==f.check&&(c=(_-this._min)/this._unitPerPixel,d+="<div class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='left: "+c+"px; top: "+e+"px;'><div class='"+u+"'></div><div id='"+this._id+"GroupLabel"+m+"' class='"+this.toThemeProperty("jqx-rangeselector-group-labels")+"' style='margin-left: 5px;'>"+f.value+"</div></div>",m++)}g("#"+this._id+"TicksContainer").append(d)},_updateCursor:function(e,t){var i=this.element.style.cursor,r=this.slider.offset().left,s=r+parseInt(this.slider[0].style.width);r-5<e&&e<r+5||s-5<e&&e<s+5?""!=i&&"auto"!=i||(this.element.style.cursor="e-resize"):"e-resize"==i&&(this.element.style.cursor="auto")},_handleMouseMove:function(e){var t=this,i=t.slider,r=e.pageX,s=e.pageY,e=(t._isTouchDevice&&(r=(e=g.jqx.position(e)).left,s=e.top),t._hostOffset.left),a=t._hostWidth;if(t.resizable&&!t.dragging&&"none"==t.resizeDirection&&e<=r&&r<=e+a&&s>=t._hostOffset.top&&s<=t._hostOffset.top+t._hostHeight&&this._updateCursor(r,s),!t.isMouseDown)return!0;if(t._isTouchDevice&&(s<t._hostOffset.top||s>t._hostOffset.top+t._hostHeight))return!0;s=t._findNearestTick(t._sliderLeftOffset+r-t._mouseDownX);if((n=parseInt(s))<0)return!0;n<0&&(n=0);var h=parseInt(i[0].style.width);if(1==t.resizable&&!t.dragging){var o=n*t._unitPerPixel+t._min;if("left"==t.resizeDirection||t.isLeftMarkerCaptured){e+a+(c=t.isLeftMarkerCaptured?t.leftMarker.outerWidth():0)<(r=r<e-c?e-c:r)&&(r=e+a+c+1);var n,l=i[0].style.left,d=n-parseInt(l),u=parseInt(h-d);if(_=u,m=parseInt(t._maxWidth),_<parseInt(t._minWidth)||m<_||parseInt(t.rightMarker[0].style.left)<parseInt(t.leftMarker[0].style.left))if(r>t._mouseDownX){if(r=t.sliderRight-t._minWidth-e,h==(u=t._minWidth))return!0;if((n=s=t._findNearestTick(r))<0)return!0;parseInt(l),t._unitPerPixel,t._min;o=n*t._unitPerPixel+t._min}else{if(!(0!=t._maxWidth&&r<t._mouseDownX&&u>t._maxWidth))return!0;if(r=t.sliderRight-t._maxWidth-e,h==(u=t._maxWidth))return!0;if((n=s=t._findNearestTick(r))<0)return!0;parseInt(l),t._unitPerPixel,t._min;o=n*t._unitPerPixel+t._min}t.slider[0].style.left=n+"px",l!=i[0].style.left&&(t.slider[0].style.width=u+"px");var m=t._findNearestTick(n),_=t._valuesArray[t._ticksArray.indexOf(m)];null!=_?(t.leftMarkerValue[0].innerHTML=t._formatOutput(_,t.markersFormat,0,"left"),n!=m&&(t.slider[0].style.left=m+"px")):t.leftMarkerValue[0].innerHTML=t._formatOutput(o,t.markersFormat,0,"left"),t.oldX=r,t.moved=!0}else if("right"==t.resizeDirection||t.isRightMarkerCaptured){var c,h=!1,s=(e+a+(c=t.isRightMarkerCaptured?t.rightMarker.outerWidth():0)<(r=r<e-c?e-c:r)&&(r=e+a+c,h=!0),t._sliderInitialWidth),l=t._findNearestTick(s+t._sliderLeftOffset),i=t._findNearestTick(s+r-t._mouseDownX+t._sliderLeftOffset);if(i<0)return!0;(u=s-(d=l-i))<=0&&(d=s,u=0);_=parseInt(t.element.style.width),o=(0<=t.element.style.width.indexOf("%")&&(_=t.host.width()),(h||t._sliderLeftOffset+u>=_)&&(u=_-t._sliderLeftOffset,0),(u=u>parseInt(this._maxWidth)?parseInt(this._maxWidth):u)<parseInt(this._minWidth)&&(u=parseInt(this._minWidth)),t.slider[0].style.width=u+"px",(t._sliderLeftOffset+u)*t._unitPerPixel+t._min),m=t._findNearestTick(t._sliderLeftOffset+u),e=t._valuesArray[t._ticksArray.indexOf(m)];null!=e?(t._sliderLeftOffset+u!=m&&(t.slider[0].style.width=m-t._sliderLeftOffset+"px"),t.rightMarkerValue[0].innerHTML=t._formatOutput(e,t.markersFormat,0,"right")):t.rightMarkerValue[0].innerHTML=t._formatOutput(o,t.markersFormat,0,"right"),t.oldX=r}t._layoutShutter(),t._layoutMarkers(),t.moved=!0}1==t.dragging&&(t._moveSlider(n,!0),t.oldX=r)},_moveSlider:function(e,t){this.moved=!0;var i,r,s,a=parseInt(this.slider[0].style.width),h=parseInt(e+a),o=this._hostWidth,n=e;n<0&&(e=n=0),o<n+a&&(e=n=o-a),0<=n&&n+a<=o&&(this.slider[0].style.left=n+"px",o=this._findNearestTick(n),i=-1!=this._majorTicksArray.indexOf(o),null!=(r=this._valuesArray[this._ticksArray.indexOf(o)])?(this.leftMarkerValue[0].innerHTML=this._formatOutput(r,this.markersFormat,0,"left"),e!=o&&i&&t&&(this.slider[0].style.left=o+"px",h=parseInt(o+a))):this.leftMarkerValue[0].innerHTML=this._formatOutput(n*this._unitPerPixel+this._min,this.markersFormat,0,"left"),r=this._findNearestTick(h),null!=(e=this._valuesArray[this._ticksArray.indexOf(r)])?(s=-1!=this._majorTicksArray.indexOf(r),this.rightMarkerValue[0].innerHTML=this._formatOutput(e,this.markersFormat,0,"right"),h!=r&&s&&i&&t&&(this.slider[0].style.width=r-o+"px")):this.rightMarkerValue[0].innerHTML=this._formatOutput((n+a)*this._unitPerPixel+this._min,this.markersFormat,0,"right")),this._layoutShutter(),this._layoutMarkers()},_initSlider:function(){var a=this,e=this.toThemeProperty("jqx-rangeselector-shutter")+" "+this.toThemeProperty("jqx-scrollbar-state-normal"),e=(g("#"+this._id+"TicksContainer").append("<div id='"+this._id+"ShutterLeft' class='"+e+"'></div><div id='"+this._id+"Slider' class='"+this.toThemeProperty("jqx-rangeselector-slider")+" "+this.toThemeProperty("jqx-scrollbar-thumb-state-normal")+"'><div class='"+this.toThemeProperty("jqx-rangeselector-inner-slider")+"'></div></div><div id='"+this._id+"ShutterRight' class='"+e+"'></div>"),this.slider=g("#"+this._id+"Slider"),this.shutterLeft=g("#"+this._id+"ShutterLeft"),this.shutterRight=g("#"+this._id+"ShutterRight"),this._hostOffset=this.rangeSelector.offset(),this._hostWidth=this.rangeSelector.width(),this._hostHeight=this.rangeSelector.height(),this._hostOffset),t=this._initRange(),i=t.left,t=(t.right-i)/this._unitPerPixel,t=(this.slider[0].style.width=Math.round(t)+"px",e.left+parseInt((i-this._min)/this._unitPerPixel));if(this.slider.offset({left:t}),this._layoutShutter(),this._initMarkers(),0==this.disabled){this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),this.addHandler(this.host,"dragstart.rangeselector"+this._id,function(){return!1}),this.addHandler(g(window),"jqxReady.rangeselector",function(){return a._layoutMarkers(),!1}),this.isSliderCaptured=!1,this.resizeDirection="none",this.isLeftMarkerCaptured=!1,this.isRightMarkerCaptured=!1,this.dragging=!1,this._mouseDownX;var h,o,r,s,e="mousedown.rangeselector"+this.element.id,i=(this._isTouchDevice&&(e=g.jqx.mobile.getTouchEventName("touchstart")+".rangeselector"+this.element.id),this.addHandler(this.host,e,function(e){a.isMouseDown=!0,a._hostOffset=a.rangeSelector.offset(),a._hostWidth=a.rangeSelector.width(),a._hostHeight=a.rangeSelector.height(),a._sliderLeftOffset=parseInt(a.slider[0].style.left);var t=e.pageX,i=e.pageY,e=(a._isTouchDevice&&(t=(e=g.jqx.position(e)).left,i=e.top),a._initialSliderOffset=t-a.slider.offset().left,a.slider.width()),e=(a._sliderInitialWidth=e,h=a.slider.offset().left,o=a._sliderInitialWidth,a.initialOffset=h,parseInt(h+o));if(a.oldX=t,a._mouseDownX=t,a.resizeDirection="none",a.sliderRight=e,h-5<t&&t<h+5&&a._heightCheck(i))a.isSliderCaptured=!1,a.dragging=!1,a.resizeDirection="left";else if(e-5<t&&t<e+5&&a._heightCheck(i))a.isSliderCaptured=!1,a.dragging=!1,a.resizeDirection="right";else if(h+5<=t&&t<=e+5&&a._heightCheck(i))a.isSliderCaptured=!0,a.dragging=!0;else if(a.isSliderCaptured=!1,a.dragging=!1,a.moveOnClick){if(a.isLeftMarkerCaptured||a.isRightMarkerCaptured)return!1;var r=a._sliderLeftOffset+a._initialSliderOffset,s=((r=a._findNearestTick(r))<0&&(r=0),parseInt(a.slider[0].style.width));i>=a.slider.offset().top&&(e<t?a._moveSlider(r-s,!0):a._moveSlider(r,!0))}}),this.addHandler(a.leftMarker,e,function(e){a.leftMarkerAndArrow.addClass(a.toThemeProperty("jqx-fill-state-pressed")),a.oldLeftX=e.pageX,a._isTouchDevice&&(e=g.jqx.position(e),a.oldLeftX=e.left),a._mouseDownX=a.oldLeftX,a.isLeftMarkerCaptured=!0}),this.addHandler(a.rightMarker,e,function(e){a.rightMarkerAndArrow.addClass(a.toThemeProperty("jqx-fill-state-pressed")),a.oldRightX=e.pageX,a._isTouchDevice&&(e=g.jqx.position(e),a.oldRightX=e.left),a._mouseDownX=a.oldRightX,a.isRightMarkerCaptured=!0}),this.addHandler(g(document),"selectstart.rangeselector"+this._id,function(e){if(1==a.isSliderCaptured||1==a.isLeftMarkerCaptured||1==a.isRightMarkerCaptured||1==a.dragging)return e.preventDefault(),!1}),"mousemove.rangeselector"+this.element.id),n=(this._isTouchDevice&&(i=g.jqx.mobile.getTouchEventName("touchmove")+".rangeselector"+this.element.id),this.addHandler(g(document),i,function(e){a._handleMouseMove(e)}),function(e){try{var t,i=a.moved;a.moved=!1,a.isMouseDown=!1,a.dragging=!1,a.resizeDirection="none",1==a.isLeftMarkerCaptured&&(a.leftMarkerAndArrow.removeClass(a.toThemeProperty("jqx-fill-state-pressed")),a.isLeftMarkerCaptured=!1),1==a.isRightMarkerCaptured&&(a.rightMarkerAndArrow.removeClass(a.toThemeProperty("jqx-fill-state-pressed")),a.isRightMarkerCaptured=!1),i&&(t=a._getValue(),a._raiseEvent("0",{type:"mouse",from:t.from,to:t.to}))}catch(e){}});this.addHandler(g(document),"mouseup.rangeselector"+this._id,function(e){n(e)});try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(r=function(e){n(e)},s=null,(s=window.parent&&document.referrer?document.referrer:s)&&-1!=s.indexOf(document.location.host)&&window.top.document&&(window.top.document.addEventListener?window.top.document.addEventListener("mouseup",r,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",r)))}catch(e){}}else this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._moveSlider(parseInt(a.slider[0].style.left)),this.moved=!1},_initMarkers:function(){var t,e=g("#"+this._id+"TicksContainer"),i=this.toThemeProperty("jqx-rangeselector-markers")+" "+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-fill-state-normal"),i=(e.append("<div id='"+this._id+"LeftMarker' class='"+i+"'></div><div id='"+this._id+"RightMarker' class='"+i+"'></div>"),this.toThemeProperty("jqx-rangeselector-marker-arrow")+" "+this.toThemeProperty("jqx-fill-state-normal")),e=("bottom"==this.markersPosition?i+=" "+this.toThemeProperty("jqx-rangeselector-marker-arrow-bottom"):i+=" "+this.toThemeProperty("jqx-rangeselector-marker-arrow-top"),e.append("<div id='"+this._id+"LeftMarkerArrow' class='"+i+" "+this.toThemeProperty("jqx-rangeselector-marker-left-arrow")+"'></div>"),e.append("<div id='"+this._id+"RightMarkerArrow' class='"+i+" "+this.toThemeProperty("jqx-rangeselector-marker-right-arrow")+"'></div>"),g("#"+this._id+"LeftMarker").append("<div id='"+this._id+"LeftMarkerValue' class='"+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-rangeselector-markers-value")+"'></div>"),g("#"+this._id+"RightMarker").append("<div id='"+this._id+"RightMarkerValue' class='"+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-rangeselector-markers-value")+"'></div>"),g("#"+this._id+"LeftMarker, #"+this._id+"RightMarker, #"+this._id+"LeftMarkerArrow, #"+this._id+"RightMarkerArrow")),r=g("#"+this._id+"LeftMarker, #"+this._id+"LeftMarkerArrow"),s=g("#"+this._id+"RightMarker, #"+this._id+"RightMarkerArrow"),i=(1==this.showMarkers?e.css("visibility","visible"):e.css("visibility","hidden"),0==this.disabled&&1==this.resizable&&((t=this).addHandler(r,"mouseenter.rangeselector"+this._id,function(e){t.element.style.cursor="pointer",r.addClass(t.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(r,"mouseleave.rangeselector"+this._id,function(e){t.element.style.cursor="auto",r.removeClass(t.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(s,"mouseenter.rangeselector"+this._id,function(e){t.element.style.cursor="pointer",s.addClass(t.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(s,"mouseleave.rangeselector"+this._id,function(e){t.element.style.cursor="auto",s.removeClass(t.toThemeProperty("jqx-fill-state-hover"))})),this.leftMarkerAndArrow=r,this.rightMarkerAndArrow=s,this.leftMarkerArrow=g("#"+this._id+"LeftMarkerArrow"),this.rightMarkerArrow=g("#"+this._id+"RightMarkerArrow"),this.leftMarker=g("#"+this._id+"LeftMarker"),this.rightMarker=g("#"+this._id+"RightMarker"),this.leftMarkerValue=g("#"+this._id+"LeftMarkerValue"),this.rightMarkerValue=g("#"+this._id+"RightMarkerValue"),this._initRange());this._updateMarkersValues(i.left,i.right),this._layoutMarkers(),"auto"==this.padding?(this.host.css("padding-left",this.leftMarker[0].offsetWidth),this.host.css("padding-right",this.rightMarker[0].offsetWidth),this.host.css("padding-top",this._leftMarkerHeight+7)):this.host.css("padding",this.padding)},_layoutMarkers:function(){var e,t,i,r,s,a;1==this.showMarkers&&(this._hostOffset||(this._hostOffset=this.rangeSelector.offset()),this._leftMarkerHeight||(this._leftMarkerHeight=this.leftMarker.outerHeight(),this._rightMarkerHeight=this.rightMarker.outerHeight()),this._hostOffset.top,e=parseInt(this.slider[0].style.left)+this._hostOffset.left,t=-5,a=(t="bottom"==this.markersPosition?parseInt(this.element.style.height)+4+this._rightMarkerHeight:t)-this._leftMarkerHeight,i=t-this._rightMarkerHeight,"bottom"==this.markersPosition&&(t=parseInt(this.element.style.height)-6),s=1+e-(r=this.leftMarker[0].offsetWidth)-this._hostOffset.left,this.leftMarker[0].style.left=s+"px",this.leftMarker[0].style.top=a+"px",this.leftMarkerArrow[0].style.left=2+s+r+"px",this.leftMarkerArrow[0].style.top=6+t+"px",a=e+parseInt(this.slider[0].style.width)-this._hostOffset.left,this.rightMarker[0].style.left=a+"px",this.rightMarker[0].style.top=i+"px",this.rightMarkerArrow[0].style.left=7+a+"px",this.rightMarkerArrow[0].style.top=6+t+"px")},_updateMarkersValues:function(e,t){this.leftMarkerValue[0].innerHTML=this._formatOutput(e,this.markersFormat,0,"left",!0),this.rightMarkerValue[0].innerHTML=this._formatOutput(t,this.markersFormat,0,"right",!0)},_removeHandlers:function(){var e=this.element.id,t=g("#"+e+"LeftMarker, #"+e+"LeftMarkerArrow"),i=g("#"+e+"RightMarker, #"+e+"RightMarkerArrow"),r="mousemove.rangeselector"+e,s="mousedown.rangeselector"+e;this._isTouchDevice&&(r=g.jqx.mobile.getTouchEventName("touchmove")+".rangeselector"+e,s=g.jqx.mobile.getTouchEventName("touchstart")+".rangeselector"+e),this.removeHandler(g(document),r),this.removeHandler(g(document),"mouseup.rangeselector"+e),this.removeHandler(this.host,s),this.removeHandler(this.host,"click.rangeselector"+e),this.removeHandler(this.host,"dragstart.rangeselector"+e),this.removeHandler(t,"mouseenter.rangeselector"+e),this.removeHandler(t,"mouseleave.rangeselector"+e),this.removeHandler(i,"mouseenter.rangeselector"+e),this.removeHandler(i,"mouseleave.rangeselector"+e),this.removeHandler(g("#"+e+"LeftMarker"),s),this.removeHandler(g("#"+e+"RightMarker"),s),this.removeHandler(g("#"+e+"LeftMarkerValue, #"+e+"RightMarkerValue"),"selectstart.rangeselector"+e)},_heightCheck:function(e){var t=this.slider,i=t.offset().top;return i<=e&&e<=i+t.height()},_checkProperties:function(){(this._range._from<this._min||this._range._from>this._min&&this._range._from>this._max)&&(this._range._from=this._min),(this._range._to>this._max||this._range._to<this._min&&this._range._to<this._max)&&(this._range._to=this._max);var e=this._max-this._min,e=(this._range._min>e&&(this._range._min=e),this._range._max>e&&(this._range._max=e),this._range._to-this._range._from);e<this._range._min?this._range._to=this._range._from+this._range._min:e>this._range._max&&(this._range._to=this._range._from+this._range._max)},_findNearestTick:function(e){for(var t=0,i=Math.abs(e-this._ticksArray[0]),r=1;r<this._ticksArray.length;r++){var s=Math.abs(e-this._ticksArray[r]);s<i&&(i=s,t=r)}return this._ticksArray[t]},_privateProperties:function(){this._min=this._validateInput(this.min),this._max=this._validateInput(this.max),this._range=new Object,this._range._from=this._validateInput(null!=this.range.from?this.range.from:0),this._range._to=this._validateInput(null!=this.range.to?this.range.to:1/0),this._range._min=this._minMaxDate(null!=this.range.min?this.range.min:0),this._range._max=this._minMaxDate(null!=this.range.max?this.range.max:1/0)},_validateInput:function(e){var t;return"number"==typeof e?t=e:"string"==typeof e?t=Date.parse(e):e instanceof Date&&(t=e.getTime()),t},_minMaxDate:function(e){if("number"==typeof e)return e;var t;switch(e){case"millisecond":t=1;break;case"second":t=1e3;break;case"minute":t=6e4;break;case"hour":t=36e5;break;case"day":t=864e5;break;case"week":t=6048e5;break;default:t=e.milliseconds||(0+e.seconds?1e3*e.seconds:0+e.minutes?6e4*e.minutes:0+e.hours?36e5*e.hours:0+e.days?864e5*e.days:0+e.weeks?6048e5*e.weeks:0)}return t},_formatOutput:function(e,t,i,r,s){var a,h;if(this.values||(this.values=new Array),this.values[r]=e,"label"==r&&this.labelsFormatFunction)a="date"==this._dataType?this._roundDate(e):this._roundNumber(e,"label"),a=this.labelsFormatFunction(a);else if("label"!=r&&this.markersFormatFunction)"date"==this._dataType&&(a=this._roundDate(e)),a=this.markersFormatFunction(e,r);else if(t)a="number"==this._dataType?g.jqx.dataFormat.formatnumber(e,t):(a=this._roundDate(e),g.jqx.dataFormat.formatdate(a,t));else{if("date"==this._dataType)throw null==this.labelsFormat&&null==this.markersFormat?h="both labelsFormat and markersFormat":null==this.labelsFormat?h="labelsFormat":null==this.markersFormat&&(h="markersFormat"),new Error("When the data format is date, "+h+" should be set.");a=e.toFixed(i)}return a},_getValue:function(e){var t=this,i=t.minorTicksInterval;function r(e){return"number"===t._dataType?Math.round(e/i)*i:t._roundNumber(e,"marker")}var s=this.slider,a=s.width(),h=new Object,s=(s.offset().left-this.rangeSelector.offset().left)*this._unitPerPixel+this._min;return h.from=r(s),h.to=r(s+a*this._unitPerPixel),e||1!=this.snapToTicks||(s=this._findNearestTick((h.from-this._min)/this._unitPerPixel),h.from=this._valuesArray[this._ticksArray.indexOf(s)],a=this._findNearestTick((h.to-this._min)/this._unitPerPixel),h.to=this._valuesArray[this._ticksArray.indexOf(a)]),"date"==this._dataType&&(h.from=new Date(h.from),h.to=new Date(h.to)),h},_roundNumber:function(e,t,i){"marker"==t&&1==i&&(e=parseFloat(e));t=parseFloat(e);return t},_roundDate:function(e){"number"==typeof e&&(e=new Date(e));var t,i=this._max-this._min;return 12096e5<i?(t=e.getDate(),12<e.getHours()&&(e.setDate(t+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0))):1728e5<i&&(e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0)),e},_layoutShutter:function(){var e=parseInt(this.slider[0].style.left),t=(this.shutterLeft[0].style.width=e+"px",this.shutterLeft[0].style.left="0px",g.jqx.browser.msie&&g.jqx.browser.version<9&&(this.shutterLeft[0].style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=75)",this.shutterRight[0].style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=75)"),1+e+parseInt(this.slider[0].style.width)),i=(this.shutterRight[0].style.left=t+"px",parseInt(this.element.style.width)),e=(i=0<=this.element.style.width.indexOf("%")?parseInt(this.host.width()):i)-1-e-parseInt(this.slider[0].style.width);this.shutterRight[0].style.width=1+(e=e<0?0:e)+"px",t+1+e<2+i&&(this.shutterRight[0].style.width=2+e+"px"),0==e&&(this.shutterRight[0].style.width="0px")},_initRange:function(){if(this._range._from>this._range._to)throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'");return{left:this._range._from,right:this._range._to}}})}(jqxBaseFramework);