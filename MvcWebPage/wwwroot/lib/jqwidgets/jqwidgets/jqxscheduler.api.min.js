!function(M){M.jqx.scheduler||(M.jqx.scheduler={}),M.jqx.scheduler.utilities={weekDays:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()},areWeekDaysIncluded:function(e,i){var n=!1;return M.each(e,function(e,t){if(t===i)return!(n=!0)}),n},getStartOfDay:function(e){var t=new M.jqx.date(e.year(),e.month(),e.day(),0,0,0);return t.timeZone=e.timeZone,t},getEndOfDay:function(e){var t=new M.jqx.date(e.year(),e.month(),e.day(),23,59,59);return t.timeZone=e.timeZone,t},getDaysCount:function(e,t){for(var i=1;e<t;)e.day()!=t.day()&&i++,e=e.addDays(1);return i},getStartOfWeek:function(e,t){var i=e.dayOfWeek(),t=t.firstDay;return i<t&&(i+=7),e.addDays(-(i-t)).date()},getEndOfWeek:function(e,t,i){return this.getStartOfWeek(e,t,i).addDays(7)},getEndOfMonth:function(e,t){var i=e.daysInMonth(),i=new M.jqx.date(e.year(),e.month(),i,23,59,59);return i.timeZone=e.timeZone,i},rangeIntersection:function(e,t,i,n){e=e.dateData,i=i.dateData,t=t.dateData,n=n.dateData;if(e<=i&&i<t)return!0;if(i<e&&e<n)return!0;if(e==i||t==n)return!0;if(e<i){if(i<t&&t<n)return!0;if(n<t)return!0}else{if(e<n&&n<t)return!0;if(t<n)return!0}return!1},rangeContains:function(e,t,i,n){return e<=i&&n<=t},monthDays:[31,28,31,30,31,30,31,31,30,31,30,31],msPerDay:864e5,maxYear:9999,ORDINAL_BASE:new Date(1970,0,1),getYearDay:function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return Math.ceil((t-new Date(e.getFullYear(),0,1))/M.jqx.scheduler.utilities.msPerDay)+1},isLeapYear:function(e){return(e=e instanceof Date?e.getFullYear():e)%4==0&&e%100!=0||e%400==0},tzOffset:function(e){return 60*e.getTimezoneOffset()*1e3},monthRange:function(e,t){e=new Date(e,t,1);return[M.jqx.scheduler.utilities.getWeekday(e),M.jqx.scheduler.utilities.getMonthDays(e)]},getMonthDays:function(e){var t=e.getMonth();return 1==t&&M.jqx.scheduler.utilities.isLeapYear(e)?29:M.jqx.scheduler.utilities.monthDays[t]},getWeekday:function(e){return[6,0,1,2,3,4,5][e.getDay()]},combine:function(e,t){return t=t||e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},sort:function(e){e.sort(function(e,t){return e.getTime()-t.getTime()})},timeToUntilString:function(e){for(var t,e=new Date(e),i=[e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),"T",e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),"Z"],n=0;n<i.length;n++)t=i[n],!/[TZ]/.test(t)&&t<10&&(i[n]="0"+String(t));return i.join("")},untilStringToDate:function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(e);if(t)return new Date(Date.UTC(t[1],t[2]-1,t[3],t[5]||0,t[6]||0,t[7]||0));throw new Error("Invalid UNTIL value: "+e)},Time:function(e,t,i){this.hour=e,this.minute=t,this.second=i;var n=this.that=this;this.getHours=function(){return n.hour},this.getMinutes=function(){return n.minute},this.getSeconds=function(){return n.second},this.getTime=function(){return 1e3*(60*n.hour*60+60*n.minute+n.second)}}},M.jqx.scheduler.appointment=function(){var a=this;if(a.from=new M.jqx.date,a.to=(new M.jqx.date).addHours(1),a.subject="",a.description="",a.location="",a.tooltip="",a.hidden=!1,a.resourceId=null,a.id="",a.background=null,a.color=null,a.borderColor=null,a.status="busy",a.style=null,a.exceptions=new Array,a.exceptionDates=new Array,a.recurrencePattern=null,a.recurrenceException=new Array,a.occurrenceEnumerator=null,a.rootAppointment=null,a.hiddenByResourceId=!1,a.draggable=!0,a.resizable=!0,a.recurrentAppointment=!1,a.allDay=!1,a.readOnly=!1,a.showStatus=!0,a.timeZone=null,a.scheduler=null,a.elements=new Array,a.appointmentObject=!0,a.duration=function(){var e=a.to-a.from;return new M.jqx.timeSpan(1e4*e)},a.toJSON=function(e){function i(e){return(e<10?"0":"")+e}function t(e,t){return e?t?e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"Z":e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+"Z":""}var n={};return n.id=a.id,n.from=t(a.from.toDate(),e),n.to=t(a.to.toDate(),e),n.subject=a.subject,n.status=a.status,n.location=a.location,n.description=a.description,n.title=a.title,n.resourceId=a.resourceId,a.recurrencePattern?n.recurrencePattern=a.recurrencePattern.toString():n.recurrencePattern="",a.recurrenceException&&0<a.recurrenceException.length?n.recurrenceException=function(){for(var e="",t=0;t<a.recurrenceException.length;t++)e+=a.recurrenceException[t].toString(),t<a.recurrenceException.length-1&&(e+=",");return e}():n.recurrenceException="",n.dtstamp=t(new Date,e),JSON.stringify(n)},a.toString=function(i){function e(e){for(var t="";75<e.length;)t+=e.substr(0,75)+"\n",e=" "+e.substr(75);return t+=e}function n(e){return(e<10?"0":"")+e}function r(e,t){return e?t?""+e.getFullYear()+n(e.getMonth()+1)+n(e.getDate())+"T"+n(e.getHours())+n(e.getMinutes())+n(e.getSeconds()):""+e.getUTCFullYear()+n(e.getUTCMonth()+1)+n(e.getUTCDate())+"T"+n(e.getUTCHours())+n(e.getUTCMinutes())+n(e.getUTCSeconds())+"Z":""}var t=a.status;return"outOfOffice"==(t="free"==(t="tentative"==(t="busy"==(t=t||"CONFIRMED").toLowerCase()?"CONFIRMED":t).toLowerCase()?"TENTATIVE":t).toLowerCase()?"CANCELLED":t).toLowerCase()&&(t="CANCELLED"),"BEGIN:VEVENT\nUID:"+a.id+"\nDTSTAMP:"+r(new Date,i)+"\n"+e("TITLE:"+a.subject)+"\nDTSTART:"+r(a.from.toDate(),i)+"\nDTEND:"+r(a.to.toDate(),i)+"\n"+(a.recurrencePattern?"RRULE:"+a.recurrencePattern.toString()+"\n":"")+(a.recurrenceException&&0<a.recurrenceException.length?"EXDATE:"+function(){for(var e="",t=0;t<a.recurrenceException.length;t++)e+=r(a.recurrenceException[t].toDate(),i),t<a.recurrenceException.length-1&&(e+=",");return e}()+"\n":"")+(a.subject?e("SUMMARY:"+a.subject)+"\n":"")+"TRANSP:OPAQUE\n"+(a.status?e("STATUS:"+t)+"\n":"")+(a.description?e("DESCRIPTION:"+a.description)+"\n":"")+(a.location?e("LOCATION:"+a.location)+"\n":"")+"END:VEVENT"},a.range=function(){return a.allDay?{from:M.jqx.scheduler.utilities.getStartOfDay(a.from),to:M.jqx.scheduler.utilities.getEndOfDay(a.to)}:{from:a.from,to:a.to}},a.clearRecurrence=function(){a.recurrencePattern&&(a.exceptions=new Array,a.exceptionDates=new Array,a.recurrencePattern=null,a.recurrenceException=new Array,a.hidden=!1)},a.isAllDayAppointment=function(){return 1<=this.duration().days()||this.allDay},a.cloneAppointmentAttributes=function(e){e.subject=a.subject,e.description=a.description,e.location=a.location,e.tooltip=a.tooltip,e.resourceId=a.resourceId,e.category=a.category,e.status=a.status,e.rootAppointment=a,e.color=a.color,e.borderColor=a.borderColor,e.background=a.background,e.hidden=a.hidden,e.timezone=a.timeZone,e.style=a.style,e.hiddenByResourceId=a.hiddenByResourceId},a.createOccurrence=function(e){if(null==e)return null;var t=new M.jqx.scheduler.appointment,i=(t.allDay=a.allDay,a.duration());return a.allDay&&(i=new M.jqx.timeSpan(1e4*(a.to-a.from))),t.from=e,t.to=e.add(i),t.occurrenceFrom=e.clone(),t.subject=a.subject,t.description=a.description,t.location=a.location,t.tooltip=a.tooltip,t.resourceId=a.resourceId,t.category=a.category,t.status=a.status,t.rootAppointment=a,t.color=a.color,t.draggable=a.draggable,t.resizable=a.resizable,t.borderColor=a.borderColor,t.background=a.background,t.recurrentAppointment=!0,t.timeZone=a.timeZone,t.style=a.style,t.hiddenByResourceId=a.hiddenByResourceId,t.boundAppointment=a.boundAppointment,a.hiddenByResourceId&&(t.hidden=!0),t.id=a.id+"."+M.jqx.scheduler.utilities.guid(),a.hidden=!0,a.occurrenceIndex++,t},a.clone=function(){var e=new M.jqx.scheduler.appointment;return e.allDay=a.allDay,e.from=a.from.clone(),e.to=a.to.clone(),e.subject=a.subject,e.description=a.description,e.location=a.location,e.tooltip=a.tooltip,e.resourceId=a.resourceId,e.category=a.category,e.status=a.status,e.color=a.color,e.borderColor=a.borderColor,e.background=a.background,e.style=a.style,e.timeZone=a.timeZone,e.hiddenByResourceId=a.hiddenByResourceId,a.hiddenByResourceId&&(e.hidden=!0),e.id=a.id+"."+M.jqx.scheduler.utilities.guid(),e},a.isRecurrentAppointment=function(){return a.recurrentAppointment||null!=a.recurrencePattern},a.anyExceptions=function(){return null!=a.exceptions&&0<a.exceptions.length},a.anyOccurrences=function(){return null!=a.occurrenceEnumerator&&a.occurrenceEnumerator.getNextAppointment()},a.isException=function(){var e=a.rootAppointment||this;if(!e.recurrenceException)return!1;for(var t=0;t<e.recurrenceException.length;t++){var i=e.recurrenceException[t];if(a.occurrenceFrom&&i.equals(a.occurrenceFrom))return!0}return!1},a.getOccurrences=function(e,t){a.occurrenceIndex=0;e=null!==e?e:a.from,e=new M.jqx.scheduler.recurrentAppointmentsList(a,a.calendar,e,t,a.scheduler);return a.occurrences=e.list,e.list},1===arguments.length)if("object"==M.type(arguments[0]))for(var e in arguments[0]){var t=arguments[0][e];void 0!==this[e]&&(this[e]=t)}else a.from=arguments[0],a.to=new M.jqx.date(a.from).addHours(1);else 2===arguments.length?(a.from=arguments[0],a.to=arguments[1]):3===arguments.length&&(a.from=arguments[0],a.to=arguments[1],a.subject=arguments[2]);null!=a.recurrencePattern&&a.recurrencePattern.setFrom(a.from)},M.jqx.scheduler.recurrentAppointmentsList=function(){var l=this;return l.recurrentAppointment=null,l.currentTime=null,l.calendar=M.jqx.scheduler.calendar,l.from=new M.jqx.date(0),l.to=new M.jqx.date(9999,12,31),l.foundItems=0,l.list=new Array,l.scheduler=null,l.getOccurrences=function(e,t,i){return(null==e?l:new M.jqx.scheduler.recurrentAppointmentsList(e,l.calendar,t,i)).list},l.current=function(){return l.recurrentAppointment.createOccurrence(l.currentTime)},l.fillList=function(){l.currentTime=null,l.foundItems=0,l.list=new Array;var e=l.recurrentAppointment.recurrencePattern;if(e.step=0,e.current=0,e.currentYearDay=0,null==e)return!1;for(;l.getNextAppointment(e);){var t=l.current();t&&l.list.push(t)}},l.getNextAppointment=function(e){if(null==l.recurrentAppointment)return!1;this.scheduler._views[this.scheduler._view].type;var t=this.scheduler._views[this.scheduler._view],i=0;switch(e.freq){case"weekly":i=7;break;case"monthly":i=31;break;case"yearly":i=365}for(var n=0;n<4294967295;n++){var r=e.getNewOccurenceDate();if(r){if(e.currentTime=r,e.to<r&&e.to.addDays(i)>=r||l.to<r&&l.to.addDays(i)>=r)return!(l.currentTime=null);if(M.jqx.scheduler.utilities.getEndOfDay(e.to).addDays(i)<r||M.jqx.scheduler.utilities.getEndOfDay(l.to).addDays(i)<r)return l.currentTime=null,!1;var a,o=l.getCanSetTime(e,r,!0);if(!e.canCreateNewOccurence(r,l.calendar)||(a=!(a=!0)!==t.showWeekends||6!=r.dayOfWeek()&&0!=r.dayOfWeek()?a:!1)&&l.foundItems++,o)return l.currentTime=r,!(l.foundItems>e.count)}}return!1},l.getCanSetTime=function(e,t,i){return e.canCreateNewOccurence(t,l.calendar)||(i=!1),t<l.from&&t.add(l.recurrentAppointment.duration())<=l.from&&(i=!1),i=l.to<=t?!1:i},l.isException=function(e,t,i){for(var n=l.recurrentAppointment.exceptions,r=0;r<n.length;r++)if(i.isDateInExceptionAppointment(e,t,n[r])&&-1===i.newExceptions.indexOf(n[r]))return!0;return!1},arguments&&0<arguments.length&&(l.recurrentAppointment=arguments[0],arguments[1]&&(l.calendar=arguments[1]),arguments[2]&&(l.from=arguments[2]),arguments[3]&&(l.to=arguments[3]),arguments[4]&&(l.scheduler=arguments[4]),void 0===arguments[2]&&(l.from=new M.jqx.date(0),l.to=new M.jqx.date(9999,12,31)),l.scheduler&&l.scheduler.localization&&(l.calendar.firstDay=l.scheduler.localization.firstDay),l.fillList()),l},M.jqx.scheduler.recurrencePattern=function(){var v=this,e={from:new M.jqx.date(0),to:new M.jqx.date(9999,12,31),count:1e3,interval:1,exceptions:new Array,newExceptions:new Array,month:1,day:1,current:0,currentYearDay:0,step:0,days:[],bynweekday:[],isEveryWeekDay:!0,timeZone:null,weekDays:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},freq:"daily",bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null};return M.extend(!0,v,e),v.getNewOccurenceDate=function(){function e(e,t){var i=0,n=[];if(e instanceof Array)for(;i<t;i++)n[i]=[].concat(e);else for(;i<t;i++)n[i]=e;return n}function t(e,t){return(e%=t)*t<0?e+t:e}function i(e){v.yearlen=e%4!=0||e%100==0&&e%400!=0?365:366,v.nextyearlen=(1+e)%4!=0||(1+e)%100==0&&(1+e)%400!=0?365:366,new Date(e,0,1);var e=l[new Date(e,0,1).getDay()],t=function(){for(var e=[],t=0;t<55;t++)e=e.concat(function(e,t){1===arguments.length&&(t=e,e=0);for(var i=[],n=e;n<t;n++)i.push(n);return i}(7));return e}();365==v.yearlen?(v.wdaymask=t.slice(e),v.mrange=[].concat(a)):(v.wdaymask=t.slice(e),v.mrange=[].concat(r))}var n,r=[0,31,60,91,121,152,182,213,244,274,305,335,366],a=[0,31,59,90,120,151,181,212,243,273,304,334,365],o=v.from.year(),l=[6,0,1,2,3,4,5];switch(i(o),v.freq){case"daily":default:var d=v.from.add(new M.jqx.timeSpan(v.step*v.interval,0,0,0));return v.step++,d;case"weekly":return v.byweekday&&(d=new M.jqx.date(v.from,v.timeZone),n=l[v.from.dayOfWeek()],(d=(d=(d=d.addDays(7*v.step)).addDays(v.byweekday[v.current])).addDays(-n))<v.from&&(d=null),v.current++,null==v.byweekday[v.current]&&(v.current=0,v.step++)),d;case"monthly":if(0<v.bynweekday.length){(d=new M.jqx.date(v.from.year(),v.from.month(),1,v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,i((d=d.addMonths(v.step*v.interval)).year());var s=d.month(),c=(m=v.mrange.slice(s-1,s+1))[0],u=m[1];--u,v.nwdaymask=e(0,v.yearlen),v.step++;for(var h=0;h<v.bynweekday.length;h++){var p=v.bynweekday[h][0];(g=v.bynweekday[h][1])<0?(D=u+7*(g+1),D-=t(v.wdaymask[D]-p,7)):(D=c+7*(g-1),D+=t(7-v.wdaymask[D]+p,7)),c<=D&&D<=u&&(v.nwdaymask[D]=1)}var y=D+1-c;(d=new M.jqx.date(v.from.year(),v.from.month(),y,v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,d=d.addMonths((v.step-1)*v.interval)}else 0<v.bymonthday.length?((d=new M.jqx.date(v.from.year(),v.from.month(),v.bymonthday[v.current],v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,d=d.addMonths(v.step*v.interval),v.current++,v.bymonthday[v.current]||(v.current=0,v.step++)):((d=new M.jqx.date(v.from.year(),v.from.month(),v.day,v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,d=d.addMonths(v.step*v.interval),v.step++);return d;case"yearly":if(v.bymonth&&0<v.bymonth.length)if(0<v.bynweekday.length){(d=new M.jqx.date(v.from.year(),v.bymonth[v.current],1,v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,i((d=d.addYears(v.step*v.interval)).year());var m,s=d.month(),c=(m=v.mrange.slice(s-1,s+1))[0],u=m[1];--u,v.nwdaymask=e(0,v.yearlen);for(h=0;h<v.bynweekday.length;h++){var g,p=v.bynweekday[h][0];(g=v.bynweekday[h][1])<0?(D=u+7*(g+1),D-=t(v.wdaymask[D]-p,7)):(D=c+7*(g-1),D+=t(7-v.wdaymask[D]+p,7)),c<=D&&D<=u&&(v.nwdaymask[D]=1)}y=D+1-c;(d=new M.jqx.date(d.year(),v.bymonth[v.current],y,v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,v.step++}else v.byyearday&&0<v.byyearday.length?((d=new M.jqx.date(v.from.year(),v.bymonth[v.current],v.byyearday[v.currentYearDay],v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,d=d.addYears(v.step*v.interval),v.currentYearDay++,v.byyearday[v.currentYearDay]||(v.currentYearDay=0,v.current++,v.bymonth[v.current]||(v.current=0,v.step++))):((d=new M.jqx.date(v.from.year(),v.bymonth[v.current],v.from.day(),v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,d=d.addYears(v.step*v.interval),v.current++,v.bymonth[v.current]||(v.current=0,v.step++));else if(v.byyearday&&0<v.byyearday.length)(d=new M.jqx.date(v.from.year(),v.from.month(),v.byyearday[v.current],v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,d=d.addYears(v.step*v.interval),v.current++,v.byyearday[v.current]||(v.current=0,v.step++);else if(null!=v.byweekno){var d=v.from.addYears(v.step*v.interval);if(d=function(e,t){var i=1,n=new M.jqx.date(t.year(),1,1,t.hour(),t.minute(),t.second());for(n.timeZone=v.timeZone;i!=e&&(n=n.addDays(7),!(53<++i)););for(;M.jqx.scheduler.utilities.getWeekday(n.toDate())!=v.wkst;)n=n.addDays(1);return n}(v.byweekno[v.current],d),v.byweekday){for(var f=d,D=0;D<7&&l[f.dayOfWeek()]!==v.byweekday[v.currentYearDay];D++)f=f.addDays(1);d=f,v.currentYearDay++,v.byweekday[v.currentYearDay]||(v.currentYearDay=0,v.current++,v.byweekno[v.current]||(v.current=0,v.step++))}else v.current++,v.byweekno[v.current]||(v.current=0,v.step++)}else(d=new M.jqx.date(v.from.year(),v.month,v.day,v.from.hour(),v.from.minute(),v.from.second())).timeZone=v.timeZone,d=d.addYears(v.step*v.interval),v.step++;return d}},v.isDateInExceptionAppointment=function(e,t,i){return v.freq,e.year()==i.from.year()&&e.dayOfYear()==i.from.dayOfYear()},v.createNewPattern=function(){var e;return v.ical?new M.jqx.scheduler.recurrencePattern(v.ical):((e=new M.jqx.scheduler.recurrencePattern).from=v.from,e.to=v.to,e.count=v.count,e.interval=v.interval,e.exceptions=v.exceptions,e.newExceptions=v.newExceptions,e.weekDays=v.weekDays,e.isEveryWeekDay=v.isEveryWeekDay,e.month=v.month,e.day=v.day,e.current=v.current,e.currentYearDay=v.currentYearDay,e.step=v.step,e.days=v.days,e.bynweekday=v.bynweekday,e.bymonth=v.bymonth,e.bymonthday=v.bymonthday,e.byyearday=v.byyearday,e.byweekno=v.byweekno,e.byweekday=v.byweekday,e.freq=e.freq,e.timeZone=e.timeZone,e)},v.equals=function(e){return v.from==e.from&&v.to==e.to&&v.count===e.count&&v.interval===e.interval&&v.day===e.day&&v.month===e.month},v.isDayOfWeekIncluded=function(e){e=e.dayOfWeek();return M.jqx.scheduler.utilities.areWeekDaysIncluded(v.weekDays,e)},v.getWeekIndexFromDate=function(e,t){void 0===t.firstDay&&(t.firstDay=0);var i=t.firstDay,t=M.jqx.scheduler.utilities.getStartOfWeek(v.from,t,i),i=new M.jqx.timeSpan(e.subtract(t));return parseInt(i.days()/7)},v.canCreateNewOccurence=function(e,t){e.toDate();switch(v.freq){case"daily":default:return v.bymonth&&-1==v.bymonth.indexOf(e.month())?!1:!v.isEveryWeekDay||!!v.isDayOfWeekIncluded(e,t);case"weekly":var i=v.getWeekIndexFromDate(e,t);if(v.bymonth&&-1==v.bymonth.indexOf(e.month()))return!1;if(i%v.interval!=0)return!1;if(v.weekDays=={}){i=e;if(v.from.dayOfWeek()!=i.dayOfWeek())return!1}else if(!v.isDayOfWeekIncluded(e,t))return!1;break;case"monthly":case"yearly":if(v.bymonth&&-1==v.bymonth.indexOf(e.month()))return!1;if(e<v.from)return!1}return!0},v.toString=function(){var t={},e=(t.dtstart=this.from.toDate(),t.until=this.to?this.to.toDate():null,t.count=this.count,{});e.YEARLY=0,e.MONTHLY=1,e.WEEKLY=2,e.DAILY=3,e.HOURLY=4,e.MINUTELY=5,e.SECONDLY=6,t.freq=e[this.freq.toUpperCase()],"YEARLY"==t.freq&&(t.bymonth=this.bymonth||(new Array).push(this.month)),t.byweekday=new Array;return M.each(this.weekDays,function(){var e=this;t.byweekday.push(e=--e<0?6:e)}),null!=this.byyearday&&(t.byyearday=this.byyearday),null!=this.byweekno&&(t.byweekno=this.byweekno),t.bymonthday=this.bymonthday,t.wkst=["MO","TU","WE","TH","FR","SA","SU"][this.wkst],t.interval=this.interval,new M.jqx.ICalRule(t).toString()},v.init=function(e){var e=new M.jqx.ICalRule(v.ical,e),t=e.options;if(v.from=t.dtstart?new M.jqx.date(t.dtstart,v.timeZone):v.from,v.count=(null!=t.count?t:v).count,v.freq=e.FREQUENCIES[t.freq].toLowerCase(),v.interval=(null!=t.interval?t:v).interval,v.to=t.until?new M.jqx.date(t.until,v.timeZone):v.to,v.wkst=t.wkst,v.bymonth=t.bymonth,v.bymonth&&0<v.bymonth.length?v.month=v.bymonth[0]:v.month=v.from.month(),v.day=v.from.day(),null!=t.byweekday){v.weekDays={};for(var i=0;i<t.byweekday.length;i++)switch(t.byweekday[i]){case 0:v.weekDays.Monday=1;break;case 1:v.weekDays.Tuesday=2;break;case 2:v.weekDays.Wednesday=3;break;case 3:v.weekDays.Thursday=4;break;case 4:v.weekDays.Friday=5;break;case 5:v.weekDays.Saturday=6;break;case 6:v.weekDays.Sunday=0}v.byweekday=t.byweekday}return v.byweekno=t.byweekno,t.bynweekday&&(v.bynweekday=t.bynweekday),null!=t.bymonthday&&(v.bymonthday=t.bymonthday.sort(),v.bymonthday[0]&&(v.day=v.bymonthday[0])),null!=t.byyearday&&(v.day=t.byyearday[0],v.byyearday=t.byyearday.sort()),t},v.setFrom=function(e){v.from=e.clone(),v.ical&&v.init(e)},1==arguments.length&&(v.ical=arguments[0],v.init()),v},M.jqx.scheduler.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},M.jqx.ICalRule=function(t,e){function i(e,t){1===arguments.length&&(t=e,e=0);for(var i=[],n=e;n<t;n++)i.push(n);return i}function n(e,t){var i=0,n=[];if(e instanceof Array)for(;i<t;i++)n[i]=[].concat(e);else for(;i<t;i++)n[i]=e;return n}function r(e){return!(e instanceof Array&&0==e.length)&&Boolean(e)}function h(e,t){return-1!=e.indexOf(t)}var a,o,l,d,p=this,s=([].concat(n(1,31),n(2,28),n(3,31),n(4,30),n(5,31),n(6,30),n(7,31),n(8,31),n(9,30),n(10,31),n(11,30),n(12,31),n(1,7)),[].concat(n(1,31),n(2,29),n(3,31),n(4,30),n(5,31),n(6,30),n(7,31),n(8,31),n(9,30),n(10,31),n(11,30),n(12,31),n(1,7)),i(1,29)),c=i(1,30),u=i(1,31),y=i(1,32),s=([].concat(y,c,y,u,y,u,y,y,u,y,u,y,y.slice(0,7)),[].concat(y,s,y,u,y,u,y,y,u,y,u,y,y.slice(0,7)),i(-28,0)),c=i(-29,0),u=i(-30,0),y=i(-31,0),m=([].concat(y,c,y,u,y,u,y,y,u,y,u,y,y.slice(0,7)),[].concat(y,s,y,u,y,u,y,y,u,y,u,y,y.slice(0,7)),function(){for(var e=[],t=0;t<55;t++)e=e.concat(i(7))}(),function(e,t){var i=this;if(0===t)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t,this.nth=function(e){return i.n==e?i:new m(i.weekday,e)},this.equals=function(e){return i.weekday==e.weekday&&i.n==e.n},this.toString=function(){var e=["MO","TU","WE","TH","FR","SA","SU"][i.weekday];return e=this.n?(0<i.n?"+":"")+String(i.n)+e:e},this.getJsWeekday=function(){return 6==i.weekday?0:i.weekday+1}}),g=(this.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],this.YEARLY=0,this.MONTHLY=1,this.WEEKLY=2,this.DAILY=3,this.HOURLY=4,this.MINUTELY=5,this.SECONDLY=6,this.MO=new m(0),this.TU=new m(1),this.WE=new m(2),this.TH=new m(3),this.FR=new m(4),this.SA=new m(5),this.SU=new m(6),{freq:null,dtstart:null,interval:1,wkst:p.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null}),t=(this._string=null,this.toString=function(){for(var e,t,i,n=this.origOptions,r=[],a=Object.keys(n),o=Object.keys(g),l=0;l<a.length;l++)if(h(o,a[l])&&(e=a[l].toUpperCase(),i=[],!(null===(t=n[a[l]])||t instanceof Array&&!t.length))){switch(e){case"FREQ":t=p.FREQUENCIES[n.freq];break;case"WKST":t=(t=t||0).toString();break;case"BYWEEKDAY":e="BYDAY",t instanceof Array||(t=[t]);for(var d,s=0;s<t.length;s++)(d=t[s])instanceof m||(d=d instanceof Array?new m(d[0],d[1]):new m(d)),i[s]=d.toString();t=i;break;case"DTSTART":case"UNTIL":t=M.jqx.scheduler.utilities.timeToUntilString(t);break;default:if(t instanceof Array){for(s=0;s<t.length;s++)i[s]=String(t[s]);t=i}else t=String(t)}r.push([e,t])}for(var c=[],l=0;l<r.length;l++){var u=r[l];c.push(u[0]+"="+u[1].toString())}return c.join(";")},this.parseString=function(e){if(!(e=e.replace(/^\s+|\s+$/,"")).length)return null;for(var t,i,n,r,a=e.split(";"),o={},l=0;l<a.length;l++)if(i=(r=a[l].split("="))[0],n=r[1],""!=i)switch(i){case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(-1!=n.indexOf(","))for(n=n.split(","),t=0;t<n.length;t++)/^[+-]?\d+$/.test(n[t])&&(n[t]=Number(n[t]));else/^[+-]?\d+$/.test(n)&&(n=Number(n));o[i=i.toLowerCase()]=n;break;case"BYDAY":var d,s,c,u=n.split(",");for(o.byweekday=[],t=0;t<u.length;t++)2==(c=u[t]).length?(s=p[c],o.byweekday.push(s)):(c=c.match(/^([+-]?\d)([A-Z]{2})$/),d=Number(c[1]),s=c[2],s=p[s].weekday,o.byweekday.push(new m(s,d)));break;case"FREQ":o.freq=p[n];break;case"WKST":o.wkst=p[n];break;case"DTSTART":o.dtstart=M.jqx.scheduler.utilities.untilStringToDate(n);break;case"UNTIL":o.until=M.jqx.scheduler.utilities.untilStringToDate(n);break;case"BYEASTER":o.byeaster=Number(n);break;default:throw new Error("Unknown ICalRule property '"+i+"'")}return p.options=o},"string"===M.type(t)?this.options=this.parseString(t):this.options=t||{},this.options),f=(Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var r,a=Object(this),o=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(i=t),n=0;n<o;)n in a&&(r=a[n],e.call(i,r,n,a)),n++}),Object.keys||(Object.keys=(a=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),d=(l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,i,n=[];for(t in e)a.call(e,t)&&n.push(t);if(o)for(i=0;i<d;i++)a.call(e,l[i])&&n.push(l[i]);return n})),this.origOptions={},[]),D=Object.keys(this.options),v=Object.keys(g);if(D.forEach(function(e){this.origOptions[e]=this.options[e],h(v,e)||f.push(e)},this),f.length)throw new Error("Invalid options: "+f.join(", "));if(!p.FREQUENCIES[this.options.freq]&&null===t.byeaster)throw new Error("Invalid Frequency: "+String(t.freq));v.forEach(function(e){h(D,e)||(t[e]=g[e])});var b=this.options;if(null!==b.byeaster&&(b.freq=this.YEARLY),b.dtstart||(b.dtstart=new Date,b.dtstart.setMilliseconds(0)),e&&(b.dtstart=e.toDate()),null===b.wkst?b.wkst=this.MO.weekday:"number"!=typeof b.wkst&&(null==b.wkst?b.wkst=this.MO.weekday:b.wkst=b.wkst.weekday),null!==b.bysetpos){"number"==typeof b.bysetpos&&(b.bysetpos=[b.bysetpos]);for(var w=0;w<b.bysetpos.length;w++)if(0==(x=b.bysetpos[w])||!(-366<=x&&x<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}if(!(r(b.byweekno)||r(b.byyearday)||r(b.bymonthday)||null!==b.byweekday||null!==b.byeaster))switch(b.freq){case this.YEARLY:b.bymonth||(b.bymonth=b.dtstart.getMonth()+1),b.bymonthday=b.dtstart.getDate();break;case this.MONTHLY:b.bymonthday=b.dtstart.getDate();break;case this.WEEKLY:b.byweekday=M.jqx.scheduler.utilities.getWeekday(b.dtstart)}if(null===b.bymonth||b.bymonth instanceof Array||(b.bymonth=[b.bymonth]),null===b.byyearday||b.byyearday instanceof Array||(b.byyearday=[b.byyearday]),null===b.bymonthday)b.bymonthday=[],b.bynmonthday=[];else if(b.bymonthday instanceof Array){for(var x,q=[],j=[],w=0;w<b.bymonthday.length;w++)0<(x=b.bymonthday[w])?q.push(x):x<0&&j.push(x);b.bymonthday=q,b.bynmonthday=j}else b.bymonthday<0?(b.bynmonthday=[b.bymonthday],b.bymonthday=[]):(b.bynmonthday=[],b.bymonthday=[b.bymonthday]);if(null===b.byweekno||b.byweekno instanceof Array||(b.byweekno=[b.byweekno]),null===b.byweekday)b.bynweekday=null;else if("number"==typeof b.byweekday)b.byweekday=[b.byweekday],b.bynweekday=null;else if(b.byweekday instanceof m)!b.byweekday.n||b.freq>this.MONTHLY?(b.byweekday=[b.byweekday.weekday],b.bynweekday=null):(b.bynweekday=[[b.byweekday.weekday,b.byweekday.n]],b.byweekday=null);else{var k=[],F=[];for(w=0;w<b.byweekday.length;w++){var A=b.byweekday[w];"number"==typeof A?k.push(A):!A.n||b.freq>this.MONTHLY?k.push(A.weekday):F.push([A.weekday,A.n])}b.byweekday=r(k)?k:null,b.bynweekday=r(F)?F:null}if(null===b.byhour?b.byhour=b.freq<this.HOURLY?[b.dtstart.getHours()]:null:"number"==typeof b.byhour&&(b.byhour=[b.byhour]),null===b.byminute?b.byminute=b.freq<this.MINUTELY?[b.dtstart.getMinutes()]:null:"number"==typeof b.byminute&&(b.byminute=[b.byminute]),null===b.bysecond?b.bysecond=b.freq<this.SECONDLY?[b.dtstart.getSeconds()]:null:"number"==typeof b.bysecond&&(b.bysecond=[b.bysecond]),b.freq>=this.HOURLY)this.timeset=null;else{if(this.timeset=[],b.byhour)for(w=0;w<b.byhour.length;w++)for(var T=b.byhour[w],S=0;S<b.byminute.length;S++)for(var _=b.byminute[S],L=0;L<b.bysecond.length;L++){var E=b.bysecond[L];this.timeset.push(new M.jqx.scheduler.utilities.Time(T,_,E))}M.jqx.scheduler.utilities.sort(this.timeset)}return this}}(jqxBaseFramework),function(_){_.extend(_.jqx._jqxScheduler.prototype,{_getexportcolor:function(e){e="transparent"==e?"#FFFFFF":e;if(-1==(e=e&&e.toString()?e:"#FFFFFF").toString().indexOf("rgb"))return-1!=e.toString().indexOf("#")&&4==e.toString().length&&(t=e.toString().substring(1,4),e+=t),e;var t=e.split(",");if(-1!=e.toString().indexOf("rgba"))return i=parseInt(t[0].substring(5)),n=parseInt(t[1]),r=parseInt(t[2]),e=parseFloat(t[3].substring(1,4)),a=this._rgbToHex(o={r:i,g:n,b:r}),0==i&&0==n&&0==r&&0==e?"#ffffff":"#"+a;var i,n,r,a,o={r:i=parseInt(t[0].substring(4)),g:n=parseInt(t[1]),b:r=parseInt(t[2].substring(1,4))};return"#"+(a=this._rgbToHex(o))},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){e=parseInt(e).toString(16);return(e=1==e.length?"0"+e:e).toUpperCase()},exportData:function(c){if(!_.jqx.dataAdapter.ArrayExporter)throw"jqxScheduler: Missing reference to jqxdata.export.js!";var e=this.exportSettings.serverURL,t=this.exportSettings.characterSet,i=this.exportSettings.fileName,n=this.exportSettings.ICSXWRCALNAME,r=this.exportSettings.ICSXWRCALDESC,u=(void 0===i&&(i="jqxScheduler"),this);if("ical"==c||"ics"==c)if(1<u._resources.length&&i&&u.resourcesInMultipleICSFiles)for(var a=this.getAppointments(),o=0;o<u._resources.length;o++){for(var l=u._resources[o],d=new Array,s=0;s<a.length;s++){var h=a[s];h.resourceId==l&&d.push(h)}var p="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:jqxScheduler\nMETHOD:PUBLISH\n";n&&(p+="X-WR-CALNAME:"+n+"\n"),r&&(p+="X-WR-CALDESC:"+r+"\n");for(var y=0;y<d.length;y++)p+=d[y].jqxAppointment.toString(),y<d.length-1&&(p+="\n");for(var m=(p+="\nEND:VCALENDAR").length,g=new Uint8Array(new ArrayBuffer(m)),y=0;y<m;y++)g[y]=p.charCodeAt(y);var f=new Blob([g],{type:"application/calendar"});window.jqxSaveAs&&window.jqxSaveAs(f,i+"_"+l+".ics")}else{for(a=this.getAppointments(),p="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:jqxScheduler\nMETHOD:PUBLISH\n",o=0;o<a.length;o++)p+=a[o].jqxAppointment.toString(),o<a.length-1&&(p+="\n");m=(p+="\nEND:VCALENDAR").length,g=new Uint8Array(new ArrayBuffer(m));for(o=0;o<m;o++)g[o]=p.charCodeAt(o);f=new Blob([g],{type:"application/calendar"});if(!i)return p;window.jqxSaveAs&&window.jqxSaveAs(f,i+".ics")}else{var D,v,b,a=this.getDataAppointments(),w=new Array,x={},q={},j=this.host.find(".jqx-grid-cell:first"),k=(j.removeClass(this.toThemeProperty("jqx-grid-cell-selected")),j.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),j.removeClass(this.toThemeProperty("jqx-grid-cell-hover")),j.removeClass(this.toThemeProperty("jqx-fill-state-hover")),1),F=1,A=_(this.columns.records[0].element),T=0,S=(_.each(this.appointmentDataFields,function(e,s){var t;x[s]={},x[s].text=s,x[s].width=100,x[s].formatString="",x[s].localization=u.schedulerLocalization,"from"==e||"to"==e?(x[s].type="date",x[s].formatString=u.exportSettings.dateTimeFormatString):x[s].type="string",x[s].cellsAlign="left",w.push(x[s]),D="cell"+k,v="column"+F,"html"!=c&&"xls"!=c&&"pdf"!=c||((t=function(e,t,i,n,r,a,o,l,d){q[e]={},null!=t&&(q[e]["font-size"]=t.css("font-size"),q[e]["font-weight"]=t.css("font-weight"),q[e]["font-style"]=t.css("font-style"),q[e]["background-color"]=u._getexportcolor(t.css("background-color")),q[e].color=u._getexportcolor(t.css("color")),q[e]["border-color"]=u._getexportcolor(t.css("border-top-color")),i?q[e]["text-align"]="left":(q[e]["text-align"]="left",q[e].formatString="",q[e].dataType="string","from"!=o&&"to"!=o||(q[e].dataType="date",q[e].formatString=u.exportSettings.dateTimeFormatString)),"html"!=c&&"pdf"!=c||(q[e]["border-top-width"]=t.css("border-top-width"),q[e]["border-left-width"]=t.css("border-left-width"),q[e]["border-right-width"]=t.css("border-right-width"),q[e]["border-bottom-width"]=t.css("border-bottom-width"),q[e]["border-top-style"]=t.css("border-top-style"),q[e]["border-left-style"]=t.css("border-left-style"),q[e]["border-right-style"]=t.css("border-right-style"),q[e]["border-bottom-style"]=t.css("border-bottom-style"),i?(0==T&&(q[e]["border-left-width"]=t.css("border-right-width")),q[e]["border-top-width"]=t.css("border-right-width"),q[e]["border-bottom-width"]=t.css("border-bottom-width")):(0==T&&(q[e]["border-left-width"]="1px"),q[e]["border-right-width"]="1px")),i&&(x[s].style=e),x[s].cellStyle=e)})(v,A,!0,0,0,0,e),F++,t(D,j,!1,0,0,0,e),k++),T++}),_.jqx.dataAdapter.ArrayExporter(a,x,q,e));if(null==i)return this._renderrows(),b=S.exportTo(c),setTimeout(function(){u.exporting=!1},50),b;S.exportToFile(c,i,e,t),this._renderrows(),setTimeout(function(){u.exporting=!1},50)}},shadeColor:function(e,t){var e=parseInt(e.slice(1),16),i=t<0?0:255,t=t<0?-1*t:t,n=e>>16,r=e>>8&255,e=255&e;return"#"+(16777216+65536*(Math.round((i-n)*t)+n)+256*(Math.round((i-r)*t)+r)+(Math.round((i-e)*t)+e)).toString(16).slice(1)},hexToRgba:function(e,t){function i(){var e=_.jqx.browser.msie&&_.jqx.browser.version<10;return null==this.alpha||e?"rgb("+this.r+", "+this.g+", "+this.b+")":(1<this.alpha?this.alpha=1:this.alpha<0&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")")}e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return null==t?e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),toString:i}:null:(1<t?t=1:t<0&&(t=0),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),alpha:t,toString:i}:null)},getAppointmentColors:function(e){var t=e;return{background:this.hexToRgba(e,this.appointmentOpacity).toString(),color:255-(.299*(e=this.hexToRgba(e,.7)).r+.587*e.g+.114*e.b)<105?"Black":"White",border:t}},getColors:function(e){-1==e&&(e=0);for(var t=(t=this.resources?this.resources.colorScheme:null)||"scheme01",i=new Array,n=0;n<this.colorSchemes.length;n++)if(this.colorSchemes[n].name==t){i=this.colorSchemes[n].colors;break}for(;e>i.length-1;){var r=parseInt(t.substring(6));27<=r&&(r=0),i=i.concat(this.colorSchemes[r].colors),r++}i[e];var a=this.hexToRgba(i[e],this.appointmentOpacity).toString(),o=i[e];return{background:a,color:255-(.299*(a=this.hexToRgba(i[e],.7)).r+.587*a.g+.114*a.b)<105?"Black":"White",border:o}},getAppointments:function(){for(var e=this.uiappointments,t=new Array,i=0;i<e.length;i++){var n=e[i].boundAppointment;n.toString=n.jqxAppointment.toString,t.push(n)}return t},getDataAppointments:function(){for(var e=this.uiappointments,t=new Array,i=0;i<e.length;i++){var n=e[i].boundAppointment,r={};_.each(this.appointmentDataFields,function(e,t){if(r[t]=n[e],"from"!=e&&"to"!=e||"date"!=_.type(n[e])&&(r[t]=n[e].toDate()),"recurrencePattern"==e&&n[e]&&(r[t]=n[e].toString()),"recurrenceException"==e&&n[e]){r[t]="";for(var i=0;i<n[e].length;i++)r[t]+=n[e][i].toString(),i<n[e].length-1&&(r[t]+=",")}try{JSON&&(r.toString=function(){return JSON.stringify(r)})}catch(e){}}),t.push(r)}return t},_refreshColumns:function(){this._initializeColumns(),this.columnsheader=this.columnsheader||_('<div style="overflow: hidden;"></div>'),this.columnsheader.children().remove();this.columnsHeight;var e=this._preparecolumnGroups();this.columnsheader.height(e),this._rendercolumnheaders()},_refreshColumnTitles:function(){var e=this._views[this._view].type,p=this._views[this._view],y=this,m=new Array;if(y.columns.records[0].timeColumn&&m.push({}),p.timeRuler&&p.timeRuler.timeZones)for(var t=0;t<p.timeRuler.timeZones.length;t++)m.push({});function i(e,t,i){var n="halfHour",r=(p.timeRuler&&p.timeRuler.scale&&(n=p.timeRuler.scale),24),a=0,o=23;if(p.timeRuler&&(null!=p.timeRuler.scaleStartHour&&(a=parseInt(p.timeRuler.scaleStartHour)),r=(o=23<(o=(o=null!=p.timeRuler.scaleEndHour?parseInt(p.timeRuler.scaleEndHour):o)<0?23:o)?23:o)-(a=23<(a=a<0?0:a)?0:a)+1),n)switch(n){case"sixtyMinutes":case"hour":0;break;case"thirdyMinutes":case"halfHour":0;break;case"fifteenMinutes":case"quarterHour":0;break;case"tenMinutes":0;break;case"fiveMinutes":0}new Array;var l="auto",d=(p.timeRuler&&p.timeRuler.formatString&&(l=p.timeRuler.formatString),r),s=e.addHours(a);y.rtl&&(s=e.addHours(o));for(var c=0;c<d;c++){var u,h=s.toDate();u="auto"===l?0==h.getHours()&&0==h.getMinutes()||12==h.getHours()&&0==h.getMinutes()?"hh tt":"hh:mm":_.isFunction(l)?l(h):l,_.jqx.dataFormat.isDate(h)&&(h=_.jqx.dataFormat.formatdate(h,u,y.schedulerLocalization)),s=y.rtl?s.addMinutes(-60):s.addMinutes(60),m.push({}),y.columns.records[m.length-1].text=h}}this.tableColumns;for(var n=0;n<this.tableColumns;n++)switch(e){case"dayView":var r=this.getViewStart();!1!==p.showWeekends||0!==(r=0!==r.dayOfWeek()&&6!==r.dayOfWeek()?r:r.addDays(1)).dayOfWeek()&&6!==r.dayOfWeek()||(r=r.addDays(1)),m.push({}),this.columns.records[m.length-1].text=this._getDayName(r.dayOfWeek());break;case"weekView":case"monthView":for(t=0;t<7;t++){var a=this.schedulerLocalization.firstDay+t;(!1!==p.showWeekends||0!==t&&6!==t)&&(m.push({}),y.rtl&&(a=6-a),this.columns.records[m.length-1].text=this._getDayName(a))}break;case"timelineDayView":y._resources[n];i(y.getViewStart());break;case"timelineWeekView":for(t=0;t<7;t++){a=this.schedulerLocalization.firstDay+t;(!1!==p.showWeekends||0!==t&&6!==t)&&(y.rtl&&(a=6-a),i(y.getViewStart().addDays(t),this._getDayName(a)))}break;case"timelineMonthView":var o=y.getViewStart(),l="auto";p.timeRuler&&p.timeRuler.formatString&&(l=p.timeRuler.formatString);for(t=0;t<41;t++){var d,s,a=o.dayOfWeek();(!1!==p.showWeekends||0!==a&&6!==a)&&(y.rtl&&(a=6-a),d=o.toDate(),"auto"===l?(s="dd",1===(d=o.toDate()).getDate()&&(s="MMM dd")):s=_.isFunction(l)?l(d):l,_.jqx.dataFormat.isDate(d)&&(d=_.jqx.dataFormat.formatdate(d,s,y.schedulerLocalization)),o=o.addDays(1),m.push({}),y.columns.records[m.length-1].text=d)}}for(var c=y.columnsHeight,t=0;t<this.columns.records.length;t++){var u,h=this.columns.records[t];h.timeColumn||(y.columnGroups&&y.columnGroups.length&&(h.datafield,u=void 0,u=y.columnGroupslevel*y.columnsHeight,c=u-=h.level*y.columnsHeight),null==(u=null!=h.renderer?h.renderer(y.escape_HTML(h.text),h.align,c):y._rendercolumnheader(h.text,h.align,c,h))&&(u=y._rendercolumnheader(y.escape_HTML(h.text),h.align,c,y)),null!=h.renderer&&(u=_(u)),_(h.element).html(u))}},_editDialogLabel:function(){return this.theme?"jqx-scheduler-edit-dialog-label jqx-scheduler-edit-dialog-label-"+this.theme:"jqx-scheduler-edit-dialog-label"},_editDialogField:function(){return this.theme?"jqx-scheduler-edit-dialog-field jqx-scheduler-edit-dialog-field-"+this.theme:"jqx-scheduler-edit-dialog-field"},initRepeatPanels:function(i,n,e){var y=this,t=_("<div></div>"),r=(n.append(t),_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatString+"</div>").appendTo(t)),a=_("<div class='"+y._editDialogField()+"'></div>").appendTo(t),a=_("<div></div>").appendTo(a),o=_("<div></div>"),l=(n.append(o),_("<div></div>")),d=(o.append(l),l.detach(),y.editDialogFields.repeatEndPanel={},y.editDialogFields.repeatEndPanelContainer=l),s="repeatEndPanel",d=_("<div></div>").appendTo(d),c=_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatEndString+"</div>").appendTo(d),u=_("<div class='"+y._editDialogField()+"'></div>").appendTo(d),u=((u=_("<div style='top: 3px; position:relative; float:left;'><span style='margin-left:2px;'>"+y.schedulerLocalization.editDialogRepeatNeverString+"</span></div>").appendTo(u)).jqxRadioButton({rtl:y.rtl,groupName:"end"+s,theme:y.theme,width:200,checked:!0}),y.editDialogFields[s].repeatEndNever=u,y.editDialogFields[s].repeatEndNeverLabel=c,_("<div class='"+y._editDialogLabel()+"'></div>").appendTo(d)),c=_("<div class='"+y._editDialogField()+"'></div>").appendTo(d),h=((p=_("<div style='top: 3px;  position:relative;  float:left;'><span style='margin-left:2px;'>"+y.schedulerLocalization.editDialogRepeatAfterString+"</span></div>").appendTo(c)).jqxRadioButton({rtl:y.rtl,groupName:"end"+s,theme:y.theme,width:60,checked:!1}),_("<div style='margin-left: 3px; float:left;'></div>").appendTo(c)),c=(h.jqxNumberInput({rtl:y.rtl,decimal:10,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:y.theme}),_("<div style='float: left; top: 3px;  margin-left: 5px; line-height:25px;'>"+y.schedulerLocalization.editDialogRepeatOccurrencesString+"</div>").appendTo(c),y.editDialogFields[s].repeatEndAfter=p,y.editDialogFields[s].repeatEndAfterValue=h,y.editDialogFields[s].repeatEndAfterLabel=u,_("<div class='"+y._editDialogLabel()+"'></div>").appendTo(d)),p=_("<div class='"+y._editDialogField()+"'></div>").appendTo(d);(h=_("<div style='top: 3px; position:relative; float:left;'><span style='margin-left:2px;'>"+y.schedulerLocalization.editDialogRepeatOnString+"</span></div>").appendTo(p)).jqxRadioButton({rtl:y.rtl,groupName:"end"+s,theme:y.theme,width:60,checked:!1});function m(){var e=_("<div style='visibility: hidden;'></div>").appendTo(_(document.body)),t=_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(e),i=_("<div class='"+y._editDialogField()+"'></div>").appendTo(e),i=((n=_("<div style='float:left;'></div>").appendTo(i)).jqxNumberInput({rtl:y.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:y.theme}),_("<div style='float: left; margin-left: 5px; line-height:25px;'>"+y.schedulerLocalization.editDialogRepeatEveryDayString+"</div>").appendTo(i),y.editDialogFields.daily={},y.editDialogFields.daily.repeatDayInterval=n,y.editDialogFields.daily.repeatDayLabel=t,(y.editDialogFields.daily.panel=e).detach(),y.editDialogFields.weekly={},_("<div style='visibility: hidden;'></div>").appendTo(_(document.body))),n=_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(i),t=_("<div class='"+y._editDialogField()+"'></div>").appendTo(i),t=((e=_("<div style='float:left;'></div>").appendTo(t)).jqxNumberInput({rtl:y.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:y.theme}),_("<div style='float: left; margin-left: 5px; line-height:25px;'>"+y.schedulerLocalization.editDialogRepeatEveryWeekString+"</div>").appendTo(t),y.editDialogFields.weekly.repeatWeekInterval=e,y.editDialogFields.weekly.repeatWeekIntervalLabel=n,_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(i)),e=_("<div class='"+y._editDialogField()+"'></div>").appendTo(i),r=_("<div style='float:left;'></div>").appendTo(e);y.editDialogFields.weekly.repeatDaysLabel=t,y.editDialogFields.weekly.repeatDays=new Array;for(var a=0;a<7;a++){var o=y._getDayName(a,"firstTwoLetters"),l=_("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+o+"</span></div>");r.append(l),l.jqxCheckBox({rtl:y.rtl,checked:1==a,width:50,theme:y.theme}),y.editDialogFields.weekly.repeatDays.push(l)}(y.editDialogFields.weekly.panel=i).detach(),y.editDialogFields.monthly={};n=_("<div style='visibility: hidden;'></div>").appendTo(_(document.body)),e=_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(n),t=_("<div class='"+y._editDialogField()+"'></div>").appendTo(n),(i=_("<div style='float:left;'></div>").appendTo(t)).jqxNumberInput({rtl:y.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:y.theme}),_("<div style='float: left; margin-left: 5px; line-height:25px;'>"+y.schedulerLocalization.editDialogRepeatEveryMonthString+"</div>").appendTo(t),y.editDialogFields.monthly.repeatMonth=i,y.editDialogFields.monthly.repeatMonthLabel=e,t=_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(n),i=_("<div class='"+y._editDialogField()+"'></div>").appendTo(n),e=_("<div style='float:left;'></div>").appendTo(i);(i=_("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+y.schedulerLocalization.editDialogRepeatEveryMonthDayString+"</span></div>").appendTo(e)).jqxRadioButton({rtl:y.rtl,groupName:"month",width:60,checked:!0,theme:y.theme});(e=_("<div style='float:left;'></div>").appendTo(e)).jqxNumberInput({rtl:y.rtl,decimal:1,min:1,max:31,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:y.theme}),y.editDialogFields.monthly.repeatMonthDay=e,y.editDialogFields.monthly.repeatMonthDayBool=i,y.editDialogFields.monthly.repeatMonthDayLabel=t;for(var e=_("<div class='"+y._editDialogLabel()+"'></div>").appendTo(n),i=_("<div class='"+y._editDialogField()+"'></div>").appendTo(n),t=_("<div style='float:left;'></div>").appendTo(i),d=((i=_("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(t)).jqxRadioButton({groupName:"month",width:25,checked:!1,theme:y.theme}),_("<div style='float:left;'></div>").appendTo(t)),s=((s=new Array).push(y.schedulerLocalization.editDialogRepeatFirstString),s.push(y.schedulerLocalization.editDialogRepeatSecondString),s.push(y.schedulerLocalization.editDialogRepeatThirdString),s.push(y.schedulerLocalization.editDialogRepeatFourthString),s.push(y.schedulerLocalization.editDialogRepeatLastString),d.jqxDropDownList({height:27,dropDownWidth:150,selectedIndex:0,source:s,autoDropDownHeight:!0,width:"auto",theme:y.theme}),_("<div style='margin-left: 5px; float:left;'></div>").appendTo(t)),c=new Array,a=0;a<7;a++){o=y._getDayName(a);c.push(o)}s.jqxDropDownList({height:27,rtl:y.rtl,dropDownWidth:150,autoDropDownHeight:!0,selectedIndex:1,source:c,width:"auto",theme:y.theme}),y.editDialogFields.monthly.repeatDayOfWeekBool=i,y.editDialogFields.monthly.repeatDayOfWeek=s,y.editDialogFields.monthly.repeatDayOfWeekLabel=e,y.editDialogFields.monthly.repeatDayOfWeekType=d,(y.editDialogFields.monthly.panel=n).detach(),y.editDialogFields.yearly={};for(var t=_("<div style='visibility: hidden;'></div>").appendTo(_(document.body)),i=_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(t),s=_("<div class='"+y._editDialogField()+"'></div>").appendTo(t),d=((e=_("<div style='float:left;'></div>").appendTo(s)).jqxNumberInput({decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:y.theme}),_("<div style='float: left; margin-left: 5px; line-height:25px;'>"+y.schedulerLocalization.editDialogRepeatEveryYearString+"</div>").appendTo(s),y.editDialogFields.yearly.repeatYear=e,y.editDialogFields.yearly.repeatYearLabel=i,_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(t)),n=_("<div class='"+y._editDialogField()+"'></div>").appendTo(t),s=_("<div style='float:left;'></div>").appendTo(n),i=((e=_("<div style='position:relative; top: 6px; float:left;'></span></div>").appendTo(s)).jqxRadioButton({rtl:y.rtl,groupName:"year",width:25,checked:!0,theme:y.theme}),y.editDialogFields.yearly.repeatYearBool=e,y.editDialogFields.yearly.repeatYearBoolLabel=d,_("<div style='float:left;'></div>").appendTo(s)),u=new Array,a=0;a<12;a++){var h=y.schedulerLocalization.months.names[a];u.push(h)}i.jqxDropDownList({height:27,selectedIndex:0,dropDownWidth:150,width:"auto",source:u,theme:y.theme}),y.editDialogFields.yearly.repeatYearMonth=i;(n=_("<div style='margin-left: 5px; float:left;'></div>").appendTo(s)).jqxNumberInput({height:25,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:y.theme}),y.editDialogFields.yearly.repeatYearDay=n,e=_("<div class='"+y._editDialogLabel()+"'></div>").appendTo(t),d=_("<div class='"+y._editDialogField()+"'></div>").appendTo(t),i=_("<div style='float:left;'></div>").appendTo(d),(s=_("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(i)).jqxRadioButton({rtl:y.rtl,groupName:"year",width:25,checked:!1,theme:y.theme}),n=_("<div style='float:left;'></div>").appendTo(i);y.editDialogFields.yearly.repeatDayOfWeekBool=s,y.editDialogFields.yearly.repeatDayOfWeekType=n,y.editDialogFields.yearly.repeatDayOfWeekLabel=e;(d=new Array).push(y.schedulerLocalization.editDialogRepeatFirstString),d.push(y.schedulerLocalization.editDialogRepeatSecondString),d.push(y.schedulerLocalization.editDialogRepeatThirdString),d.push(y.schedulerLocalization.editDialogRepeatFourthString),d.push(y.schedulerLocalization.editDialogRepeatLastString),n.jqxDropDownList({height:27,dropDownWidth:150,selectedIndex:0,source:d,autoDropDownHeight:!0,width:"auto",theme:y.theme});for(var s=_("<div style='margin-left: 5px; float:left;'></div>").appendTo(i),p=(y.editDialogFields.yearly.repeatDayOfWeek=s,new Array),a=0;a<7;a++){o=y._getDayName(a);p.push(o)}for(s.jqxDropDownList({height:27,rtl:y.rtl,dropDownWidth:150,selectedIndex:1,autoDropDownHeight:!0,source:p,width:"auto",theme:y.theme}),u=new Array,_("<div style='line-height:25px; height: 25px; margin-left: 5px; float:left;'>"+y.schedulerLocalization.editDialogRepeatOfString+"</div>").appendTo(i),e=_("<div style='margin-left: 5px; float:left;'></div>").appendTo(i),a=0;a<12;a++){h=y.schedulerLocalization.months.names[a];u.push(h)}(y.editDialogFields.yearly.repeatDayOfWeekMonth=e).jqxDropDownList({height:27,rtl:y.rtl,dropDownWidth:150,selectedIndex:0,source:u,width:"auto",theme:y.theme}),(y.editDialogFields.yearly.panel=t).detach()}(u=_("<div style='margin-left: 3px; float:left;'></div>").appendTo(p)).jqxDateTimeInput({dropDownWidth:220,dropDownHeight:220,rtl:y.rtl,localization:y._getDateTimeInputLocalization(),firstDayOfWeek:y.schedulerLocalization.firstDay,todayString:y.schedulerLocalization.todayString,clearString:y.schedulerLocalization.clearString,value:e,formatString:y.editDialogDateFormatString,width:150,theme:y.theme}),u.jqxDateTimeInput("getInstance"),y.editDialogFields[s].repeatEndOn=h,y.editDialogFields[s].repeatEndOnValue=u,y.editDialogFields[s].repeatEndOnLabel=c;y.editAppointment&&y.editAppointment.rootAppointment,m();d=_("<div></div>"),n.append(d),p=_("<div class='"+y._editDialogLabel()+"'>"+y.schedulerLocalization.editDialogExceptionsString+"</div>").appendTo(d),e=_("<div class='"+y._editDialogField()+"'></div>").appendTo(d),h=_("<div style='position:relative; top:2px;'>"+y.schedulerLocalization.editDialogResetExceptionsString+"</div>").appendTo(e),h.jqxCheckBox({width:"100%",theme:y.theme}),d.hide(),y.editDialogFields.resetExceptions=h,y.editDialogFields.resetExceptionsLabel=p,y.editDialogFields.resetExceptionsContainer=d,u=new Array;u.push(y.schedulerLocalization.editDialogRepeatNeverString),u.push(y.schedulerLocalization.editDialogRepeatDailyString),u.push(y.schedulerLocalization.editDialogRepeatWeeklyString),u.push(y.schedulerLocalization.editDialogRepeatMonthlyString),u.push(y.schedulerLocalization.editDialogRepeatYearlyString),a.jqxDropDownList({rtl:y.rtl,height:27,width:"100%",autoDropDownHeight:!0,theme:y.theme,source:u,selectedIndex:0}),y.editDialogFields.repeat=a,y.editDialogFields.repeatLabel=r,y.editDialogFields.repeatContainer=t,y.editDialogFields.repeatPanel=o,this.addHandler(a,"change",function(e){var t=e.args.item.index;(function(){switch(o.children().detach(),t){case 0:break;case 1:y.editDialogFields.daily.panel.css("visibility","visible"),o.append(y.editDialogFields.daily.panel);break;case 2:y.editDialogFields.weekly.panel.css("visibility","visible"),o.append(y.editDialogFields.weekly.panel);break;case 3:y.editDialogFields.monthly.panel.css("visibility","visible"),o.append(y.editDialogFields.monthly.panel);break;case 4:y.editDialogFields.yearly.panel.css("visibility","visible"),o.append(y.editDialogFields.yearly.panel)}o.append(l),0==t?y.editDialogFields.repeatEndPanelContainer.hide():y.editDialogFields.repeatEndPanelContainer.show(),y.isTouchDevice()||(i.jqxWindow({height:150}),i.jqxWindow({height:n[0].scrollHeight+40}))})()})},_initMenu:function(){var i=this;if(this.host.jqxMenu){if(this.menu){if(this._hasOpenedMenu)return;this.removeHandler(this.menu,"keydown"),this.removeHandler(this.menu,"closed"),this.removeHandler(this.menu,"itemclick"),this.menu.jqxMenu("destroy"),this.menu.removeData(),this.menu.remove()}this.menuitemsarray=new Array,this.menu=_('<div id="menu.jqxscheduler'+this.element.id+'" style="white-space: nowrap; z-index: 9999999999999;"></div>'),this.host.append(this.menu),this.addHandler(_(window),"orientationchange.jqxscheduler"+this.element.id,function(){i.menu.jqxMenu("close"),i._hasOpenedMenu=!1}),this.addHandler(_(window),"orientationchanged.jqxscheduler"+this.element.id,function(){i.menu.jqxMenu("close"),i._hasOpenedMenu=!1}),this.removeHandler(this.menu,"keydown"),this.addHandler(this.menu,"keydown",function(e){27==e.keyCode&&(i.menu.jqxMenu("close"),i._hasOpenedMenu=!1,i.focus())}),this.addHandler(this.menu,"open",function(e){i.contextMenuOpen&&i.contextMenuOpen(i.menu,i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null,e),i._raiseEvent("contextMenuOpen",{menu:i.menu,appointment:i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null}),i._removeFeedbackAndStopResize()}),this.addHandler(this.menu,"close",function(e){i.contextMenuClose&&i.contextMenuClose(i.menu,i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null,e),i._hasOpenedMenu=!1,document.activeElement&&0<=document.activeElement.className.indexOf("jqx-menu")&&!i.menuOpening&&i.focus(),i._raiseEvent("contextMenuClose",{menu:i.menu,appointment:i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null})}),this.addHandler(this.host,"contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1}),this.addHandler(this.menu,"itemclick",function(e){var t=i.menu.jqxMenu("getItem",e.args.id);if((i._raiseEvent("contextMenuItemClick",{item:t,menu:i.menu,appointment:i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null}),i.contextMenuItemClick)&&1==i.contextMenuItemClick(i.menu,i.selectedJQXAppointment?i.selectedJQXAppointment.boundAppointment:null,e))return 500<new Date-i.renderedTime&&i._renderrows(),i.menu.jqxMenu("close"),void(i._hasOpenedMenu=!1);if("createAppointment"==t.id)i._initDialog(),i._openDialog(),"keyboard"==e.args.clickType&&(i.menu.jqxMenu("close"),i._hasOpenedMenu=!1);else{if("editAppointment"!=t.id)return"keyboard"==e.args.clickType&&(i.menu.jqxMenu("close"),i._hasOpenedMenu=!1),!0;t=i.getJQXAppointmentByElement(i.selectedAppointment);t.readOnly||!1!==i._initDialog(t)&&i._openDialog(),"keyboard"==e.args.clickType&&(i.menu.jqxMenu("close"),i._hasOpenedMenu=!1)}});var e=new Array,e=(e.push({label:this.schedulerLocalization.contextMenuEditAppointmentString,id:"editAppointment"}),e.push({label:this.schedulerLocalization.contextMenuCreateAppointmentString,id:"createAppointment"}),{rtl:this.rtl,keyboardNavigation:!0,source:e,popupZIndex:999999,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});i.contextMenuCreate&&i.contextMenuCreate(i.menu,e),i._raiseEvent("contextMenuCreate",{menu:i.menu,settings:e}),this.menu.jqxMenu(e)}},_initDialog:function(g,n){var e,f,D,t,v,b,w=this,x=null;if(g&&g.isRecurrentAppointment()&&!w.editRecurrenceDialog.jqxWindow("isOpen"))return a=(e=w.host.coord()).top+w.host.height()/2-w.editRecurrenceDialog.height()/2,t=e.left+w.host.width()/2-w.editRecurrenceDialog.width()/2,w.editRecurrenceDialog.find("button:first").focus(),setTimeout(function(){w.editRecurrenceDialog.find("button:first").focus()},25),w.editRecurrenceDialog.jqxWindow("move",t,a),w.editRecurrenceDialog.jqxWindow("open"),w.editSeries=function(e){e?w._initDialog(g.rootAppointment):w._initDialog(g),w._openDialog()},w.overlay.show(),w.overlay.width(w.host.width()),w.overlay.height(w.host.height()),e=w.host.coord(),w.overlay.offset(e),w._editDialog||w._initDialog(),!1;if((w.editAppointment=g)||(x=w.getSelection())||(w.focus(),w.focusedCell||w._updateFocusedCell(),w.focusedCell&&(w.focusedCell.setAttribute("data-selected","true"),w._lastSelectedCell=w.focusedCell,w._updateCellsSelection(w.focusedCell),x=w.getSelection())),(x||g)&&(f=(x||g).from,D=(x||g).to,0<(t=w.getSelectedCells()).length&&t[t.length-1].getAttribute("data-end-date")&&(D=_.jqx.scheduler.utilities.getEndOfDay(D)),w._editStart=f,w._editEnd=D),w.editDialogFields&&w.editDialogFields.resourceContainer&&0<w._resources.length){for(var i=new Array,r=0;r<w._resources.length;r++)i.push(w._resources[r]);var a=!0;10<i.length&&(a=!1),w.editDialogFields.resource.jqxDropDownList({source:i,selectedIndex:0,autoDropDownHeight:a}),g||w.editDialogFields.resource.val(x.resourceId)}w.editDialogFields&&w.editDialogFields.repeatContainer&&(g&&g.rootAppointment?(w.editDialogFields.repeatContainer.hide(),w.editDialogFields.repeatPanel.hide()):(w.editDialogFields.repeatContainer.show(),w.editDialogFields.repeatPanel.show())),null==w._editDialog&&(v=(w._editDialog=null)==g?w.schedulerLocalization.editDialogCreateTitleString:w.schedulerLocalization.editDialogTitleString,b=_("<div><div>"+v+"</div><div id='dialog"+this.element.id+"'></div></div>"),_(b).jqxWindow({rtl:w.rtl,autoFocus:!1,autoOpen:!1,animationType:"none",theme:w.theme,width:540,maxHeight:800,minHeight:110,resizable:!1,initContent:function(){w.editDialogFields={},null==f&&null==D&&w._editStart&&w._editEnd&&(f=w._editStart,D=w._editEnd),b.jqxWindow("setTitle",v);var e=_(b.children()[1]),t=_("<div></div>"),i=(e.append(t),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogSubjectString+"</div>").appendTo(t)),n=_("<div class='"+w._editDialogField()+"'></div>").appendTo(t),n=_("<input type='text'/>").appendTo(n),n=(n.jqxInput({height:25,rtl:w.rtl,width:"100%",theme:w.theme}),n.css("box-sizing","border-box"),w.editDialogFields.subject=n,w.editDialogFields.subjectLabel=i,w.editDialogFields.subjectContainer=t,_("<div></div>")),i=(e.append(n),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogLocationString+"</div>").appendTo(n)),t=_("<div class='"+w._editDialogField()+"'></div>").appendTo(n),t=_("<input type='text'/>").appendTo(t),t=(t.jqxInput({height:25,rtl:w.rtl,width:"100%",theme:w.theme}),t.css("box-sizing","border-box"),w.editDialogFields.location=t,w.editDialogFields.locationLabel=i,w.editDialogFields.locationContainer=n,_("<div></div>")),i=(e.append(t),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogFromString+"</div>").appendTo(t)),n=_("<div class='"+w._editDialogField()+"'></div>").appendTo(t),r=_("<div></div>").appendTo(n),n=null,n=(f?n=f.toDate():((o=new Date).setHours(9,0,0),f=new _.jqx.date(n=o)),r.jqxDateTimeInput({height:27,dropDownWidth:220,dropDownHeight:220,rtl:w.rtl,localization:w._getDateTimeInputLocalization(),firstDayOfWeek:w.schedulerLocalization.firstDay,todayString:w.schedulerLocalization.todayString,clearString:w.schedulerLocalization.clearString,value:n,formatString:w.editDialogDateTimeFormatString,width:"100%",showTimeButton:!0,theme:w.theme}),w.editDialogFields.from=r,w.editDialogFields.fromLabel=i,w.editDialogFields.fromContainer=t,_("<div></div>")),i=(e.append(n),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogToString+"</div>").appendTo(n)),t=_("<div class='"+w._editDialogField()+"'></div>").appendTo(n),a=_("<div></div>").appendTo(t),t=null,o=(D?t=D.toDate():((o=new Date).setHours(10,0,0),D=new _.jqx.date(t=o)),a.jqxDateTimeInput({height:27,dropDownWidth:220,dropDownHeight:220,rtl:w.rtl,localization:w._getDateTimeInputLocalization(),firstDayOfWeek:w.schedulerLocalization.firstDay,todayString:w.schedulerLocalization.todayString,clearString:w.schedulerLocalization.clearString,value:t,formatString:w.editDialogDateTimeFormatString,width:"100%",showTimeButton:!0,theme:w.theme}),w.editDialogFields.to=a,w.editDialogFields.toLabel=i,w.editDialogFields.toContainer=n,w._changeFromUser=!0,w.addHandler(r,"change",function(e){var t,i;w._changeFromUser&&(e.args,t=e.args.oldValue,i=a.val("date"),0<(i=new _.jqx.date(i)-new _.jqx.date(t))&&(t=_.jqx.timeSpan(1e4*i),i=new _.jqx.date(e.args.newValue).add(t),a.val(i.toDate())))}),w.addHandler(a,"change",function(e){var t;w._changeFromUser&&(e.args,e=e.args.oldValue,t=a.val("date"),r.val("date")>=t&&a.val(e))}),_("<div></div>")),t=(e.append(o),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogAllDayString+"</div>").appendTo(o)),i=_("<div class='"+w._editDialogField()+"'></div>").appendTo(o),n=_("<div style='top: 8px; position:relative;'></div>").appendTo(i),i=(n.jqxCheckBox({rtl:w.rtl,width:25,theme:w.theme}),w.editDialogFields.allDay=n,w.editDialogFields.allDayLabel=t,w.editDialogFields.allDayContainer=o,w.addHandler(o,"change",function(e){e.args.checked?(a.jqxDateTimeInput({showTimeButton:!1,formatString:w.editDialogDateFormatString}),r.jqxDateTimeInput({showTimeButton:!1,formatString:w.editDialogDateFormatString})):(a.jqxDateTimeInput({showTimeButton:!0,formatString:w.editDialogDateTimeFormatString}),r.jqxDateTimeInput({showTimeButton:!0,formatString:w.editDialogDateTimeFormatString}))}),_.jqx.scheduler.utilities.getStartOfDay(f).equals(f)&&_.jqx.scheduler.utilities.getEndOfDay(D).equals(D)&&w.editDialogFields.allDay.val(!0),(0<=w._views[w._view].type.indexOf("month")||f&&f.equals(D)||D&&D.equals(_.jqx.scheduler.utilities.getEndOfDay(D))&&f&&f.equals(_.jqx.scheduler.utilities.getStartOfDay(f)))&&w.editDialogFields.allDay.val(!0),_("<div></div>")),n=(e.append(i),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogTimeZoneString+"</div>").appendTo(i)),t=_("<div class='"+w._editDialogField()+"'></div>").appendTo(i),o=_("<div></div>").appendTo(t);(l=new Array).push({displayName:w.schedulerLocalization.editDialogSelectTimeZoneString,id:null});for(var l=l.concat(w.timeZones),d=0;d<l.length;d++){var s=l[d],c=s.displayName.indexOf(")");c=0<=c?s.displayName.substring(2+c):s.displayName,s.searchName=c}o.jqxDropDownList({height:27,rtl:w.rtl,placeHolder:w.schedulerLocalization.editDialogSelectTimeZoneString,width:"100%",theme:w.theme,searchMember:"searchName",source:l,displayMember:"displayName",valueMember:"id"}),w.editDialogFields.timeZone=o,w.editDialogFields.timeZoneLabel=n,w.editDialogFields.timeZoneContainer=i,w.initRepeatPanels(b,e,D.toDate()),w.editDialogFields&&w.editDialogFields.repeatContainer&&(w.editAppointment&&w.editAppointment.rootAppointment?(w.editDialogFields.repeatContainer.hide(),w.editDialogFields.repeatPanel.hide()):(w.editDialogFields.repeatContainer.show(),w.editDialogFields.repeatPanel.show()));for(var t=_("<div></div>"),o=(e.append(t),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogDescriptionString+"</div>").appendTo(t)),n=_("<div class='"+w._editDialogField()+"'></div>").appendTo(t),i=_("<textarea type='text' resizable='off' style='position:relative; top: 3px; padding:3px;'></textarea>").appendTo(n),n=(i.jqxInput({rtl:w.rtl,height:40,width:"100%",theme:w.theme}),i.css("box-sizing","border-box"),w.editDialogFields.description=i,w.editDialogFields.descriptionLabel=o,w.editDialogFields.descriptionContainer=t,_("<div></div>")),i=(e.append(n),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogColorString+"</div>").appendTo(n)),o=_("<div class='"+w._editDialogField()+"'></div>").appendTo(n),t=_("<div></div>").appendTo(o),o=(t.jqxDropDownList({height:27,rtl:w.rtl,selectedIndex:-1,placeHolder:w.schedulerLocalization.editDialogColorPlaceHolderString,selectionRenderer:function(e,t){if(t<0)return e.css("top","4px"),e.css("position","relative"),e[0].outerHTML;e="";return e+="<div style='margin-top: 2px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+w.colors[t]+"; margin-left: 2%;'></div>"},renderer:function(e){if(-1==e)return"";var t="";return t+="<div style='margin-top: 1px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+w.colors[e]+"; margin-left: 2%;'></div>"},source:w.colors,width:"100%",theme:w.theme}),w.editDialogFields.color=t,w.editDialogFields.colorLabel=i,w.editDialogFields.colorContainer=n,_("<div></div>")),t=(e.append(o),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogStatusString+"</div>").appendTo(o)),i=_("<div class='"+w._editDialogField()+"'></div>").appendTo(o),n=_("<div></div>").appendTo(i),i=(n.jqxDropDownList({height:27,rtl:w.rtl,selectedIndex:2,autoDropDownHeight:!0,source:w.schedulerLocalization.editDialogStatuses,width:"100%",theme:w.theme}),w.editDialogFields.status=n,w.editDialogFields.statusLabel=t,w.editDialogFields.statusContainer=o,_("<div></div>")),n=(e.append(i),_("<div class='"+w._editDialogLabel()+"'>"+w.schedulerLocalization.editDialogResourceIdString+"</div>").appendTo(i)),t=_("<div class='"+w._editDialogField()+"'></div>").appendTo(i),o=_("<div></div>").appendTo(t),u=new Array,d=0;d<w._resources.length;d++)u.push(w._resources[d]);var t=!0,t=(10<u.length&&(t=!1),o.jqxDropDownList({height:27,rtl:w.rtl,source:u,selectedIndex:0,autoDropDownHeight:t,width:"100%",theme:w.theme}),w.editDialogFields.resource=o,w.editDialogFields.resourceLabel=n,w.editDialogFields.resourceContainer=i,0==u.length&&i.hide(),!g&&x&&w.editDialogFields.resource.val(x.resourceId),_("<div></div>")),o=(e.append(t),_("<div style='width:100%;' class='"+w._editDialogField()+"'></div>").appendTo(t)),n=_("<button style='margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogCancelString+"</button>").appendTo(o),i=_("<button style='margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogDeleteString+"</button>").appendTo(o),t=_("<button style='display: none; margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogRepeatDeleteSeriesString+"</button>").appendTo(o),h=_("<button style='display: none; margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogRepeatDeleteString+"</button>").appendTo(o),p=_("<button style='margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogSaveString+"</button>").appendTo(o),y=_("<button style='display: none; margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogRepeatSaveSeriesString+"</button>").appendTo(o),m=_("<button style='display: none; margin-left: 5px; float:right;'>"+w.schedulerLocalization.editDialogRepeatSaveString+"</button>").appendTo(o);w.isTouchDevice(),i.jqxButton({rtl:w.rtl,theme:w.theme}),t.jqxButton({rtl:w.rtl,theme:w.theme}),h.jqxButton({rtl:w.rtl,theme:w.theme}),p.jqxButton({rtl:w.rtl,theme:w.theme}),n.jqxButton({rtl:w.rtl,theme:w.theme}),y.jqxButton({rtl:w.rtl,theme:w.theme}),m.jqxButton({rtl:w.rtl,theme:w.theme}),y.hide(),m.hide(),p.addClass("primary"),m.addClass("primary"),y.addClass("primary"),i.addClass("jqx-danger"),w.editDialogFields.saveOccurrenceButton=m,w.editDialogFields.saveSeriesButton=y,w.editDialogFields.saveButton=p,w.editDialogFields.cancelButton=n,w.editDialogFields.deleteButton=i,w.editDialogFields.deleteSeriesButton=t,w.editDialogFields.deleteExceptionsButton=h,w.editDialogFields.buttons=o,w.addHandler(i,"click",function(){b.jqxWindow("close"),w.overlay.hide(),w._deleteAppointment(w.editAppointment)}),w.addHandler(n,"click",function(){b.jqxWindow("close"),w.overlay.hide()}),w.addHandler(m,"click",function(){if(w.editAppointment.isException()){for(var e=(w.editAppointment.rootAppointment||w.editAppointment).exceptions,t=0;t<e.length;t++)if(e[t].occurrenceFrom.equals(w.editAppointment.occurrenceFrom)){e[t]=w.editAppointment;break}}else null!=w.editAppointment.rootAppointment?(w.editAppointment.rootAppointment.exceptions.push(w.editAppointment),w.editAppointment.rootAppointment.recurrenceException.push(w.editAppointment.occurrenceFrom)):(w.editAppointment.exceptions.push(w.editAppointment),w.editAppointment.recurrenceException.push(w.editAppointment.occurrenceFrom));w._setAppointmentPropertiesFromDialog(w.editAppointment,"occurrence")&&(w.changedAppointments[w.editAppointment.id]={type:"Update",appointment:w.editAppointment.boundAppointment},w._raiseEvent("appointmentChange",{appointment:w.editAppointment.boundAppointment}),w._renderrows(),b.jqxWindow("close"),w.overlay.hide())}),w.addHandler(y,"click",function(){var e=w.editAppointment;e.rootAppointment&&(e=e.rootAppointment),w._setAppointmentPropertiesFromDialog(e,"series")&&(w.changedAppointments[e.id]={type:"Update",appointment:e.boundAppointment},w._raiseEvent("appointmentChange",{appointment:e.boundAppointment}),w._renderrows(),b.jqxWindow("close"),w.overlay.hide())}),w.addHandler(p,"click",function(){var e,t=!0;null==w.editAppointment?(e=new _.jqx.scheduler.appointment,(t=w._setAppointmentPropertiesFromDialog(e,"none"))&&w.addAppointment(e)):w.editAppointment.rootAppointment?(m.trigger("click"),t=!1):w.editAppointment.isRecurrentAppointment()?(y.trigger("click"),t=!1):(t=w._setAppointmentPropertiesFromDialog(w.editAppointment,"none"))&&(w.changedAppointments[w.editAppointment.id]={type:"Update",appointment:w.editAppointment?w.editAppointment.boundAppointment:null},w._raiseEvent("appointmentChange",{appointment:w.editAppointment.boundAppointment}),w._renderrows()),t&&(b.jqxWindow("close"),w.overlay.hide())}),w.addHandler(b,"close",function(e){w.overlay.hide(),w.focus(),w.editDialogClose&&w.editDialogClose(b,w.editDialogFields,w.editAppointment?w.editAppointment.boundAppointment:null),w._raiseEvent("editDialogClose",{dialog:b,fields:w.editDialogFields,appointment:w.editAppointment?w.editAppointment.boundAppointment:null})}),w.editDialogCreate&&w.editDialogCreate(b,w.editDialogFields,w.editAppointment),w._raiseEvent("editDialogCreate",{dialog:b,fields:w.editDialogFields,appointment:w.editAppointment?w.editAppointment.boundAppointment:null}),b.jqxWindow({height:e[0].scrollHeight+40})}}),w._editDialog=b),w.dialogOpenings||(w.dialogOpenings=0),w.removeHandler(w._editDialog,"open"),w.addHandler(w._editDialog,"open",function(e){if(w.editDialogOpen&&w.editDialogFields&&1==w.editDialogOpen(w._editDialog,w.editDialogFields,w.editAppointment?w.editAppointment.boundAppointment:null))return;w.rtl&&(w._editDialog.find(".jqx-scheduler-edit-dialog-label").addClass(w.toThemeProperty("jqx-scheduler-edit-dialog-label-rtl")),w._editDialog.find(".jqx-scheduler-edit-dialog-field").addClass(w.toThemeProperty("jqx-scheduler-edit-dialog-field-rtl")),w.editDialogFields.saveOccurrenceButton.css("float","left"),w.editDialogFields.saveSeriesButton.css("float","left"),w.editDialogFields.saveButton.css("float","left"),w.editDialogFields.cancelButton.css("float","left"),w.editDialogFields.deleteButton.css("float","left"),w.editDialogFields.deleteSeriesButton.css("float","left"),w.editDialogFields.deleteExceptionsButton.css("float","left"),w.editDialogFields.buttons.css("width","auto"),w.editDialogFields.allDay.css("float","right")),setTimeout(function(){var e=w.editAppointment?w.editAppointment.boundAppointment:null;w.editAppointment&&w.editAppointment.rootAppointment&&(e=w.editAppointment.rootAppointment.boundAppointment),w._raiseEvent("editDialogOpen",{dialog:w._editDialog,fields:w.editDialogFields,appointment:e})});function t(){setTimeout(function(){n?w.editDialogFields.deleteButton.focus():(w.editDialogFields.subject.focus(),w.editDialogFields.subject.select())},1)}var i=null==w.editAppointment?w.schedulerLocalization.editDialogCreateTitleString:w.schedulerLocalization.editDialogTitleString;if(w._editDialog.jqxWindow({title:i}),0==w.dialogOpenings&&!g)return w.dialogOpenings++,w.isTouchDevice()||(w._editDialog.jqxWindow({height:150}),w._editDialog.jqxWindow({height:_(w._editDialog.children())[1].scrollHeight+40})),w.editDialogFields.deleteButton.hide(),void t();w.editDialogFields&&(w.editDialogFields.subject.val(""),w.editDialogFields.location.val(""),t(),w.editDialogFields.resetExceptions.val(!1),w.editDialogFields.description.val(""),g||w.editDialogFields.deleteButton.hide(),g?(w.dialogOpenings++,w.editDialogFields.deleteButton.show(),w.editDialogFields.subject.val(g.subject),w.editDialogFields.location.val(g.location),w.editDialogFields.description.val(g.description),w.editDialogFields.timeZone.val(g.timeZone),0<=w.colors.indexOf(g.borderColor)?w.editDialogFields.color.val(g.borderColor):w.editDialogFields.color.jqxDropDownList("clearSelection"),w.editDialogFields.allDay.val(g.allDay),w.editDialogFields.resource.val(g.resourceId),w.editDialogFields.status.val(g.status),g.timeZone&&(g.from=g.from.toTimeZone(g.timeZone),g.to=g.to.toTimeZone(g.timeZone)),f=g.from,D=g.to,_.jqx.scheduler.utilities.getStartOfDay(f).equals(f)&&_.jqx.scheduler.utilities.getEndOfDay(D).equals(D)&&w.editDialogFields.allDay.val(!0),w._setAppointmentPropertiesToDialog(g,f,D,x?x.resourceId:null)):(w.editDialogFields.saveButton.show(),w._setAppointmentPropertiesToDialog(null,f,D,x?x.resourceId:null)),f&&D&&(w._changeFromUser=!1,w.editDialogFields.from.val(f.toDate()),w.editDialogFields.to.val(D.toDate()),w._changeFromUser=!0),w.isTouchDevice()||(w._editDialog.jqxWindow({height:150}),w._editDialog.jqxWindow({height:_(w._editDialog.children())[1].scrollHeight+40})))}),w.removeHandler(w._editDialog,"keydown"),w.addHandler(w._editDialog,"keydown",function(e){if(w.editDialogKeyDown){var t=w.editDialogKeyDown(b,w.editDialogFields,w.editAppointment,e);if(null!=t)return t}if(13==e.keyCode){if(_(document.activeElement).ischildof(w._editDialog)){if("button"==document.activeElement.nodeName.toLowerCase())return!0;(g?g.isException()||g.rootAppointment?w.editDialogFields.saveOccurrenceButton:g.isRecurrentAppointment()?w.editDialogFields.saveSeriesButton:w.editDialogFields.saveButton:w.editDialogFields.saveButton).trigger("click")}}else 27==e.keyCode&&w.editDialogFields.cancelButton.trigger("click")})},openMenu:function(e,t){var i,n=this;n.menu||n._initMenu(),n._views[n._view].type;n.contextMenu&&n.menu&&(n.selectedAppointment?n.menu.jqxMenu("showItem","editAppointment"):n.menu.jqxMenu("hideItem","editAppointment"),arguments.length<2&&(n.selectedAppointment?(e=(i=n.selectedAppointment.coord()).left,t=i.top):n.focusedCell&&(i=_(n.focusedCell).coord()),e=i.left,t=i.top),n.menu.jqxMenu("open",e,t),n._hasOpenedMenu=!0)},closeMenu:function(){var e=this;e.contextMenu&&e.menu&&setTimeout(function(){e.menu.jqxMenu("close")})},closeDialog:function(){this._editDialog.jqxWindow("close")},openDialog:function(e,t){var i=this;i._views[i._view].type;i.selectedJQXAppointment?!1!==i._initDialog(i.selectedJQXAppointment)&&i._openDialog(e,t):(null==i.getSelection()&&(i.focus(),i.focusedCell.setAttribute("data-selected","true"),i._lastSelectedCell=i.focusedCell,i._updateCellsSelection(i.focusedCell)),i._initDialog(),i._openDialog(e,t))},_openDialog:function(e,t){var i,n=this;n._views[n._view].type;n.editDialog&&(i=n.host.coord(),n.overlay.show(),n.overlay.css("z-index",9999999),n.overlay.width(n.host.width()),n.overlay.height(n.host.height()),n.overlay.offset(i),n.isTouchDevice()?(n._editDialog.jqxWindow("move",i.left,i.top),n._editDialog.jqxWindow({draggable:!1,maxWidth:n.host.width(),maxHeight:n.host.height()}),n._editDialog.jqxWindow({width:n.host.width(),height:n.host.height()}),n._editDialog.jqxWindow("open"),n._editDialog.jqxWindow("move",i.left,i.top)):(null!=e&&null!=t?n._editDialog.jqxWindow("move",e,t):((e=n._editDialog.height())<400&&(e=400),t=i.top+n.host.height()/2-e/2,e=i.left+n.host.width()/2-n._editDialog.width()/2,n._editDialog.jqxWindow("move",e,t)),n._editDialog.jqxWindow("open")),setTimeout(function(){n.overlay.css("z-index",999)},50))},_setAppointmentPropertiesFromDialog:function(e,t){var i=this,n=e,e=i._views[i._view].type,r=(i._views[i._view],i.editDialogFields.from.val("date")),a=i.editDialogFields.to.val("date");if(a<r)return i.editDialogFields.from.jqxDateTimeInput("focus"),!1;if(r==a)return 0<=e.indexOf("month");n.resourceId=i.editDialogFields.resource.val(),"none"==i.editDialogFields.resourceContainer.css("display")&&(n.resourceId=""),n.description=i.editDialogFields.description.val(),n.allDay=i.editDialogFields.allDay.val(),n.status=i.editDialogFields.status.val(),n.location=i.editDialogFields.location.val(),n.timeZone=i.editDialogFields.timeZone.val(),""==n.timeZone&&""!=i.timeZone&&(n.timeZone=i.timeZone),n.from=new _.jqx.date(r,n.timeZone),n.to=new _.jqx.date(a,n.timeZone),i.timeZone?(n.from=n.from.toTimeZone(i.timeZone),n.to=n.to.toTimeZone(i.timeZone)):(n.from=n.from.toTimeZone(null),n.to=n.to.toTimeZone(null)),n.allDay&&(n.from=_.jqx.scheduler.utilities.getStartOfDay(n.from),n.to=_.jqx.scheduler.utilities.getEndOfDay(n.to)),i.editDialogFields.color.val()&&(e=i.getAppointmentColors(i.editDialogFields.color.val()),n.color=e.color,n.background=e.background,n.borderColor=e.border),n.subject=i.editDialogFields.subject.val();var r=i.editDialogFields.repeat.jqxDropDownList("selectedIndex"),o=new _.jqx.scheduler.recurrencePattern,e=i.editDialogFields.repeatEndPanel;switch(o.timeZone=i.timeZone,o.from=n.from.clone(),"occurrence"==t&&n.rootAppointment&&(o.from=n.rootAppointment.from.clone()),i.editDialogFields.resetExceptions.val()&&(n.exceptions=new Array,n.recurrenceException=new Array),e.repeatEndNever.val()?(o.count=1e3,o.to=new _.jqx.date(9999,12,31)):e.repeatEndAfter.val()?(o.count=e.repeatEndAfterValue.val(),o.to=new _.jqx.date(9999,12,31)):e.repeatEndOn.val()&&(o.count=1e3,a=new _.jqx.date(e.repeatEndOnValue.jqxDateTimeInput("getDate"),i.timeZone),o.to=a),r){case 0:default:n.clearRecurrence();break;case 1:var l=i.editDialogFields.daily.repeatDayInterval.val();o.interval=l,o.freq="daily";break;case 2:var d=i.editDialogFields.weekly,l=d.repeatWeekInterval.val(),s=[{Sunday:0},{Monday:1},{Tuesday:2},{Wednesday:3},{Thursday:4},{Friday:5},{Saturday:6}],c=d.repeatDays,u=new Array;o.weekDays={};for(var h=0;h<7;h++)c[h].val()&&(0==h?u.push(6):u.push(h-1),_.extend(o.weekDays,s[h]));o.freq="weekly",o.byweekday=u,o.interval=l;break;case 3:d=i.editDialogFields.monthly,l=d.repeatMonth.val();if(d.repeatMonthDayBool.val())o.day=d.repeatMonthDay.val(),o.bymonthday=new Array,o.bymonthday.push(o.day);else{var p=d.repeatDayOfWeek.jqxDropDownList("selectedIndex"),y=new Array;0==p?p=6:p--;var m="";switch(d.repeatDayOfWeekType.jqxDropDownList("selectedIndex")){case 0:m=1;break;case 1:m=2;break;case 2:m=3;break;case 3:m=4;break;case 4:m=-1}y.push([p,m]),o.bynweekday=y}o.freq="monthly",o.interval=l;break;case 4:d=i.editDialogFields.yearly,l=d.repeatYear.val();if(d.repeatYearBool.val())o.day=d.repeatYearDay.val(),o.month=d.repeatYearMonth.jqxDropDownList("selectedIndex"),o.bymonth=new Array,o.bymonth.push(1+o.month),o.byyearday=new Array,o.byyearday.push(o.day);else{o.month=d.repeatDayOfWeekMonth.jqxDropDownList("selectedIndex"),o.bymonth=new Array,o.bymonth.push(1+o.month);p=d.repeatDayOfWeek.jqxDropDownList("selectedIndex"),y=new Array;0==p?p=6:p--;m="";switch(d.repeatDayOfWeekType.jqxDropDownList("selectedIndex")){case 0:m=1;break;case 1:m=2;break;case 2:m=3;break;case 3:m=4;break;case 4:m=-1}y.push([p,m]),o.bynweekday=y}o.freq="yearly",o.interval=l}n.rootAppointment?n.rootAppointment.recurrencePattern=o:0<r&&(n.recurrencePattern=o);var g,f={},D={};for(g in i.appointmentDataFields){var v=i.appointmentDataFields[g],b=n[g];f[g]=b,"from"!=g&&"to"!=g||(b=b.toDate()),D[v]=b}return f.originalData=D,(f.jqxAppointment=n).boundAppointment=f,!0},_setAppointmentPropertiesToDialog:function(e,t,i,n){var r=this,a=r.editDialogFields.repeatEndPanel;if(a.repeatEndNever.jqxRadioButton({checked:!0}),a.repeatEndAfter.jqxRadioButton({checked:!1}),a.repeatEndAfterValue.val(1),a.repeatEndOnValue.val(void 0),i.toDate(),r.editDialogFields.daily&&r.editDialogFields.daily.repeatDayInterval.val(1),r.editDialogFields.weekly){for(var o=r.editDialogFields.weekly,l=0;l<o.repeatDays.length;l++)1==l?o.repeatDays[l].jqxCheckBox({checked:!0}):o.repeatDays[l].jqxCheckBox({checked:!1});o.repeatWeekInterval.val(1)}if(r.editDialogFields.monthly&&((a=r.editDialogFields.monthly).repeatDayOfWeek.jqxDropDownList("selectIndex",1),a.repeatDayOfWeekBool.jqxRadioButton({checked:!1}),a.repeatDayOfWeekType.jqxDropDownList("selectIndex",0),a.repeatMonthDayBool.jqxRadioButton({checked:!0}),a.repeatMonthDay.val(1),a.repeatMonth.val(1)),r.editDialogFields.yearly&&((a=r.editDialogFields.yearly).repeatDayOfWeekMonth.jqxDropDownList("selectIndex",0),a.repeatDayOfWeekBool.jqxRadioButton({checked:!1}),a.repeatDayOfWeekType.jqxDropDownList("selectIndex",0),a.repeatDayOfWeek.jqxDropDownList("selectIndex",1),a.repeatYear.val(1),a.repeatYearMonth.jqxDropDownList("selectIndex",0),a.repeatYearDay.val(1),a.repeatYearBool.val(!0)),e&&e.isRecurrentAppointment()?e.rootAppointment?r.editDialogFields.resetExceptionsContainer.hide():r.editDialogFields.resetExceptionsContainer.show():e&&(r.editDialogFields.resetExceptionsContainer.hide(),r.editDialogFields.repeat.jqxDropDownList("selectIndex",0)),!e)return r.editDialogFields.timeZone.jqxDropDownList("clearSelection"),n?r.editDialogFields.resource.val(n):r.editDialogFields.resource.jqxDropDownList("selectIndex",0),r.editDialogFields.allDay.val(!1),(0<=r._views[r._view].type.indexOf("month")||t&&t.equals(i)||i&&i.equals(_.jqx.scheduler.utilities.getEndOfDay(i))&&t&&t.equals(_.jqx.scheduler.utilities.getStartOfDay(t)))&&r.editDialogFields.allDay.val(!0),r.editDialogFields.color.jqxDropDownList("clearSelection"),r.editDialogFields.description.val(""),r.editDialogFields.subject.val(""),void r.editDialogFields.repeat.jqxDropDownList("selectIndex",0);var d=(a=e).recurrencePattern;if(null!=(d=a.rootAppointment?a.rootAppointment.recurrencePattern:d)){a=d.freq,a="yearly"==a?4:"monthly"==a?3:"weekly"==a?2:"daily"==a?1:0,n=r.editDialogFields.repeatEndPanel;switch(1e3!=d.count?(n.repeatEndNever.jqxRadioButton({checked:!1}),n.repeatEndAfter.jqxRadioButton({checked:!0}),n.repeatEndAfterValue.val(d.count)):9999!=d.to.year()?(n.repeatEndOn.jqxRadioButton({checked:!0}),n.repeatEndOnValue.val(d.to.toDate())):n.repeatEndNever.jqxRadioButton({checked:!0}),r.editDialogFields.repeat.jqxDropDownList("selectIndex",a),a){case 1:var s=d.interval;r.editDialogFields.daily.repeatDayInterval.val(s);break;case 2:for(var s=d.interval,c=r.editDialogFields.weekly,u=(c.repeatWeekInterval.val(s),d.byweekday),h=0;h<7;h++)(p=c.repeatDays[h]).val(!1);for(var p,h=0;h<u.length;h++)(6==(p=u[h])?c.repeatDays[0]:c.repeatDays[p+1]).val(!0);break;case 3:s=r.editDialogFields.monthly;if(s.repeatMonth.val(d.interval),d.bymonthday&&0<d.bymonthday.length)s.repeatMonthDayBool.jqxRadioButton({checked:!0}),s.repeatMonthDay.val(d.day);else{s.repeatDayOfWeekBool.jqxRadioButton({checked:!0});var y=(g=d.bynweekday)[0][0];s.repeatDayOfWeek.jqxDropDownList("selectIndex",y=7==++y?0:y);var m="";switch(g[0][1]){case 1:m=0;break;case 2:m=1;break;case 3:m=2;break;case 4:m=3;break;case-1:m=4}s.repeatDayOfWeekType.jqxDropDownList("selectIndex",m)}break;case 4:s=r.editDialogFields.yearly;if(d.byyearday&&0<d.byyearday.length&&(s.repeatYearDay.val(d.byyearday[0]),s.repeatYearBool.val(!0)),d.bymonth&&0<d.bymonth.length&&(s.repeatYearMonth.jqxDropDownList("selectIndex",d.bymonth[0]-1),s.repeatYearBool.val(!0)),!d.byyearday||d.byyearday&&0==d.byyearday.length){s.repeatDayOfWeekMonth.jqxDropDownList("selectIndex",d.bymonth[0]-1),s.repeatDayOfWeekBool.jqxRadioButton({checked:!0});var g,y=(g=d.bynweekday)[0][0];s.repeatDayOfWeek.jqxDropDownList("selectIndex",y=7==++y?0:y);m="";switch(g[0][1]){case 1:m=0;break;case 2:m=1;break;case 3:m=2;break;case 4:m=3;break;case-1:m=4}s.repeatDayOfWeekType.jqxDropDownList("selectIndex",m)}}}}}),_.jqx.scheduler.column=function(i,e){return this.owner=i,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="center",this.cellsalign="center",this.width="auto",this.minwidth=60,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){var i;this[e]?(i=this[e],this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)):this[e.toLowerCase()]&&(i=this[e.toLowerCase()],this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i))},this._initfields=function(e){if(null!=e)if(_.jqx.hasProperty(e,"dataField")&&(this.datafield=_.jqx.get(e,"dataField")),_.jqx.hasProperty(e,"displayField")?this.displayfield=_.jqx.get(e,"displayField"):this.displayfield=this.datafield,_.jqx.hasProperty(e,"columnType")&&(this.columntype=_.jqx.get(e,"columnType")),_.jqx.hasProperty(e,"validation")&&(this.validation=_.jqx.get(e,"validation")),_.jqx.hasProperty(e,"autoCellHeight")&&(this.autoCellHeight=_.jqx.get(e,"autoCellHeight")),_.jqx.hasProperty(e,"text")?this.text=_.jqx.get(e,"text"):this.text=this.displayfield,_.jqx.hasProperty(e,"sortable")&&(this.sortable=_.jqx.get(e,"sortable")),_.jqx.hasProperty(e,"hidden")&&(this.hidden=_.jqx.get(e,"hidden")),_.jqx.hasProperty(e,"groupable")&&(this.groupable=_.jqx.get(e,"groupable")),_.jqx.hasProperty(e,"renderer")&&(this.renderer=_.jqx.get(e,"renderer")),_.jqx.hasProperty(e,"align")&&(this.align=_.jqx.get(e,"align")),_.jqx.hasProperty(e,"cellsAlign")&&(this.cellsalign=_.jqx.get(e,"cellsAlign")),_.jqx.hasProperty(e,"cellsFormat")&&(this.cellsFormat=_.jqx.get(e,"cellsFormat")),_.jqx.hasProperty(e,"width")&&(this.width=_.jqx.get(e,"width")),_.jqx.hasProperty(e,"minWidth")&&(this.minwidth=_.jqx.get(e,"minWidth")),_.jqx.hasProperty(e,"maxWidth")&&(this.maxwidth=_.jqx.get(e,"maxWidth")),_.jqx.hasProperty(e,"cellsRenderer")&&(this.cellsRenderer=_.jqx.get(e,"cellsRenderer")),_.jqx.hasProperty(e,"columnType")&&(this.columntype=_.jqx.get(e,"columnType")),_.jqx.hasProperty(e,"pinned")&&(this.pinned=_.jqx.get(e,"pinned")),_.jqx.hasProperty(e,"filterable")&&(this.filterable=_.jqx.get(e,"filterable")),_.jqx.hasProperty(e,"filter")&&(this.filter=_.jqx.get(e,"filter")),_.jqx.hasProperty(e,"resizable")&&(this.resizable=_.jqx.get(e,"resizable")),_.jqx.hasProperty(e,"draggable")&&(this.draggable=_.jqx.get(e,"draggable")),_.jqx.hasProperty(e,"editable")&&(this.editable=_.jqx.get(e,"editable")),_.jqx.hasProperty(e,"initEditor")&&(this.initeditor=_.jqx.get(e,"initEditor")),_.jqx.hasProperty(e,"createEditor")&&(this.createeditor=_.jqx.get(e,"createEditor")),_.jqx.hasProperty(e,"destroyEditor")&&(this.destroyeditor=_.jqx.get(e,"destroyEditor")),_.jqx.hasProperty(e,"getEditorValue")&&(this.geteditorvalue=_.jqx.get(e,"getEditorValue")),_.jqx.hasProperty(e,"className")&&(this.classname=_.jqx.get(e,"className")),_.jqx.hasProperty(e,"cellClassName")&&(this.cellclassname=_.jqx.get(e,"cellClassName")),_.jqx.hasProperty(e,"rendered")&&(this.rendered=_.jqx.get(e,"rendered")),_.jqx.hasProperty(e,"exportable")&&(this.exportable=_.jqx.get(e,"exportable")),_.jqx.hasProperty(e,"nullable")&&(this.nullable=_.jqx.get(e,"nullable")),_.jqx.hasProperty(e,"columnGroup")&&(this.columngroup=_.jqx.get(e,"columnGroup")),!e instanceof String&&"string"!=typeof e)for(var t in e)if(!this.hasOwnProperty(t)&&!this.hasOwnProperty(t.toLowerCase()))throw i.host.remove(),new Error("jqxScheduler: Invalid property name - "+t+".")},this._initfields(e),this},_.jqx.schedulerDataCollection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){this.records[(e=e<1?1:e)-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,!0)},this.insertAt=function(e,t){return null!=e&&(null!=t&&(0<=e&&(e<this.records.length?(this.records.splice(e,0,t),!0):this.add(t))))},this.remove=function(e){if(null==e)return!1;e=this.records.indexOf(e);return-1!=e&&(this.records.splice(e,1),!0)},this.removeAt=function(e){return null!=e&&(!(e<0)&&(e<this.records.length&&(this.records[e],this.records.splice(e,1),!0)))},this},_.jqx.scheduler.dataView=function(s){return(this.that=this).scheduler=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(e,t){var i=this;if(_.isArray(e))i.update(e);else{var n=!!e._source,r=null,a=(this._sortData=null,this._sortHierarchyData=null,n?e=(r=e)._source:r=new _.jqx.dataAdapter(e,{autoBind:!1}),function(e){e.originaldata=r.originaldata,e.records=r.records,e.hierarchy=r.hierarchy,e.scheduler.serverProcessing||(e._sortData=null,e._sortfield=null,e._filteredData=null,e._sortHierarchyData=null),e.hierarchy||(e.hierarchy=new Array,r.hierarchy=new Array),r._source.totalrecords?e.totalrecords=r._source.totalrecords:r._source.totalRecords?e.totalrecords=r._source.totalRecords:0!==e.hierarchy.length?e.totalrecords=e.hierarchy.length:e.totalrecords=e.records.length,e.cachedrecords=r.cachedrecords}),i=(n=this,r.recordids=[],r.records=new Array,r.cachedrecords=new Array,r.originaldata=new Array,r._options.totalrecords=n.totalrecords,r._options.originaldata=n.originaldata,r._options.recordids=n.recordids,r._options.cachedrecords=new Array,r._options.pagenum=n.pagenum,r._options.pageable=n.pageable,null!=e.type&&(r._options.type=e.type),null!=e.formatdata&&(r._options.formatData=e.formatdata),null!=e.contenttype&&(r._options.contentType=e.contenttype),null!=e.async&&(r._options.async=e.async),null!=e.updaterow&&(r._options.updaterow=e.updaterow),null!=e.addrow&&(r._options.addrow=e.addrow),null!=e.deleterow&&(r._options.deleterow=e.deleterow),0==n.pagesize&&(n.pagesize=10),r._options.pagesize=n.pagesize,this.source=e,void 0!==t&&0,this);switch(e.datatype){case"local":case"array":default:null==e.localdata&&(e.localdata=[]),null!=e.localdata&&(r.unbindBindingUpdate(s+i.scheduler.element.id),(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),(d=function(){a(i),i.update(r.records)})(),r.bindBindingUpdate(s+i.scheduler.element.id,d));break;case"ics":case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=e.localdata)return r.unbindBindingUpdate(s+i.scheduler.element.id),(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),(d=function(e){a(i),i.update(r.records)})(),void r.bindBindingUpdate(s+i.scheduler.element.id,d);var o={},l=r._options.data,d=(r._options.data?_.extend(r._options.data,o):(e.data&&_.extend(o,e.data),r._options.data=o),function(){function e(){a(i),i.update(r.records)}if(_.jqx.browser.msie&&_.jqx.browser.version<9)try{e()}catch(e){}else e()});r.unbindDownloadComplete(s+i.scheduler.element.id),r.bindDownloadComplete(s+i.scheduler.element.id,d),r._source.loaderror=function(e,t,i){d()},(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),r._options.data=l}}},this.addFilter=function(e,t){this._sortData=null,this._sortHierarchyData=null;for(var i=-1,n=0;n<this.filters.length;n++)if(this.filters[n].datafield==e){i=n;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removeFilter=function(e){this._sortData=null,this._sortHierarchyData=null;for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this._compare=function(e,t,i){if(void 0===(t=t)&&(t=null),null===(e=void 0===(e=e)?null:e)&&null===t)return 0;if(null===e&&null!==t)return 1;if(null!==e&&null===t)return 1;if(e=e.toString(),t=t.toString(),_.jqx.dataFormat)if(i&&""!=i)switch(i){case"number":case"int":case"float":return e<t?-1:t<e?1:0;case"date":case"time":return e<t?-1:t<e?1:0;case"string":case"text":e=String(e).toLowerCase(),t=String(t).toLowerCase()}else{if(_.jqx.dataFormat.isNumber(e)&&_.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(_.jqx.dataFormat.isDate(e)&&_.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;_.jqx.dataFormat.isNumber(e)||_.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase())}try{if(e<t)return-1;if(t<e)return 1}catch(e){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)},this.evaluate=function(e){if(this.scheduler.serverProcessing)return e;var t=new Array;if(this.filters.length){function i(e,t){for(var i=0;i<e.length;i++){for(var n=e[i],r=(n._visible=!0,void 0),a=0;a<this.filters.length;a++)var o=this.filters[a].filter,l=n[this.filters[a].datafield],l=o.evaluate(l),r=null==r?l:"or"==o.operator?r||l:r&&l;n._visible=!1,(r||n.aggregate)&&(n._visible=!0,t.push(n),d[n.uid]=n)}}var d=new Array;if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.scheduler.source.hierarchy&&0<this.scheduler.source.hierarchy.length){var r=new Array,a=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];r.push(n),n.records&&0<n.records.length&&a(n,n.records)}};a(null,e),i.call(this,r,t);for(var n=0;n<t.length;n++)for(var o=t[n];o.parent;){var l=o.parent;d[l.uid]||(l._visible=!0,d[l.uid]=l),o=l}t=e}else i.call(this,e,t);this._filteredData=t,this.rows=t}}else this.rows=e;return this.rows},this.getid=function(e,t,i){if(0<_(e,t).length)return _(e,t).text();if(this.rows&&""!=e&&null!=e&&0<this.rows.length){null==(r=this.rows[this.rows.length-1][e])&&(r=null);for(var n=1;n<=100;n++)if(!(a=this.scheduler.appointmentsByKey[n+r])){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(a=this.scheduler.appointmentsByKey["jqx"+r+n])continue;return"jqx"+r+n}return r+n}}if(null!=e&&0<e.toString().length){t=_(t).attr(e);if(null!=t&&0<t.toString().length)return this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords?"jqx"+t:t}var r;if(this.rows&&0<this.rows.length&&(a=this.scheduler.appointmentsByKey[i])){null==(r=this.rows[this.rows.length-1][e])&&(r="");for(n=1;n<=1e3;n++)if(!(a=this.scheduler.appointmentsByKey[n+r])){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(a=this.scheduler.appointmentsByKey["jqx"+r+n])continue;return"jqx"+r+n}return r+n}}if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(!(a=this.scheduler.appointmentsByKey["jqx"+i]))return"jqx"+i;for(n=i+1;n<=100;n++)if(!(a=this.scheduler.appointmentsByKey["jqx"+n])){var a=this.scheduler.appointmentsByKey["jqx"+n];if(!a)return"jqx"+n}}return i},this.generatekey=function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},this}}(jqxBaseFramework);