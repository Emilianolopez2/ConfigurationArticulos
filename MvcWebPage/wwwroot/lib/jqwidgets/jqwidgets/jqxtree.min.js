!function(x){x.jqx.jqxWidget("jqxTree","",{}),x.extend(x.jqx._jqxTree.prototype,{defineInstance:function(){var e={items:new Array,width:null,height:null,easing:"easeInOutCirc",animationShowDuration:"fast",animationHideDuration:"fast",treeElements:new Array,disabled:!1,itemsMember:"",displayMember:"",valueMember:"",enableHover:!0,keyboardNavigation:!0,enableKeyboardNavigation:!0,toggleMode:"dblclick",source:null,checkboxes:!1,checkSize:16,toggleIndicatorSize:18,hasThreeStates:!1,selectedItem:null,touchMode:"auto",allowDrag:!0,allowDrop:!0,searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:700,animationHideDelay:0,submitCheckedItems:!1,dragStart:null,dragEnd:null,rtl:!1,dropAction:"default",events:["expand","collapse","select","initialized","added","removed","checkChange","dragEnd","dragStart","itemClick"],aria:{"aria-activedescendant":{name:"getActiveDescendant",type:"string"},"aria-disabled":{name:"disabled",type:"boolean"}}};return this===x.jqx._jqxTree.prototype||x.extend(!0,this,e),e},createInstance:function(e){var t,i,n=this;this.host.attr("role","tree"),this.host.attr("data-role","treeview"),this.enableKeyboardNavigation=this.keyboardNavigation,this.propertyChangeMap.disabled=function(e,t,i,s){n.disabled?n.host.addClass(n.toThemeProperty("jqx-tree-disabled")):n.host.removeClass(n.toThemeProperty("jqx-tree-disabled")),x.jqx.aria(n,"aria-disabled",s)},(null!=this.width&&-1!=this.width.toString().indexOf("px")||null!=this.width&&!isNaN(this.width))&&this.host.width(this.width),(null!=this.height&&-1!=this.height.toString().indexOf("px")||null!=this.height&&!isNaN(this.height))&&this.host.height(this.height),null!=this.width&&-1!=this.width.toString().indexOf("%")&&this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("%")&&this.host.height(this.height),this.host.attr("tabindex")||this.host.attr("tabIndex",1),this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-tree-disabled")),x.jqx.aria(this,"aria-disabled",!0)),this.host.jqxDragDrop&&window.jqxTreeDragDrop(),this.originalInnerHTML=this.element.innerHTML,this.createdTree=!1,this.element.innerHTML.indexOf("UL")&&0<(i=this.host.find("ul:first")).length&&(this.createTree(i[0]),this.createdTree=!0),null!=this.source&&(t=this.loadItems(this.source),this.element.innerHTML=t,0<(i=this.host.find("ul:first")).length&&(this.createTree(i[0]),this.createdTree=!0)),this._itemslength=this.items.length,this.createdTree||0==this.host.find("ul").length&&(this.host.append(x("<ul></ul>")),0<(i=this.host.find("ul:first")).length&&(this.createTree(i[0]),this.createdTree=!0),this.createdTree=!0),1==this.createdTree&&(this._render(),this._handleKeys()),this._updateCheckLayout()},checkItems:function(e,t){var i,s,n,l,r=this;null!=e?(s=i=0,s=(l=x(e.element).find("li")).length,x.each(l,function(e){var t=r.itemMapping["id"+this.id].item;0!=t.checked&&(t.checked,i++)}),e!=t?i==s?this.checkItem(e.element,!0,"tree"):0<i?this.checkItem(e.element,null,"tree"):this.checkItem(e.element,!1,"tree"):(n=t.checked,l=x(t.element).find("li"),x.each(l,function(){r.itemMapping["id"+this.id].item;r.checkItem(this,n,"tree")})),this.checkItems(this._parentItem(e),t)):(n=t.checked,l=x(t.element).find("li"),x.each(l,function(){r.itemMapping["id"+this.id].item;r.checkItem(this,n,"tree")}))},_getMatches:function(i,e){if(null==i||0==i.length)return-1;for(var t=this.items,s=new Array,n=0;n<t.length;n++)this._isVisible(t[n])&&!t[n].disabled&&s.push(t[n]);t=s,null!=e&&(t=t.slice(e));var l=new Array;return x.each(t,function(e){var t=(t=this.label)||"";x.jqx.string.startsWithIgnoreCase(t.toString(),i)&&l.push({id:this.id,element:this.element})}),l},_handleKeys:function(){var u=this;this.addHandler(this.host,"keydown",function(e){var t=e.keyCode;if((u.keyboardNavigation||u.enableKeyboardNavigation)&&null!=u.selectedItem){var i,s=u.selectedItem.element;if(u.incrementalSearch&&!(33<=t&&t<=40)){u._searchString||(u._searchString=""),(8==t||46==t)&&1<=u._searchString.length&&(u._searchString=u._searchString.substr(0,u._searchString.length-1));var n=String.fromCharCode(t),l=!isNaN(parseInt(n));if(65<=t&&t<=97||l||8==t||32==t||46==t){e.shiftKey||(n=n.toLocaleLowerCase()),8==t||32==t||46==t||0<u._searchString.length&&u._searchString.substr(0,1)==n||(u._searchString+=n),32==t&&(u._searchString+=" "),u._searchTime=new Date;l=u.selectedItem;if(l){for(var r=l.id,a=-1,h=0;h<u.items.length;h++)if(u.items[h].id==r){a=h+1;break}(0==(o=u._getMatches(u._searchString,a)).length||0<o.length&&o[0].id==r)&&(o=u._getMatches(u._searchString))}else var o=u._getMatches(u._searchString);0<o.length&&(l=u.selectedItem,u.selectedItem&&u.selectedItem.id!=o[0].id&&(u.clearSelection(),u.selectItem(o[0].element,"keyboard")),u._lastSearchString=u._searchString)}null!=u._searchTimer&&clearTimeout(u._searchTimer),27!=t&&13!=t||(u._searchString="",u._lastSearchString=""),u._searchTimer=setTimeout(function(){u._searchString="",u._lastSearchString=""},500)}switch(t){case 32:return u.checkboxes?(u.fromKey=!0,i=x(u.selectedItem.checkBoxElement).jqxCheckBox("checked"),u.checkItem(u.selectedItem.element,!i,"tree"),u.hasThreeStates&&u.checkItems(u.selectedItem,u.selectedItem),!1):!0;case 33:for(var d=u._getItemsOnPage(),m=u.selectedItem,h=0;h<d;h++)m=u._prevVisibleItem(m);return null!=m?(u.selectItem(m.element,"keyboard"),u.ensureVisible(m.element)):(u.selectItem(u._firstItem().element,"keyboard"),u.ensureVisible(u._firstItem().element)),!1;case 34:for(var d=u._getItemsOnPage(),c=u.selectedItem,h=0;h<d;h++)c=u._nextVisibleItem(c);return null!=c?(u.selectItem(c.element,"keyboard"),u.ensureVisible(c.element)):(u.selectItem(u._lastItem().element,"keyboard"),u.ensureVisible(u._lastItem().element)),!1;case 37:case 39:return(37==t&&!u.rtl||39==t&&u.rtl)&&(u.selectedItem.hasItems&&u.selectedItem.isExpanded?u.collapseItem(s):null!=(i=u._parentItem(u.selectedItem))&&(u.selectItem(i.element,"keyboard"),u.ensureVisible(i.element))),(39==t&&!u.rtl||37==t&&u.rtl)&&u.selectedItem.hasItems&&(u.selectedItem.isExpanded?null!=(c=u._nextVisibleItem(u.selectedItem))&&(u.selectItem(c.element,"keyboard"),u.ensureVisible(c.element)):u.expandItem(s)),!1;case 13:return u.selectedItem.hasItems&&(u.selectedItem.isExpanded?u.collapseItem(s):u.expandItem(s)),!1;case 36:return u.selectItem(u._firstItem().element,"keyboard"),u.ensureVisible(u._firstItem().element),!1;case 35:return u.selectItem(u._lastItem().element,"keyboard"),u.ensureVisible(u._lastItem().element),!1;case 38:return null!=(m=u._prevVisibleItem(u.selectedItem))&&(u.selectItem(m.element,"keyboard"),u.ensureVisible(m.element)),!1;case 40:return null!=(c=u._nextVisibleItem(u.selectedItem))&&(u.selectItem(c.element,"keyboard"),u.ensureVisible(c.element)),!1}}})},_firstItem:function(){for(var e=this.host.find("ul:first"),t=x(e).find("li"),i=0;i<=t.length-1;i++){var s=t[i],s=this.itemMapping["id"+s.id].item;if(this._isVisible(s))return s}return null},_lastItem:function(){for(var e=this.host.find("ul:first"),t=x(e).find("li"),i=t.length-1;0<=i;i--){var s=t[i],s=this.itemMapping["id"+s.id].item;if(this._isVisible(s))return s}return null},_parentItem:function(e){if(null==e)return null;var t=e.parentElement;if(!t)return null;var i=null;return x.each(this.items,function(){if(this.element==t)return i=this,!1}),i},_nextVisibleItem:function(e){if(null==e)return null;for(var t=e;null!=t;)if(t=t.nextItem,this._isVisible(t)&&!t.disabled)return t;return null},_prevVisibleItem:function(e){if(null==e)return null;for(var t=e;null!=t;)if(t=t.prevItem,this._isVisible(t)&&!t.disabled)return t;return null},_isVisible:function(e){if(null==e)return!1;if(!this._isElementVisible(e.element))return!1;var t=this._parentItem(e);if(null==t)return!0;if(null!=t){if(!this._isElementVisible(t.element))return!1;if(!t.isExpanded)return!1;for(;null!=t;){if(null!=(t=this._parentItem(t))&&!this._isElementVisible(t.element))return!1;if(null!=t&&!t.isExpanded)return!1}}return!0},_getItemsOnPage:function(){var e=0,t=(this.panel.jqxPanel("getVScrollPosition"),parseInt(this.host.height())),i=0,s=this._firstItem();if(0<parseInt(x(s.element).height()))for(;i<=t;)i+=parseInt(x(s.element).outerHeight()),e++;return e},_isElementVisible:function(e){return null!=e&&("none"!=x(e).css("display")&&"hidden"!=x(e).css("visibility"))},refresh:function(e){var t;(null!=this.width&&-1!=this.width.toString().indexOf("px")||null!=this.width&&!isNaN(this.width))&&this.host.width(this.width),(null!=this.height&&-1!=this.height.toString().indexOf("px")||null!=this.height&&!isNaN(this.height))&&this.host.height(this.height),this.panel&&(null!=this.width&&-1!=this.width.toString().indexOf("%")?((t=this).panel.jqxPanel("width","100%"),t.removeHandler(x(window),"resize.jqxtree"+t.element.id),t.addHandler(x(window),"resize.jqxtree"+t.element.id,function(){t._calculateWidth()})):this.panel.jqxPanel("width",this.host.width()),this.panel.jqxPanel("_arrange")),this._calculateWidth(),x.jqx.isHidden(this.host)&&((t=this)._hiddenTimer&&clearInterval(this._hiddenTimer),this._hiddenTimer=setInterval(function(){x.jqx.isHidden(t.host)||(clearInterval(t._hiddenTimer),t._calculateWidth())},100)),1!=e&&this.checkboxes&&this._updateCheckLayout(null)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},loadItems:function(e){var t,i;if(null!=e)return t=this,this.items=new Array,i="<ul>",x.map(e,function(e){if(null==e)return null;i+=t._parseItem(e)}),i+="</ul>"},_parseItem:function(e){var t="";if(null==e)return null;var i=e.label,s=e.value,n=(!e.label&&e.html&&(i=e.html),null!=this.displayMember&&""!=this.displayMember&&(i=e[this.displayMember]),null!=this.valueMember&&""!=this.valueMember&&(s=e[this.valueMember]),i=i||"Item","string"==typeof e&&(i=e),!1),l=(null!=e.expanded&&e.expanded&&(n=!0),!1),r=(null!=e.locked&&e.locked&&(l=!0),!1),a=(null!=e.selected&&e.selected&&(r=!0),!1),h=(null!=e.disabled&&e.disabled&&(a=!0),!1),o=(null!=e.checked&&e.checked&&(h=!0),e.icon),n=(t+="<li",n&&(t+=' item-expanded="true" '),l&&(t+=' item-locked="true" '),a&&(t+=' item-disabled="true" '),r&&(t+=' item-selected="true" '),e.iconsize&&(t+=' item-iconsize="'+e.iconsize+'" '),null!=o&&(t+=' item-icon="'+o+'" '),e.label&&!e.html&&(t+=' item-label="'+i+'" '),null!=s&&(t+=' item-value="'+s+'" '),null!=e.checked&&(t+=' item-checked="'+h+'" '),"");return null!=e.id?t+=' id="'+(n=e.id)+'" ':t+=' id="'+(n=this.createID())+'" ',t+=">"+i,e.items?t+=this.loadItems(e.items):null!=this.itemsMember&&""!=this.itemsMember&&e[this.itemsMember]&&(t+=this.loadItems(e[this.itemsMember])),this._valueList||(this._valueList=new Array),this._valueList[n]=e.value,t+="</li>"},ensureVisible:function(e){var t,i,s,n,l;null!=e&&this.panel&&(t=this.panel.jqxPanel("getVScrollPosition"),i=this.panel.jqxPanel("getHScrollPosition"),s=parseInt(this.host.height()),e=x(e).find(".jqx-tree-item:first"),n=x(e).position().top,0===t&&0===n||(l=this.panel.jqxPanel("hScrollBar").outerHeight(),(n<=t||s+t<=n)&&this.panel.jqxPanel("scrollTo",i,n-s+x(e).outerHeight()+l)))},_syncItems:function(e){this._visibleItems=new Array;var i=this;x.each(e,function(){var e,t=x(this);"none"!=t.css("display")&&(e=t.outerHeight(),0<t.height()&&(t=parseInt(t.offset().top),i._visibleItems[i._visibleItems.length]={element:this,top:t,height:e,bottom:t+e}))})},hitTest:function(i,s){var n,l,r=this,a=null,e=this.host.find(".jqx-item");return this._syncItems(e),r._visibleItems&&(n=parseInt(r.host.offset().left),l=r.host.outerWidth(),x.each(r._visibleItems,function(e){if(n<=i&&i<n+l&&this.top+5<s&&s<this.top+this.height){var t=x(this.element).parents("li:first");if(0<t.length&&null!=(a=r.getItem(t[0])))return a.height=this.height,a.top=this.top,!1}})),a},addBefore:function(e,t,i){return this.addBeforeAfter(e,t,!0,i)},addAfter:function(e,t,i){return this.addBeforeAfter(e,t,!1,i)},addBeforeAfter:function(e,t,i,s){for(var n,l=new Array,r=(t&&null!=t.treeInstance&&(t=t.element),x.isArray(e)?l=e:l[0]=e,""),a=this,e=(x.each(l,function(){r+=a._parseItem(this)}),x(r)),h=(this.element.innerHTML.indexOf("UL")&&(n=this.host.find("ul:first")),null==t?n.append(e):i?x(t).before(e):x(t).after(e),e),o=0;o<h.length;o++){this._createItem(h[o]);var d=x(h[o]).find("li");if(0<d.length)for(var m=0;m<d.length;m++)this._createItem(d[m])}function c(e){a._refreshMapping(!1),a._updateItemsNavigation(),e&&a.allowDrag&&a._enableDragDrop&&a._enableDragDrop(),null!=a.selectedItem&&(x(a.selectedItem.titleElement).addClass(a.toThemeProperty("jqx-fill-state-pressed")),x(a.selectedItem.titleElement).addClass(a.toThemeProperty("jqx-tree-item-selected")))}if(0==s)return c(!0),void this._raiseEvent("4",{items:this.getItems()});c(!1),a._render(),this._raiseEvent("4",{items:this.getItems()}),a.checkboxes&&a._updateCheckLayout(null)},addTo:function(e,t,i){for(var s,n=this,l=new Array,r=(t&&null!=t.treeInstance&&(t=t.element),x.isArray(e)?l=e:l[0]=e,""),a=this,e=(x.each(l,function(){r+=a._parseItem(this)}),x(r)),h=(n.element.innerHTML.indexOf("UL")&&(s=n.host.find("ul:first")),null==t?s.append(e):0==(l=(t=x(t)).find("ul:first")).length?(s=x("<ul></ul>"),x(t).append(s),l=t.find("ul:first"),(s=n.itemMapping["id"+t[0].id].item).subtreeElement=l[0],s.hasItems=!0,l.addClass(n.toThemeProperty("jqx-tree-dropdown")),a.rtl&&l.addClass(n.toThemeProperty("jqx-tree-dropdown-rtl")),l.append(e),t=l.find("li:first"),s.parentElement=t):l.append(e),e),o=0;o<h.length;o++){this._createItem(h[o]);var d=x(h[o]).find("li");if(0<d.length)for(var m=0;m<d.length;m++)this._createItem(d[m])}function c(e){a._refreshMapping(!1),a._updateItemsNavigation(),e&&a.allowDrag&&a._enableDragDrop&&a._enableDragDrop(),null!=a.selectedItem&&(x(a.selectedItem.titleElement).addClass(a.toThemeProperty("jqx-fill-state-pressed")),x(a.selectedItem.titleElement).addClass(a.toThemeProperty("jqx-tree-item-selected")))}if(0==i)return c(!0),void this._raiseEvent("4",{items:this.getItems()});c(!1),a._render(),a.checkboxes&&a._updateCheckLayout(null),this._raiseEvent("4",{items:this.getItems()})},updateItem:function(e,t){var i,s=null!=e.treeInstance?e:this.getItem(e);return s||(i=e,e=t,t=i,s=null!=e.treeInstance?e:this.getItem(e)),!!s&&((t="string"==typeof t?{label:t}:t).value&&(s.value=t.value),t.label&&(s.label=t.label,x.jqx.utilities.html(x(s.titleElement),t.label),x.jqx.browser.msie&&x.jqx.browser.version<8&&(x(document.body).append(this._measureItem),this._measureItem.html(x(s.titleElement).text()),i=this._measureItem.width(),s.icon&&(i+=20),0<x(x(s.titleElement).find("img")).length&&(i+=20),x(s.titleElement).css("max-width",i+"px"),this._measureItem.remove())),t.icon&&(0<x(s.element).children(".itemicon").length?x(s.element).find(".itemicon")[0].src=t.icon:(e=t.iconsize,i=x('<img width="'+(e=e||16)+'" height="'+e+'" style="float: left;" class="itemicon" src="'+t.icon+'"/>'),x(s.titleElement).prepend(i),i.css("margin-right","6px"),this.rtl&&(i.css("margin-right","0px"),i.css("margin-left","6px"),i.css("float","right")))),t.expanded&&this.expandItem(s),t.disabled&&this.disableItem(s),t.selected&&this.selectItem(s),!0)},removeItem:function(e,t){var i,s;null!=e&&((e=null!=e.treeInstance?e.element:e).id,(s=(i=this).getItem(e))&&-1!=this.items.indexOf(s)&&function e(t){-1!=(i=this.items.indexOf(t))&&this.items.splice(i,1);var i=x(t.element).find("li"),t=i.length,s=this,n=new Array;if(0<t){x.each(i,function(e){var t=s.itemMapping["id"+this.id].item;n.push(t)});for(var l=0;l<n.length;l++)e.apply(this,[n[l]])}}.apply(this,[s]),0<this.host.find("#"+e.id).length&&x(e).remove(),0==t?this._raiseEvent("5"):(i._updateItemsNavigation(),i.allowDrag&&i._enableDragDrop?i._render(!0,!1):i._render(),null!=i.selectedItem&&i.selectedItem.element==e&&(x(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),x(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=null),this._raiseEvent("5"),i.checkboxes&&i._updateCheckLayout(null)))},clear:function(){this.items=new Array,this.itemMapping=new Array;var e=this.host.find("ul:first");0<e.length&&(e[0].innerHTML=""),this.selectedItem=null},disableItem:function(t){if(null==t)return!1;null!=t.treeInstance&&(t=t.element);var i=this;x.each(i.items,function(){var e=this;if(e.element==t)return e.disabled=!0,x(e.titleElement).addClass(i.toThemeProperty("jqx-fill-state-disabled")),x(e.titleElement).addClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&e.checkBoxElement&&x(e.checkBoxElement).jqxCheckBox({disabled:!0}),!1})},_updateInputSelection:function(){var e;if(this.input&&(null==this.selectedItem?this.input.val(""):(null==(e=this.selectItem.value)&&(e=this.selectedItem.label),this.input.val(e)),this.checkboxes)){var t=this.getCheckedItems();if(this.submitCheckedItems){for(var i="",s=0;s<t.length;s++){var n=t[s].value;null==n&&(n=t[s].label),s==t.length-1?i+=n:i+=n+","}this.input.val(i)}}},getCheckedItems:function(){var e=new Array;return x.each(this.items,function(){this.checked&&e.push(this)}),e},getUncheckedItems:function(){var e=new Array;return x.each(this.items,function(){this.checked||e.push(this)}),e},checkAll:function(){x.each(this.items,function(){this.disabled||(this.checked=!0,x(this.checkBoxElement).jqxCheckBox("_setState",!0))}),this._raiseEvent("6",{element:this,checked:!0})},uncheckAll:function(){x.each(this.items,function(){this.disabled||(this.checked=!1,x(this.checkBoxElement).jqxCheckBox("_setState",!1))}),this._raiseEvent("6",{element:this,checked:!1})},checkItem:function(t,i,e){if(null==t)return!1;void 0===i&&(i=!0),null!=t.treeInstance&&(t=t.element);var s=!1,n=null;x.each(this.items,function(){var e=this;if(e.element==t&&!e.disabled)return s=!0,e.checked=i,x((n=e).checkBoxElement).jqxCheckBox({checked:i}),!1}),s&&(this._raiseEvent("6",{element:t,checked:i}),this._updateInputSelection()),null==e&&n&&this.hasThreeStates&&this.checkItems(n,n)},uncheckItem:function(e){this.checkItem(e,!1)},enableItem:function(t){if(null==t)return!1;null!=t.treeInstance&&(t=t.element);var i=this;x.each(i.items,function(){var e=this;if(e.element==t)return e.disabled=!1,x(e.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-disabled")),x(e.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&e.checkBoxElement&&x(e.checkBoxElement).jqxCheckBox({disabled:!1}),!1})},enableAll:function(){var t=this;x.each(t.items,function(){var e=this;e.disabled=!1,x(e.titleElement).removeClass(t.toThemeProperty("jqx-tree-item-disabled")),x(e.titleElement).removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.checkboxes&&e.checkBoxElement&&x(e.checkBoxElement).jqxCheckBox({disabled:!1})})},lockItem:function(e){if(null==e)return!1;x.each(this.items,function(){if(this.element==e)return!(this.locked=!0)})},unlockItem:function(e){if(null==e)return!1;x.each(this.items,function(){if(this.element==e)return this.locked=!1})},getItems:function(){return this.items},getItem:function(e){return null!=e&&this.itemMapping["id"+e.id]?this.itemMapping["id"+e.id].item:null},isExpanded:function(e){if(null==e)return!1;e=this.itemMapping["id"+e.id].item;return null!=e&&e.isExpanded},isSelected:function(e){if(null==e)return!1;e=this.itemMapping["id"+e.id].item;return null!=e&&e==this.selectedItem},getPrevItem:function(e){var t=this.getItem(e);return null!=e.treeInstance&&(t=e),this._prevVisibleItem(t)},getNextItem:function(e){var t=this.getItem(e);return null!=e.treeInstance&&(t=e),this._nextVisibleItem(t)},getSelectedItem:function(e){return this.selectedItem},val:function(e){if(0==arguments.length||"object"==typeof e)return this.selectedItem;var t,i;"string"==typeof e?0<(t=this.host.find("#"+e)).length&&(i=this.getItem(t[0]),this.selectItem(i)):(i=this.getItem(e),this.selectItem(i))},getActiveDescendant:function(){return this.selectedItem?this.selectedItem.element.id:""},clearSelection:function(){this.selectItem(null)},selectItem:function(t,e){var i,s;this.disabled||(i=this,null==(t=t&&null!=t.treeInstance?t.element:t)?null!=i.selectedItem&&(x(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),x(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=null):null!=this.selectedItem&&this.selectedItem.element==t||((s=null!=this.selectedItem?this.selectedItem.element:null)&&x(s).removeAttr("aria-selected"),x.each(i.items,function(){var e=this;this.selected=!1,e.disabled||e.element==t&&(null==i.selectedItem||null!=i.selectedItem&&i.selectedItem.titleElement!=e.titleElement)&&(null!=i.selectedItem&&(x(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),x(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected"))),x(e.titleElement).addClass(i.toThemeProperty("jqx-fill-state-pressed")),x(e.titleElement).addClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=e,this.selected=!0,x(e.element).attr("aria-selected","true"),x.jqx.aria(i,"aria-activedescendant",e.element.id))}),this._updateInputSelection(),this._raiseEvent("2",{element:t,prevElement:s,type:e=e||null})))},collapseAll:function(){this.isUpdating=!0;var e=this,t=e.items,i=this.animationHideDuration;this.animationHideDuration=0,x.each(t,function(){1==this.isExpanded&&e._collapseItem(e,this)}),setTimeout(function(){e.isUpdating=!1,e._calculateWidth()},this.animationHideDuration),this.animationHideDuration=i},expandAll:function(){var e=this,t=(this.isUpdating=!0,this.animationShowDuration);this.animationShowDuration=0,x.each(this.items,function(){this.hasItems&&e._expandItem(e,this)}),setTimeout(function(){e.isUpdating=!1,e._calculateWidth()},this.animationShowDuration),this.animationShowDuration=t},collapseItem:function(e){if(null==e)return!1;null!=e.treeInstance&&(e=e.element);var t=this;return x.each(this.items,function(){if(1==this.isExpanded&&this.element==e)return t._collapseItem(t,this),!1}),!0},expandItem:function(t){if(null==t)return!1;null!=t.treeInstance&&(t=t.element);var i=this;return x.each(i.items,function(){var e=this;0!=e.isExpanded||e.element!=t||e.disabled||e.locked||(i._expandItem(i,e),e.parentElement&&i.expandItem(e.parentElement))}),!0},_getClosedSubtreeOffset:function(e){var e=x(e.subtreeElement),t=-e.outerHeight();e.outerWidth();return{left:0,top:t}},_collapseItem:function(t,i,e,s){if(null==t||null==i)return!1;if(i.disabled)return!1;if(t.disabled)return!1;if(t.locked)return!1;function n(){i.isExpanded=!1,t.checkboxes&&((e=l.find(".chkbox")).stop(),e.css("opacity",1),l.find(".chkbox").animate({opacity:0},50));var e=x(i.arrow);t._arrowStyle(e,"",i.isExpanded),l.slideUp(t.animationHideDuration,function(){i.isCollapsing=!1,t._calculateWidth();var e=x(i.arrow);t._arrowStyle(e,"",i.isExpanded),l.hide(),t._raiseEvent("1",{element:i.element})})}var l=x(i.subtreeElement),r=this._getClosedSubtreeOffset(i);r.top,r.left,x(i.element),t.animationHideDelay,null!=l.data("timer").show&&(clearTimeout(l.data("timer").show),l.data("timer").show=null);n()},_expandItem:function(t,i){if(null==t||null==i)return!1;if(i.isExpanded)return!1;if(i.locked)return!1;if(i.disabled)return!1;if(t.disabled)return!1;var e,s,n=x(i.subtreeElement);null!=n.data("timer")&&null!=n.data("timer").hide&&clearTimeout(n.data("timer").hide),x(i.element);0==parseInt(n.css("top"))?i.isExpanded=!0:(e=x(i.arrow),t._arrowStyle(e,"",i.isExpanded),t.checkboxes&&((s=n.find(".chkbox")).stop(),s.css("opacity",0),s.animate({opacity:1},t.animationShowDuration)),e=x(i.arrow),t._arrowStyle(e,"",!0),n.slideDown(t.animationShowDuration,t.easing,function(){var e=x(i.arrow);i.isExpanded=!0,t._arrowStyle(e,"",i.isExpanded),i.isExpanding=!1,t._raiseEvent("0",{element:i.element}),t._calculateWidth()}),t.checkboxes&&(t._updateCheckItemLayout(i),i.subtreeElement&&(s=x(i.subtreeElement).find("li"),x.each(s,function(){var e=t.getItem(this);null!=e&&t._updateCheckItemLayout(e)}))))},_calculateWidth:function(){var e,t,i=this,s=this.checkboxes?20:0,n=0;this.isUpdating||(x.each(this.items,function(){var e;0!=x(this.element).height()&&(e=x(this.titleElement).outerWidth()+10+s+20*(1+this.level),n=Math.max(n,e),this.hasItems&&(e=parseInt(x(this.titleElement).css("padding-top")),e=((e=(e=isNaN(e)?0:e)*2+2)+x(this.titleElement).height())/2-8.5,x.jqx.browser.msie&&x.jqx.browser.version<9?x(this.arrow).css("margin-top","3px"):0<=parseInt(e)&&x(this.arrow).css("margin-top",parseInt(e)+"px")))}),16<this.toggleIndicatorSize&&(n=n+this.toggleIndicatorSize-16),i.panel&&(n>this.host.width()?(e=n-this.host.width(),t="hidden"!==i.panel.jqxPanel("vScrollBar").css("visibility")?10:0,i.panel.jqxPanel({horizontalScrollBarMax:e+=t})):i.panel.jqxPanel({horizontalScrollBarMax:0})),this.host.find("ul:first").width(n),0<(t=this.host.width()-30)&&this.host.find("ul:first").css("min-width",t),i.panel&&i.panel.jqxPanel("_arrange"))},_arrowStyle:function(e,t,i){var s;0<e.length&&(e.removeClass(),s="",t="jqx-tree-item-arrow"+(i?"-expand":"-collapse")+(s="hover"==t?"-"+t:s),e.addClass(this.toThemeProperty(t)),this.rtl||e.addClass(this.toThemeProperty("jqx-icon-arrow"+(i?"-down":"-right"))),this.rtl&&(e.addClass(this.toThemeProperty(t+"-rtl")),e.addClass(this.toThemeProperty("jqx-icon-arrow"+(i?"-down":"-left")))))},_initialize:function(e,t){var l=this,r=(this.host.addClass(l.toThemeProperty("jqx-widget")),this.host.addClass(l.toThemeProperty("jqx-widget-content")),this.host.addClass(l.toThemeProperty("jqx-tree")),this._updateDisabledState(),x.jqx.browser.msie&&x.jqx.browser.version<8);x.each(this.items,function(){var e=this,t=x(e.element),i=null;if(l.checkboxes&&!e.hasItems&&e.checkBoxElement&&x(e.checkBoxElement).css("margin-left","0px"),r)!e.hasItems&&0<x(e.element).find("ul").length&&x(e.element).find("ul").remove();else{if(!e.hasItems)return l.rtl?e.element.style.marginRight=parseInt(l.toggleIndicatorSize)+"px":e.element.style.marginLeft=parseInt(l.toggleIndicatorSize)+"px",0<(s=x(e.arrow)).length&&(s.remove(),e.arrow=null),!0;l.rtl?e.element.style.marginRight="0px":e.element.style.marginLeft="0px"}0<(s=x(e.arrow)).length&&s.remove();(i=x('<span style="height: 17px; border: none; background-color: transparent;" id="arrow'+t[0].id+'"></span>')).prependTo(t),l.rtl?i.css("float","right"):i.css("float","left"),i.css("clear","both"),i.width(l.toggleIndicatorSize),l._arrowStyle(i,"",e.isExpanded);var s=parseInt(x(this.titleElement).css("padding-top")),s=((s=(s=isNaN(s)?0:s)*2+2)+x(this.titleElement).height())/2-8.5,s=(x.jqx.browser.msie&&x.jqx.browser.version<9?i.css("margin-top","3px"):0<=parseInt(s)&&i.css("margin-top",parseInt(s)+"px"),t.addClass(l.toThemeProperty("jqx-disableselect")),i.addClass(l.toThemeProperty("jqx-disableselect")),"click"),n=l.isTouchDevice();n&&(s=x.jqx.mobile.getTouchEventName("touchend")),l.addHandler(i,s,function(){return e.isExpanded?l._collapseItem(l,e):l._expandItem(l,e),!1}),l.addHandler(i,"selectstart",function(){return!1}),l.addHandler(i,"mouseup",function(){if(!n)return!1}),e.hasItems=0<x(e.element).find("li").length,e.arrow=i[0],e.hasItems||i.css("visibility","hidden"),t.css("float","none")})},_getOffset:function(e){var t=x(window).scrollTop(),i=x(window).scrollLeft(),s=x.jqx.mobile.isSafariMobileBrowser(),n=x(e).offset(),l=n.top,n=n.left;return null!=s&&s?{left:n-i,top:l-t}:x(e).offset()},_renderHover:function(e,t,i){var s,n=this;i||(s=x(t.titleElement),n.addHandler(s,"mouseenter",function(){t.disabled||!n.enableHover||n.disabled||(s.addClass(n.toThemeProperty("jqx-fill-state-hover")),s.addClass(n.toThemeProperty("jqx-tree-item-hover")))}),n.addHandler(s,"mouseleave",function(){t.disabled||!n.enableHover||n.disabled||(s.removeClass(n.toThemeProperty("jqx-fill-state-hover")),s.removeClass(n.toThemeProperty("jqx-tree-item-hover")))}))},_updateDisabledState:function(){this.disabled?this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},_addInput:function(){var e;null==this.input&&((e=this.host.attr("name"))&&this.host.attr("name",""),this.input=x("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",e),this._updateInputSelection())},render:function(){this._updateItemsNavigation(),this._render()},_render:function(e,t){x.jqx.browser.msie&&x.jqx.browser.version<8&&(i=this,x.each(this.items,function(){var e=x(this.element),t=e.parent(),i=parseInt(this.titleElement.css("margin-left"))+this.titleElement[0].scrollWidth+13,i=(e.css("min-width",i),parseInt(t.css("min-width"))),s=(isNaN(i)&&(i=0),e.css("min-width"));i<parseInt(e.css("min-width"))&&t.css("min-width",s),this.titleElement[0].style.width=null}));var i=this;if(x.data(i.element,"animationHideDelay",i.animationHideDelay),x.data(document.body,"treeel",this),this._initialize(),this.isTouchDevice()&&"dblclick"==this.toggleMode&&(this.toggleMode="click"),null!=e&&1!=e||x.each(this.items,function(){i._updateItemEvents(i,this)}),this.allowDrag&&this._enableDragDrop&&(null==t||1==t)&&this._enableDragDrop(),this._addInput(),this.host.jqxPanel){if(0<this.host.find("#panel"+this.element.id).length)return this.panel.jqxPanel({touchMode:this.touchMode}),void this.panel.jqxPanel("refresh");this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel'+this.element.id+'"></div>');e=this.host.find("div:first"),t="fixed",t=(null!=this.height&&"auto"!=this.height||(t="verticalwrap"),null!=this.width&&"auto"!=this.width||(t="fixed"==t?"horizontalwrap":"wrap"),e.jqxPanel({rtl:this.rtl,theme:this.theme,width:"100%",height:"100%",touchMode:this.touchMode,sizeMode:t}),x.jqx.browser.msie&&x.jqx.browser.version<8&&e.jqxPanel("content").css("left","0px"),e.data({nestedWidget:!0}),(null==this.height||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&this.isTouchDevice()&&(this.removeHandler(e,x.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(e,x.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(e,x.jqx.mobile.getTouchEventName("touchstart")+".touchScroll")),x.data(e[0],"jqxPanel").instance);null!=t&&(this.vScrollInstance=t.vScrollInstance,this.hScrollInstance=t.hScrollInstance),this.panelInstance=t,x.jqx.browser.msie&&x.jqx.browser.version<8&&(this.host.attr("hideFocus",!0),this.host.find("div").attr("hideFocus",!0),this.host.find("ul").attr("hideFocus",!0)),e[0].className="",this.panel=e}this._raiseEvent("3",this)},focus:function(){try{this.host.focus()}catch(e){}},_updateItemEvents:function(t,i){var e=this.isTouchDevice(),s=(e&&(this.toggleMode=x.jqx.mobile.getTouchEventName("touchend")),x(i.element)),n=(t.enableRoundedCorners&&s.addClass(t.toThemeProperty("jqx-rc-all")),e?x.jqx.mobile.getTouchEventName("touchend"):"mousedown"),l=(!0===t.touchMode&&t.removeHandler(x(i.checkBoxElement),"mousedown"),t.removeHandler(x(i.checkBoxElement),n),t.addHandler(x(i.checkBoxElement),n,function(e){return t.disabled||this.treeItem.disabled||(this.treeItem.checked=!this.treeItem.checked,t.checkItem(this.treeItem.element,this.treeItem.checked,"tree"),t.hasThreeStates&&t.checkItems(this.treeItem,this.treeItem)),!1}),x(i.titleElement));t.removeHandler(s);this.allowDrag&&this._enableDragDrop?(t.removeHandler(l,"mousedown.item"),t.removeHandler(l,"click"),t.removeHandler(l,"dblclick"),t.removeHandler(l,"mouseenter"),t.removeHandler(l,"mouseleave")):t.removeHandler(l),t._renderHover(s,i,e);var r=x(i.subtreeElement);0<r.length&&(n=i.isExpanded?"block":"none",r.css({overflow:"hidden",display:n}),r.data("timer",{})),t.addHandler(l,"selectstart",function(e){return!1}),x.jqx.browser.opera&&t.addHandler(l,"mousedown.item",function(e){return!1}),"click"!=t.toggleMode&&t.addHandler(l,"click",function(e){t.selectItem(i.element,"mouse"),null!=t.panel&&t.panel.jqxPanel({focused:!0}),l.focus(),t._raiseEvent("9",{element:i.element})}),t.addHandler(l,t.toggleMode,function(e){if(0<r.length&&clearTimeout(r.data("timer").hide),null!=t.panel&&t.panel.jqxPanel({focused:!0}),t.selectItem(i.element,"mouse"),null==i.isExpanding&&(i.isExpanding=!1),null==i.isCollapsing&&(i.isCollapsing=!1),0<r.length)return i.isExpanded?0==i.isCollapsing&&(i.isCollapsing=!0,t._collapseItem(t,i,!0)):0==i.isExpanding&&(i.isExpanding=!0,t._expandItem(t,i)),!1})},isTouchDevice:function(){if(null!=this._isTouchDevice)return this._isTouchDevice;var e=x.jqx.mobile.isTouchDevice();return 1==this.touchMode?e=!0:0==this.touchMode&&(e=!1),this._isTouchDevice=e},createID:function(){return x.jqx.utilities.createId()},createTree:function(e){if(null!=e){var t=x(e).find("li");this.items=new Array,this.itemMapping=new Array,x(e).addClass(this.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&x(e).addClass(this.toThemeProperty("jqx-tree-dropdown-root-rtl")),(this.rtl||x.jqx.browser.msie&&x.jqx.browser.version<8)&&(this._measureItem=x("<span style='position: relative; visibility: hidden;'></span>"),this._measureItem.addClass(this.toThemeProperty("jqx-widget")),this._measureItem.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._measureItem.addClass(this.toThemeProperty("jqx-tree-item")),this._measureItem.addClass(this.toThemeProperty("jqx-item")),x(document.body).append(this._measureItem)),x.jqx.browser.msie&&x.jqx.browser.version;for(var i=0;i<t.length;i++)this._createItem(t[i]);(this.rtl||x.jqx.browser.msie&&x.jqx.browser.version<8)&&this._measureItem.remove(),this._updateItemsNavigation(),this._updateCheckStates()}},_updateCheckLayout:function(e){var t=this;this.checkboxes&&x.each(this.items,function(){this.level!=e&&null!=e||t._updateCheckItemLayout(this)})},_updateCheckItemLayout:function(e){var t,i;this.checkboxes&&"none"!=x(e.titleElement).css("display")&&(t=x(e.checkBoxElement),i=x(e.titleElement).outerHeight()/2-1-parseInt(this.checkSize)/2,t.css("margin-top",i),this.rtl||(x.jqx.browser.msie&&x.jqx.browser.version<8?e.titleElement.css("margin-left",parseInt(this.checkSize)+25):e.hasItems&&t.css("margin-left",this.toggleIndicatorSize)))},_updateCheckStates:function(){var e=this;e.hasThreeStates?x.each(this.items,function(){e._updateCheckState(this)}):x.each(this.items,function(){null==this.checked&&e.checkItem(this.element,!1,"tree")})},_updateCheckState:function(e){var s,i,t,n;null!=e&&(s=this,n=i=0,n=(t=x(e.element).find("li")).length,e.checked&&0<n&&x.each(t,function(e){var t=s.itemMapping["id"+this.id].item,i=t.element.getAttribute("item-checked");null!=i&&"true"!=i&&1!=i||s.checkItem(t.element,!0,"tree")}),x.each(t,function(e){var t=s.itemMapping["id"+this.id].item;0!=t.checked&&(t.checked,i++)}),0<n&&(i==n?this.checkItem(e.element,!0,"tree"):0<i?this.checkItem(e.element,null,"tree"):this.checkItem(e.element,!1,"tree")))},_updateItemsNavigation:function(){for(var e=this.host.find("ul:first"),t=x(e).find("li"),i=0;i<t.length;i++){var s=t[i];!this.itemMapping["id"+s.id]||(s=this.itemMapping["id"+s.id].item)&&(s.prevItem=null,s.nextItem=null,0<i&&this.itemMapping["id"+t[i-1].id]&&(s.prevItem=this.itemMapping["id"+t[i-1].id].item),i<t.length-1&&this.itemMapping["id"+t[i+1].id]&&(s.nextItem=this.itemMapping["id"+t[i+1].id].item))}},_applyTheme:function(s,n){for(var l=this,e=(this.host.removeClass("jqx-tree-"+s),this.host.removeClass("jqx-widget-"+s),this.host.removeClass("jqx-widget-content-"+s),this.host.addClass(l.toThemeProperty("jqx-tree")),this.host.addClass(l.toThemeProperty("jqx-widget")),this.host.find("ul:first")),t=(x(e).removeClass(l.toThemeProperty("jqx-tree-dropdown-root-"+s)),x(e).addClass(l.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&(x(e).removeClass(l.toThemeProperty("jqx-tree-dropdown-root-rtl-"+s)),x(e).addClass(l.toThemeProperty("jqx-tree-dropdown-root-rtl"))),x(e).find("li")),i=0;i<t.length;i++){var r=t[i];x(r).children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return x(this).removeClass(l.toThemeProperty("jqx-tree-dropdown-"+s)),x(this).addClass(l.toThemeProperty("jqx-tree-dropdown")),l.rtl&&(x(this).removeClass(l.toThemeProperty("jqx-tree-dropdown-rtl-"+s)),x(this).addClass(l.toThemeProperty("jqx-tree-dropdown-rtl"))),!1})}x.each(this.items,function(){var e=this,t=x(e.element),i=(t.removeClass(l.toThemeProperty("jqx-tree-item-li-"+s)),t.addClass(l.toThemeProperty("jqx-tree-item-li")),this.rtl&&(t.removeClass(l.toThemeProperty("jqx-tree-item-li-"+s)),t.addClass(l.toThemeProperty("jqx-tree-item-li"))),x(e.titleElement).removeClass(l.toThemeProperty("jqx-tree-item-"+s)),x(e.titleElement).addClass(l.toThemeProperty("jqx-tree-item")),x(e.titleElement).removeClass("jqx-item-"+s),x(e.titleElement).addClass(l.toThemeProperty("jqx-item")),x(e.arrow));0<i.length&&l._arrowStyle(i,"",e.isExpanded),e.checkBoxElement&&x(e.checkBoxElement).jqxCheckBox({theme:n}),l.enableRoundedCorners&&(t.removeClass("jqx-rc-all-"+s),t.addClass(l.toThemeProperty("jqx-rc-all")))}),this.host.jqxPanel&&this.panel.jqxPanel({theme:n})},_refreshMapping:function(e,t){for(var i=this.host.find("li"),s=new Array,n=new Array,l=x.data(document.body,"treeItemsStorage"),r=this,a=0;a<i.length;a++){var h,o,d=i[a],m=x(d),c=l[d.id];null!=c&&(n[n.length]=c,null!=e&&1!=e||this._updateItemEvents(this,c),c.level=m.parents("li").length,c.treeInstance=this,o=h=null,-1!=c.titleElement[0].className.indexOf("jqx-fill-state-pressed")&&(x(c.titleElement).removeClass(r.toThemeProperty("jqx-fill-state-pressed")),x(c.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-selected"))),m.children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return c.subtreeElement=this,x(this).addClass(r.toThemeProperty("jqx-tree-dropdown")),r.rtl&&x(this).addClass(r.toThemeProperty("jqx-tree-dropdown-rtl")),!1}),m.parents().each(function(){if("li"==this.tagName||"LI"==this.tagName)return o=this.id,h=this,!1}),c.parentElement=h,c.parentId=o,c.hasItems=0<x(c.element).find("li").length,null!=c&&(s[a]={element:d,item:c},s["id"+d.id]=s[a]))}this.itemMapping=s,this.items=n},_createItem:function(e){if(null!=e){var t=(t=e.id)||this.createID(),i=e,s=x(e),n=(i.id=t,x.data(document.body,"treeItemsStorage")),l=(null==n&&(n=new Array),this.items.length),r=(this.items[l]=new x.jqx._jqxTree.jqxTreeItem,this.treeElements[t]=this.items[l],n[i.id]=this.items[l],x.data(document.body,"treeItemsStorage",n),l=this.items.length,0),a=this,h=null;s.attr("role","treeitem"),s.children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return a.items[l-1].subtreeElement=this,x(this).addClass(a.toThemeProperty("jqx-tree-dropdown")),a.rtl&&(x(this).addClass(a.toThemeProperty("jqx-tree-dropdown-rtl")),x(this).css("clear","both")),!1}),s.parents().each(function(){if("li"==this.tagName||"LI"==this.tagName)return r=this.id,h=this,!1});n=null!=(n=e.getAttribute("item-expanded"))&&("true"==n||1==n);i.removeAttribute("item-expanded");s=null!=(s=e.getAttribute("item-locked"))&&("true"==s||1==s);i.removeAttribute("item-locked");var o=null!=(o=e.getAttribute("item-selected"))&&("true"==o||1==o);i.removeAttribute("item-selected");var d=null!=(d=e.getAttribute("item-disabled"))&&("true"==d||1==d);i.removeAttribute("item-disabled");var m=null!=(m=e.getAttribute("item-checked"))&&("true"==m||1==m),c=e.getAttribute("item-title"),c=((null==c||"true"!=c&&1!=c)&&(c=!1),i.removeAttribute("item-title"),e.getAttribute("item-icon")),u=e.getAttribute("item-iconsize"),p=e.getAttribute("item-label"),f=e.getAttribute("item-value"),g=(i.removeAttribute("item-icon"),i.removeAttribute("item-iconsize"),i.removeAttribute("item-label"),i.removeAttribute("item-value"),this.items[l-1]),c=(g.id=t,null==g.value&&(this._valueList&&this._valueList[t]?g.value=this._valueList[t]:g.value=f),g.icon=c,g.iconsize=u,g.parentId=r,g.disabled=d,g.parentElement=h,g.element=e,g.locked=s,g.selected=o,g.checked=m,g.isExpanded=n,(g.treeInstance=this).itemMapping[l-1]={element:i,item:g},this.itemMapping["id"+i.id]=this.itemMapping[l-1],this.rtl&&(x(g.element).css("float","right"),x(g.element).css("clear","both")),0<x(i.firstChild).length?(u=16,g.icon&&(u=g.iconsize,c=x('<img width="'+(u=u||16)+'" height="'+u+'" style="float: left;" class="itemicon" src="'+g.icon+'"/>'),x(i).prepend(c),c.css("margin-right","6px"),this.rtl&&(c.css("margin-right","0px"),c.css("margin-left","6px"),c.css("float","right"))),-1==(t=-1==(t=i.innerHTML.indexOf("<ul"))?i.innerHTML.indexOf("<UL"):t)?(g.originalTitle=i.innerHTML,i.innerHTML='<div style="display: inline-block;">'+i.innerHTML+"</div>",g.titleElement=x(x(i)[0].firstChild)):(f=i.innerHTML.substring(0,t),f=x.trim(f),g.originalTitle=f,f=x('<div style="display: inline-block;">'+f+"</div>"),(s=x(i).find("ul:first")).remove(),i.innerHTML="",x(i).prepend(f),x(i).append(s),g.titleElement=f,this.rtl&&(f.css("float","right"),s.css("padding-right","10px"))),16!==u&&x(g.titleElement).css("line-height",u+"px"),x.jqx.browser.msie&&x.jqx.browser.version<8&&(x(x(i)[0].firstChild).css("display","inline-block"),m=!1,0==this._measureItem.parents().length&&(x(document.body).append(this._measureItem),m=!0),this._measureItem.css("min-width","20px"),this._measureItem[0].innerHTML=x(g.titleElement).text(),n=this._measureItem.width(),g.icon&&(n+=20),0<x(x(g.titleElement).find("img")).length&&(n+=20),x(x(i)[0].firstChild).css("max-width",n+"px"),m&&this._measureItem.remove())):(g.originalTitle="Item",x(i).append(x("<span>Item</span>")),x(i.firstChild).wrap("<span/>"),g.titleElement=x(i)[0].firstChild,x.jqx.browser.msie&&x.jqx.browser.version<8&&x(i.firstChild).css("display","inline-block")),x(g.titleElement)),t=this.toThemeProperty("jqx-rc-all");if(this.allowDrag&&c.addClass("draggable"),null==p?(p=g.titleElement,g.label=x.trim(c.text())):g.label=p,x(i).addClass(this.toThemeProperty("jqx-tree-item-li")),this.rtl&&x(i).addClass(this.toThemeProperty("jqx-tree-item-li-rtl")),t+=" "+this.toThemeProperty("jqx-tree-item")+" "+this.toThemeProperty("jqx-item"),this.rtl&&(t+=" "+this.toThemeProperty("jqx-tree-item-rtl")),c[0].className=c[0].className+" "+t,g.level=x(e).parents("li").length,g.hasItems=0<x(e).find("li").length,this.rtl&&g.parentElement&&this.checkboxes,this.checkboxes){if(!this.host.jqxCheckBox)throw new Error("jqxTree: Missing reference to jqxcheckbox.js.");f=x('<div style="overflow: visible; position: absolute; width: 18px; height: 18px;" tabIndex=0 class="chkbox"/>'),s=(f.width(parseInt(this.checkSize)),f.height(parseInt(this.checkSize)),x(i).prepend(f),this.rtl&&(f.css("float","right"),f.css("position","static")),f.jqxCheckBox({hasInput:!1,checked:g.checked,boxSize:this.checkSize,animationShowDelay:0,animationHideDelay:0,disabled:d,theme:this.theme}),this.rtl?g.parentElement?f.css("margin-right","10px"):f.css("margin-right","5px"):c.css("margin-left",parseInt(this.checkSize)+8),g.checkBoxElement=f[0],f[0].treeItem=g,c.outerHeight()/2-1-parseInt(this.checkSize)/2);f.css("margin-top",s),x.jqx.browser.msie&&x.jqx.browser.version<8?(c.css("width","1%"),c.css("margin-left",parseInt(this.checkSize)+25)):g.hasItems&&!this.rtl&&f.css("margin-left",this.toggleIndicatorSize)}else x.jqx.browser.msie&&x.jqx.browser.version<8&&c.css("width","1%");d&&this.disableItem(g.element),o&&this.selectItem(g.element),x.jqx.browser.msie&&x.jqx.browser.version<8&&(x(i).css("margin","0px"),x(i).css("padding","0px"))}},destroy:function(){this.removeHandler(x(window),"resize.jqxtree"+this.element.id),this.host.removeClass(),this.isTouchDevice()&&(this.removeHandler(this.panel,x.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(this.panel,x.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(this.panel,x.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var s=this,n=this.isTouchDevice();x.each(this.items,function(){var e=x(this.element),t=n?x.jqx.mobile.getTouchEventName("touchend"):"click",i=(s.removeHandler(x(this.checkBoxElement),t),x(this.titleElement));s.removeHandler(e);s.allowDrag&&s._enableDragDrop?(s.removeHandler(i,"mousedown.item"),s.removeHandler(i,"click"),s.removeHandler(i,"dblclick"),s.removeHandler(i,"mouseenter"),s.removeHandler(i,"mouseleave")):s.removeHandler(i);e=x(this.arrow);0<e.length&&(s.removeHandler(e,t),s.removeHandler(e,"selectstart"),s.removeHandler(e,"mouseup"),n||(s.removeHandler(e,"mouseenter"),s.removeHandler(e,"mouseleave")),s.removeHandler(i,"selectstart")),x.jqx.browser.opera&&s.removeHandler(i,"mousedown.item"),"click"!=s.toggleMode&&s.removeHandler(i,"click"),s.removeHandler(i,s.toggleMode)}),this.panel&&(this.panel.jqxPanel("destroy"),this.panel=null),this.host.remove()},_raiseEvent:function(e,t){e=this.events[e],t=null==t?{owner:null}:t,t.owner=this,e=new x.Event(e);return e.owner=this,e.args=t,this.host.trigger(e)},propertyChangedHandler:function(e,t,i,s){var n,l;null!=this.isInitialized&&0!=this.isInitialized&&("submitCheckedItems"==t&&e._updateInputSelection(),"disabled"==t&&e._updateDisabledState(),"theme"==t&&e._applyTheme(i,s),"keyboardNavigation"==t&&(e.enableKeyboardNavigation=s),"width"!=t&&"height"!=t||(e.refresh(),e._initialize(),e._calculateWidth(),e.host.jqxPanel&&(i="fixed",null!=this.height&&"auto"!=this.height||(i="verticalwrap"),null!=this.width&&"auto"!=this.width||(i="fixed"==i?"horizontalwrap":"wrap"),e.panel.jqxPanel({sizeMode:i}))),"touchMode"==t&&(e._isTouchDevice=null,s&&(e.enableHover=!1),e._render()),"source"!=t&&"checkboxes"!=t||null!=this.source&&(n=[],x.each(e.items,function(){this.isExpanded&&(n[n.length]={label:this.label,level:this.level})}),i=e.loadItems(e.source),e.host.jqxPanel?e.panel.jqxPanel("setcontent",i):e.element.innerHTML=i,s=e.disabled,0<(i=e.host.find("ul:first")).length&&(e.createTree(i[0]),e._render()),i=(l=e).animationShowDuration,l.animationShowDuration=0,e.disabled=!1,0<n.length&&x.each(e.items,function(){for(var e,t=0;t<n.length;t++)n[t].label==this.label&&n[t].level==this.level&&(e=l.getItem(this.element),l._expandItem(l,e))}),e.disabled=s,l.animationShowDuration=i),"hasThreeStates"==t&&(e._render(),e._updateCheckStates()),"toggleIndicatorSize"==t&&(e._updateCheckLayout(),e._render()))}})}(jqxBaseFramework),jqxBaseFramework.jqx._jqxTree.jqxTreeItem=function(e,t,i){return{label:null,id:e,parentId:t,parentElement:null,parentItem:null,disabled:!1,selected:!1,locked:!1,checked:!1,level:0,isExpanded:!1,hasItems:!1,element:null,subtreeElement:null,checkBoxElement:null,titleElement:null,arrow:null,prevItem:null,nextItem:null}};